!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tg-editable-grid",[],t):"object"==typeof exports?exports["tg-editable-grid"]=t():e["tg-editable-grid"]=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=111)}([function(e,t,n){"use strict";var i=n(4).extend("Feature",{next:null,detached:null,cursor:null,currentHoverCell:null,setNext:function(e){this.next?this.next.setNext(e):(this.next=e,this.detached=e)},detachChain:function(){this.next=null},attachChain:function(){this.next=this.detached},handleMouseMove:function(e,t){this.next&&this.next.handleMouseMove(e,t)},handleMouseExit:function(e,t){this.next&&this.next.handleMouseExit(e,t)},handleMouseEnter:function(e,t){this.next&&this.next.handleMouseEnter(e,t)},handleMouseDown:function(e,t){this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){this.next&&this.next.handleMouseUp(e,t)},handleKeyDown:function(e,t){if(!this.next)return!0;this.next.handleKeyDown(e,t)},handleKeyUp:function(e,t){this.next&&this.next.handleKeyUp(e,t)},handleWheelMoved:function(e,t){this.next&&this.next.handleWheelMoved(e,t)},handleDoubleClick:function(e,t){this.next&&this.next.handleDoubleClick(e,t)},handleClick:function(e,t){this.next&&this.next.handleClick(e,t)},handleMouseDrag:function(e,t){this.next&&this.next.handleMouseDrag(e,t)},handleContextMenu:function(e,t){this.next&&this.next.handleContextMenu(e,t)},moveSingleSelect:function(e,t,n){this.next&&this.next.moveSingleSelect(e,t,n)},isFirstFixedRow:function(e,t){return t.gridCell.y<1},isFirstFixedColumn:function(e,t){return 0===t.gridCell.x},setCursor:function(e){this.next&&this.next.setCursor(e),this.cursor&&e.beCursor(this.cursor)},initializeOn:function(e){this.next&&this.next.initializeOn(e)}});e.exports=i},function(e,t,n){"use strict";var i=n(5),r=n(17),o=i.extend("Textfield",{template:'<input type="text" lang="{{locale}}" class="hypergrid-textfield" style="{{style}}">',initialize:function(){this.input.style.textAlign=this.event.properties.halign,this.input.style.font=this.event.properties.font},localizer:r.prototype.string,selectAll:function(){this.input.setSelectionRange(0,this.input.value.length)}});e.exports=o},function(e,t,n){"use strict";var i=n(4).extend("CellRenderer",{paint:function(e,t){},roundRect:function(e,t,n,i,r,o,s,a){a||(a=!0),o||(o=5),e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+r-o),e.quadraticCurveTo(t+i,n+r,t+i-o,n+r),e.lineTo(t+o,n+r),e.quadraticCurveTo(t,n+r,t,n+r-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),a&&e.stroke(),s&&e.fill(),e.closePath()}});e.exports=i},function(e,t,n){"use strict";function i(e,t){Object.defineProperty(this,e,{value:t,writable:!1,enumerable:!0,configurable:!1})}function r(e,t){i.call(this,"x",Number(e)||0),i.call(this,"y",Number(t)||0)}function o(e,t,n,o){e=Number(e)||0,t=Number(t)||0,n=Number(n)||0,o=Number(o)||0,n<0&&(e+=n,n=-n),o<0&&(t+=o,o=-o),i.call(this,"origin",new r(e,t)),i.call(this,"extent",new r(n,o)),i.call(this,"corner",new r(e+n,t+o)),i.call(this,"center",new r(e+n/2,t+o/2))}r.prototype={plus:function(e){return new r(this.x+e.x,this.y+e.y)},plusXY:function(e,t){return new r(this.x+(e||0),this.y+(t||0))},minus:function(e){return new r(this.x-e.x,this.y-e.y)},min:function(e){return new r(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new r(Math.max(this.x,e.x),Math.max(this.y,e.y))},distance:function(e){var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){var t=!1;return e&&(t=this.x===e.x&&this.y===e.y),t},greaterThan:function(e){return this.x>e.x&&this.y>e.y},lessThan:function(e){return this.x<e.x&&this.y<e.y},greaterThanOrEqualTo:function(e){return this.x>=e.x&&this.y>=e.y},lessThanOrEqualTo:function(e){return this.x<=e.x&&this.y<=e.y},within:function(e){var t=e.origin.x,n=t+e.extent.x,i=e.origin.y,r=i+e.extent.y;return e.extent.x<0&&(t=n,n=e.origin.x),e.extent.y<0&&(i=r,r=e.origin.y),t<=this.x&&this.x<n&&i<=this.y&&this.y<r}},r.prototype.EQ=r.prototype.equals,r.prototype.GT=r.prototype.greaterThan,r.prototype.LT=r.prototype.lessThan,r.prototype.GE=r.prototype.greaterThanOrEqualTo,r.prototype.LE=r.prototype.lessThanOrEqualTo,o.prototype={get top(){return this.origin.y},get left(){return this.origin.x},get bottom(){return this.corner.y},get right(){return this.corner.x},get width(){return this.extent.x},get height(){return this.extent.y},get area(){return this.width*this.height},flattenXAt:function(e){return new o(e,this.origin.y,0,this.extent.y)},flattenYAt:function(e){return new o(this.origin.x,e,this.extent.x,0)},contains:function(e){return e.within(this)},within:function(e){return e.origin.lessThanOrEqualTo(this.origin)&&e.corner.greaterThanOrEqualTo(this.corner)},growBy:function(e){return new o(this.origin.x+e,this.origin.y+e,this.extent.x-e-e,this.extent.y-e-e)},shrinkBy:function(e){return this.growBy(-e)},union:function(e){var t=this.origin.min(e.origin),n=this.corner.max(e.corner).minus(t);return new o(t.x,t.y,n.x,n.y)},forEach:function(e,t){t=t||this;for(var n=this.origin.x,i=this.corner.x;n<i;n++)for(var r=this.origin.y,o=this.corner.y;r<o;r++)e.call(t,n,r)},intersect:function(e,t,n){var i=null,r=this.origin.max(e.origin),s=this.corner.min(e.corner).minus(r);return s.x>0&&s.y>0?i=new o(r.x,r.y,s.x,s.y):"function"==typeof t&&(i=t.call(n||this,e)),i},intersects:function(e){return e.corner.x>this.origin.x&&e.corner.y>this.origin.y&&e.origin.x<this.corner.x&&e.origin.y<this.corner.y}},t.Point=r,t.Rectangle=o},function(e,t,n){"use strict";var i=n(14).Base;Object.defineProperty(i.prototype,"version",{enumerable:!0,writable:!1,configurable:!1,value:n(22).version}),i.prototype.atLeastVersion=function(e){var t,n=e.split("."),i=this.version.split(".");return n.find(function(e,n){return t=e-i[n]}),t>=0},i.prototype.deprecated=n(45),i.prototype.HypergridError=n(6),i.prototype.notify=function(e,t){switch(t){case"warn":console.warn(e);break;case"alert":alert(e);break;default:throw new this.HypergridError(e)}},i.prototype.unwrap=function(e){return"f"===(typeof e)[0]&&(e=e()),e},i.prototype.mixIn=n(8).mixIn,i.prototype.createApply=function(e,t,n){var i=Array.prototype.slice.call(arguments,2),r=[null].concat(i).concat(t);return new(e.bind.apply(e,r))},e.exports=i},function(e,t,n){"use strict";var i=n(4),r=n(65),o=n(17),s=i.extend("CellEditor",{initialize:function(e,t){for(var n in t)this[n]=t[n];this.event=t;var i=this.event.value;i instanceof Array&&(i=i[1]),this.grid=e,this.grid.cellEditor=this,this.locale=e.localization.locale;var r=this.grid.localization.get(t.format);r!==o.prototype.string&&"string"!==t.format&&(this.localizer=r),this.initialValue=i;var s=document.createElement("DIV");s.innerHTML=this.grid.modules.templater.render(this.template,this),this.el=s.firstChild,this.input=this.el,this.errors=0;var a=this;this.el.addEventListener("keyup",this.keyup.bind(this)),this.el.addEventListener("keydown",function(t){9===t.keyCode&&t.preventDefault(),e.fireSyntheticEditorKeyDownEvent(a,t)}),this.el.addEventListener("keypress",function(t){e.fireSyntheticEditorKeyPressEvent(a,t)}),this.el.addEventListener("mousedown",function(e){a.onmousedown(e)})},onmousedown:function(e){e.stopPropagation()},localizer:o.prototype.null,specialKeyups:{9:"stopEditing",13:"stopEditing",27:"cancelEditing"},keyup:function(e){var t,n,i=this.grid,r=this.event.properties,o=r.feedbackCount,s=i.canvas.getKeyChar(e);if((t=this.specialKeyups[e.keyCode])&&(n=this[t](o))&&i.repaint(),r.mappedNavKey(s,e.ctrlKey)&&(!t&&(n=this.stopEditing(o))&&i.repaint(),n)){var a=i.canvas.newEvent(e,"fin-editor-keydown",{grid:i,alt:e.altKey,ctrl:e.ctrlKey,char:s,legacyChar:e.legacyKey,code:e.charCode,key:e.keyCode,meta:e.metaKey,shift:e.shiftKey,identifier:e.key,editor:this});i.delegateKeyDown(a)}return this.grid.fireSyntheticEditorKeyUpEvent(this,e),n},checkEditorPositionFlag:!1,gridRenderedNotification:function(){this.checkEditor()},scrollValueChangedNotification:function(){this.checkEditorPositionFlag=!0},moveEditor:function(){this.setBounds(this.event.bounds)},beginEditing:function(){this.grid.fireRequestCellEdit(this.event,this.initialValue)&&(this.checkEditorPositionFlag=!0,this.checkEditor())},setEditorValue:function(e){this.input.value=this.localizer.format(e)},showEditor:function(){this.el.style.display="inline"},hideEditor:function(){this.el.style.display="none"},stopEditing:function(e){var t=this.input.value;try{var n=this.validateEditorValue(t);if(!n)var i=this.getEditorValue(t)}catch(e){n=e}if(!n&&this.grid.fireSyntheticEditorDataChangeEvent(this,this.initialValue,i))try{this.saveEditorValue(i)}catch(e){n=e}return n?e>=0?this.errorEffectBegin(++this.errors%e==0&&n):this.cancelEditing():(this.hideEditor(),this.grid.cellEditor=null,this.el.remove()),!n},cancelEditing:function(){return this.setEditorValue(this.initialValue),this.hideEditor(),this.grid.cellEditor=null,this.el.remove(),this.grid.takeFocus(),!0},errorEffectBegin:function(e){if(!this.effecting){var t=this.grid.properties.feedbackEffect,n=r[t.name||t];if(n){var i=Object.assign({},t.options);i.callback=this.errorEffectEnd.bind(this,e),this.effecting=!0,n.call(this,i)}}},errorEffectEnd:function(e,t){if(e){var n='Invalid value. To resolve, do one of the following:\n\n   * Correct the error and try again.\n         - or -\n   * Cancel editing by pressing the "esc" (escape) key.';"string"!=typeof(e=e.message||e)&&(e=""),this.localizer.expectation&&(e=e?e+"\n"+this.localizer.expectation:this.localizer.expectation),e&&(/[\n\r]/.test(e)&&(e=(e="\n"+e).replace(/[\n\r]+/g,"\n\n   * ")),n+="\n\nAdditional information about this error: "+e),setTimeout(function(){alert(n)})}this.effecting=!1},saveEditorValue:function(e){var t=!(e&&e===this.initialValue)&&this.grid.fireBeforeCellEdit(this.event.gridCell,this.initialValue,e,this);return t&&(this.event.value=e,this.grid.fireAfterCellEdit(this.event.gridCell,this.initialValue,e,this)),t},getEditorValue:function(e){return this.localizer.parse(e||this.input.value)},validateEditorValue:function(e){return this.localizer.invalid&&this.localizer.invalid(e||this.input.value)},takeFocus:function(){var e=this.el,t=e.style.left,n=e.style.top;e.style.left=e.style.top=0;var i=window.scrollX,r=window.scrollY;this.input.focus(),window.scrollTo(i,r),this.selectAll(),e.style.left=t,e.style.top=n},selectAll:function(){},setBounds:function(e){var t=this.el.style;t.left=a(e.x),t.top=a(e.y),t.width=a(e.width),t.height=a(e.height)},checkEditor:function(){this.checkEditorPositionFlag&&(this.checkEditorPositionFlag=!1,this.event.isCellVisible?(this.setEditorValue(this.initialValue),this.attachEditor(),this.moveEditor(),this.showEditor(),this.takeFocus()):this.hideEditor())},attachEditor:function(){this.grid.div.appendChild(this.el)},template:""});function a(e){return e+"px"}e.exports=s},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype=Object.create(Error.prototype),i.prototype.name="HypergridError",e.exports=i},function(e,t,n){"use strict";function i(e){return e instanceof i?e:this instanceof i?(this.originalValue=e,void(this.o=e||{})):new i(e)}i.chain=function(e){var t=i(e);return t.chaining=!0,t},i.prototype={value:function(){return this.originalValue},each:function(e,t){var n=this.o;return Object.keys(n).forEach(function(t){e.call(this,n[t],t,n)},t||n),this},find:function(e,t){var n,i=this.o;return i&&void 0!==(n=Object.keys(i).find(function(t){return e.call(this,i[t],t,i)},t||i))&&(n=i[n]),n},filter:function(e,t){var n=this.o,i=[];return n&&Object.keys(n).forEach(function(t){e.call(this,n[t],t,n)&&i.push(n[t])},t||n),i},map:function(e,t){var n=this.o,i=[];return n&&Object.keys(n).forEach(function(t){i.push(e.call(this,n[t],t,n))},t||n),i},reduce:function(e,t,n){var i=this.o;return i&&Object.keys(i).forEach(function(n,r){t=r||void 0!==t?e(t,i[n],n,i):i[n]},n||i),t},extend:function(e){var t=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){if(e)for(var n in e)t[n]=e[n]}),this.chaining?this:t},extendOwn:function(e){var t=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){i(e).each(function(e,n){t[n]=e})}),this.chaining?this:t}},Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(t=n[o],e.call(r,t,o,n))return t}),e.exports=i},function(e,t,n){"use strict";function i(e,t){for(var n=1;n<arguments.length;++n)r.call(e,arguments[n]);return e}function r(e){var t;for(var n in e)(t=Object.getOwnPropertyDescriptor(e,n))&&Object.defineProperty(this,n,t);return this}i.mixInTo=function(e){var t;for(var n in this)(t=Object.getOwnPropertyDescriptor(this,n))&&Object.defineProperty(e,n,t);return e},i.mixIn=r,e.exports=i},function(e,t,n){"use strict";var i=n(7),r=n(49);i(r).each(function(e,t){var n=new Image;n.src="data:"+e.type+";base64,"+e.data,r[t]=n}),r["checkbox-on"]=r.checked,r["checkbox-off"]=r.unchecked,r.add=function(e,t){return r[e]=t},r.checkbox=function(e){return r[e?"checked":"unchecked"]},r.filter=function(e){return r[e?"filter-on":"filter-off"]},e.exports=r},function(e,t,n){"use strict";var i=n(19),r=/^\d+$/,o=["transformations","propPath","dictPath","force"];function s(e){e&&o.forEach(function(t){e[t]&&(this[t]=e[t])},this)}function a(e,t){return t.reduce(function(e,t){return e[t]||(e[t]=Object.create(null))},e)}function l(e){return(e=e?Array.isArray(e)?e.slice():(e+"").split("."):[]).toString=u,e}function u(){return this.join(".")}s.prototype={constructor:s,transformations:["verbatim","toCamelCase"],set propPath(e){this._propPath=l(e)},get propPath(){return this._propPath},_propPath:["name"],set dictPath(e){this._dictPath=l(e)},get dictPath(){return this._dictPath},_dictPath:[],getSynonyms:function(e,t){var n=[];return"string"==typeof e&&e&&(t=t||this.transformations,Array.isArray(t)||(t=Object.keys(t)),t.forEach(function(t){if("function"!=typeof i[t])throw new ReferenceError('Unknown transformer "'+t+'"');var r=i[t](e);""===r||r in n||n.push(r)})),n},decorate:function(e,t,n){var i=a(e,this.dictPath),o=i===e,s=this.force;return t.forEach(function(e){o&&r.test(e)||!s&&e in i||(i[e]=n)}),e},decorateList:function(e,t,n){var r;return"number"==typeof e?r=[t[e]]:(t=r=arguments[0],n=arguments[1]),n=n?l(n):this.propPath,r.forEach(function(e){var r=void 0!==n&&"object"==typeof e?a(e,n):e;if(Array.isArray(this.transformations)){var o=this.getSynonyms(r);this.decorate(t,o,e)}else Object.keys(this.transformations).forEach(function(e,t,n){var r=i[n],o=this.transformations[n],s=Array.isArray(o)?o.slice():o.split("."),l=s.splice(s.length-1,1)[0],u=a(e,s);!this.force&&l in u||(u[l]=r(t))}.bind(this,e,r))},this),t}},s.prototype.decorateObject=s.prototype.decorate,s.prototype.decorateArray=s.prototype.decorateList,e.exports=s},function(e,t,n){"use strict";var i=n(4).extend("Registry",{initialize:function(){this.items=Object.create(null)},add:function(e,t){if(1===arguments.length&&(t=e,e=void 0),t){if(!(e=e||t.getClassName&&t.getClassName()))throw new this.HypergridError("Cannot register "+this.friendlyName()+" without a name.");return this.items[e]=t,e=e.toLowerCase(),Object.keys(this.items).filter(function(t){return t.toLowerCase()===e}).forEach(function(e){this.items[e]=t},this),t}},addSynonym:function(e,t){return this.items[e]=this.items[t]},get:function(e){if(e){var t=this.items[e];if(!t){var n=e.toLowerCase(),i=Object.keys(this.items).find(function(e){return n===e.toLowerCase()});if(!(t=this.items[i]))throw new this.HypergridError('Expected "'+e+'" to be a case-insensitive match for a registered '+this.friendlyName()+".");this.addSynonym(e,i)}return t}},friendlyName:function(){if(this.BaseClass){var e=this.BaseClass.getClassName();e=e&&e.replace(/([A-Z])/g," $1").trim().toLowerCase()}else e=function(e){return r.find(function(t){if(t.plural.test(e))return e=e.replace(t.plural,t.singular),!0}),e}(this.getClassName()).toLowerCase();return function(e){return/^[aeiou]/.test(e)?"an":"a"}(e=e||"item")+" "+e}}),r=[{plural:/ies$/,singular:"y"},{plural:/s$/,singular:""}];e.exports=i},function(e,t,n){"use strict";var i=n(14).Base.extend("DatasaurBase",{isNullObject:!0,drillDownCharMap:{true:"▼",false:"▶",undefined:"",null:"   "},DataError:o,initialize:function(e,t){if(e)for(this.handlers=e.handlers,this.next=e;e;)this.source=e,e=e.next;else this.handlers=[],this.source=this;this.install(Object.getPrototypeOf(this))},install:function(e,t){t=t||{};var n=this,o=function(e){var t,n=e.hasOwnProperty("!!keys")&&e["!!keys"],i=r.concat(e.hasOwnProperty("!keys")&&e["!keys"]||[]);t=Array.isArray(e)?e:Object.keys(e).filter(function(t){return"function"==typeof Object.getOwnPropertyDescriptor(e,t).value});return t.filter(function(e){return!(n&&n.indexOf(e)<0||i.indexOf(e)>=0)})}(e),s=t.inject&&!Array.isArray(e);o.forEach(function(r){s&&(function(e,t,n){do{if(e[t])if(n)for(var r=e;r&&r!==Object.prototype;r=Object.getPrototypeOf(r))delete r[t];else if(e[t]!==i.prototype[t])return e[t];e=e.next}while(e)}(n,r,t.force)||(this.source[r]=e[r])),i.prototype[r]||(i.prototype[r]=function(){if(this.next)return this.next[r].apply(this.next,arguments)})},this)},dispatchEvent:function(e){this.handlers.forEach(function(t){t.call(this,e)},this)},addListener:function(e){this.handlers.indexOf(e)<0&&this.handlers.push(e)},removeListener:function(e){var t=this.handlers.indexOf(e);t>=0&&delete this.handlers[t]},removeAllListeners:function(){this.handlers.length=0},dump:function(e){e=Math.min(this.getRowCount(),e||Math.max(100,this.getRowCount()));for(var t=[],n=this.getSchema(),i=n?n.map(function(e){return e.name}):this.getHeaders(),r=this.getColumnCount(),o=this.viewMakesSense,s=0;s<e;s++){for(var a={},l=0;l<r;l++){var u=this.getValue(l,s);0===l&&o&&(u=this.fixIndentForTableDisplay(u)),a[i[l]]=u}t[s]=a}console.table(t)}});var r=["constructor","initialize","!keys","!!keys"];function o(e){this.message=e}o.prototype=Object.create(Error.prototype),o.prototype.name="DataError",e.exports=i},function(e,t,n){"use strict";n(41);var i=n(3).Point,r=n(3).Rectangle,o=n(7),s=n(42).bind(n(44)),a=n(4),l=n(15),u=n(23),c=n(46),h=n(48),d=n(55),f=n(17),p=n(29),g=n(81),v=n(87),m=n(96),y=n(35),b=["top","bottom","left","right"],w=b.concat(["width","height","position"]),C=a.extend("Hypergrid",{initialize:function(e,t){this.selectionInitialize(),"string"==typeof e||e instanceof HTMLElement||(t=e,e=null),t=t||{},this.clearState(),this.setContainer(e||t.container||function(e){var t=document.getElementById("hypergrid");t&&!t.firstElementChild||(S(t=document.createElement("div"),e,w),document.body.appendChild(t));return t}(t.boundingRect)),C.prototype.installPlugins(t.plugins),this.lastEdgeSelection=[0,0],this.isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,this.selectionModel=new d(this),this.renderOverridesCache={},this.allowEventHandlers=!0,this.dragExtent=new i(0,0),this.numRows=0,this.numColumns=0,this.clearMouseDown(),this.setFormatter(t.localization),this.listeners={},this.cellRenderers=v,this.cellEditors=Object.create(m),Object.defineProperty(this.cellEditors,"create",{value:function(e,t){var n=m.get(e);if(n)return new n(this,t)}.bind(this)}),this.initCanvas(t),t.data?this.setData(t.data,t):(t.Behavior||t.dataModel||t.DataModel)&&this.setBehavior(t),t.state&&this.loadState(t.state),this.plugins={},this.installPlugins(t.plugins),document.addEventListener("mousedown",this.mouseCatcher=function(){this.abortEditing()}.bind(this)),setTimeout(this.repaint.bind(this)),C.grids.push(this),this.resetGridBorder("Top"),this.resetGridBorder("Right"),this.resetGridBorder("Bottom"),this.resetGridBorder("Left")},terminate:function(){document.removeEventListener("mousedown",this.mouseCatcher),this.behavior.dataModel.removeListener(this.behavior.boundDispatchEvent),this.removeAllEventListeners(!0),this.canvas.stop();for(var e=this.div;e.hasChildNodes();)e.removeChild(e.firstChild);C.grids.splice(C.grids.indexOf(this),1)},resetGridBorder:function(e){var t="gridBorder"+(e=e||""),n="border"+e,i=this.properties,r=i[t];switch(r){case!0:r=i.lineWidth+"px solid "+i.lineColor;break;case!1:r=null}this.canvas.canvas.style[n]=r},modules:y,behavior:null,isWebkit:!0,mouseDown:[],dragExtent:null,selectionModel:null,cellEditor:null,renderOverridesCache:{},hoverCell:null,lastEdgeSelection:null,setAttribute:function(e,t){this.div.setAttribute(e,t)},clearState:function(){this.properties=Object.defineProperties(this.initThemeLayer(),{grid:{value:this},var:{value:new function(){this.gridRenderer=l.gridRenderer,this.rowHeaderCheckboxes=l.rowHeaderCheckboxes,this.rowHeaderNumbers=l.rowHeaderNumbers,this.gridBorder=l.gridBorder,this.gridBorderTop=l.gridBorderTop,this.gridBorderRight=l.gridBorderRight,this.gridBorderBottom=l.gridBorderBottom,this.gridBorderLeft=l.gridBorderLeft}}}),Object.keys(l).forEach(function(e){var t=l[e];"object"==typeof t&&(u[e]?this[e]=t:this[e]=function e(t){var n=function(e){return Array.isArray(e)?e.slice():"object"==typeof e?Object.defineProperties({},Object.getOwnPropertyDescriptors(e)):e}(t);Object.keys(n).forEach(function(t){var i=Object.getOwnPropertyDescriptor(n,t);"object"==typeof i.value&&(n[t]=e(i.value))});return n}(t))},this.properties)},reset:function(e){this.clearState(),this.removeAllEventListeners(),this.lastEdgeSelection=[0,0],this.selectionModel.reset(),this.renderOverridesCache={},this.clearMouseDown(),this.dragExtent=new i(0,0),this.numRows=0,this.numColumns=0,this.vScrollValue=0,this.hScrollValue=0,this.cancelEditing(),this.sbPrevVScrollValue=null,this.sbPrevHScrollValue=null,this.hoverCell=null,this.scrollingNow=!1,this.lastEdgeSelection=[0,0],this.behavior.reset({subgrids:e&&e.subgrids}),this.renderer.reset(),this.canvas.resize(),this.behaviorChanged(),this.refreshProperties()},installPlugins:function(e){var t=this===C.prototype;e&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){var n,i,r;if(e&&(i=[this],t&&i.push(p.prototype),Array.isArray(e)&&(e.length?"string"!=typeof e[0]?(i=i.concat(e.slice(1)),e=e[0]):e.length>=2?(i=i.concat(e.slice(2)),n=e[0],e=e[1]):e=void 0:e=void 0),e)){if((n=n||e.name||e.$$CLASS_NAME)&&(n=n.substr(0,1).toLowerCase()+n.substr(1)),t)r=this.constructor.plugins,e.preinstall&&!r[n]&&e.preinstall.apply(e,i);else if(r=this.plugins,"function"==typeof e)e=this.createApply(e,i);else if(e.install)e.install.apply(e,i);else if(!e.preinstall)throw new a.prototype.HypergridError("Expected plugin (a constructor; or an API with a `preinstall` method and/or an `install` method).");n&&(r[n]=e)}},this))},uninstallPlugins:function(e){e?Array.isArray(e)||(e=[e]):e=[],o(this.plugins).each(function(t,n,i){i.hasOwnProperty(n)&&e.indexOf(n)>=0&&t.uninstall&&t.uninstall(this,n,i)},this)},computeCellsBounds:function(){this.renderer.computeCellsBounds()},setFormatter:function(e){e=e||{},this.localization=new f(e.locale||C.localization.locale,e.numberOptions||C.localization.numberOptions,e.dateOptions||C.localization.dateOptions)},getFormatter:function(e){return this.localization.get(e).format},formatValue:function(e,t){return this.getFormatter(e)(t)},setHoverCell:function(e){var t=this.hoverCell;t&&t.equals(e.gridCell)||(this.hoverCell=e.gridCell,t&&this.fireSyntheticOnCellExitEvent(e),this.fireSyntheticOnCellEnterEvent(e),this.repaint())},addProperties:function(e){Object.assign(this.properties,e),this.refreshProperties()},refreshProperties:function(){this.behaviorShapeChanged(),this.behavior.defaultRowHeight=null,this.behavior.autosizeAllColumns()},setState:function(e){this.addState(e,!0)},addState:function(e,t){this.behavior.addState(e,t),this.refreshProperties(),this.behaviorChanged()},getState:function(){return this.behavior.getState()},loadState:function(e){this.behavior.setState(e)},saveState:function(e){var t=void 0===(e=e||{}).space?"\t":e.space,n=this.properties,i=n.calculators;if((e.blacklist=e.blacklist||[]).push("columnProperties"),i){if(e.compact){var r=this.behavior.getColumns();Object.keys(i).forEach(function(e){r.find(function(t){return t.properties.calculator===i[e]})||delete i[e]})}i.toJSON=k}this.headerify=e.headerify;var o=JSON.stringify(n,function(t,r){return this===n&&e.blacklist.indexOf(t)>=0?r=void 0:"calculator"===t&&(r=i?Object.keys(i).find(function(e){return i[e]===r}):r.toString()),r},t);return delete this.headerify,o},getMouseDown:function(){if(this.mouseDown.length)return this.mouseDown[this.mouseDown.length-1]},popMouseDown:function(){var e;return this.mouseDown.length&&(e=this.mouseDown.pop()),e},clearMouseDown:function(){this.mouseDown=[new i(-1,-1)],this.dragExtent=null},setMouseDown:function(e){this.mouseDown.push(e)},getDragExtent:function(){return this.dragExtent},setDragExtent:function(e){this.dragExtent=e},gridRenderedNotification:function(){this.cellEditor&&this.cellEditor.gridRenderedNotification(),this.checkColumnAutosizing()&&this.paintNow(),this.fireSyntheticGridRenderedEvent()},tickNotification:function(){this.fireSyntheticTickEvent()},checkColumnAutosizing:function(){var e=this.behavior.checkColumnAutosizing(!1);return e&&this.behaviorShapeChanged(),e},checkClipboardCopy:function(e){if(this.hasFocus()){e.preventDefault();var t=this.getSelectionAsTSV();e.clipboardData.setData("text/plain",t)}},hasFocus:function(){return this.canvas.hasFocus()},setBehavior:function(e){var t=e&&e.Behavior||g;this.behavior=new t(this,e),this.initScrollbars(),this.refreshProperties(),this.behavior.reindex()},getColumnCount:function(){return this.behavior.getActiveColumnCount()},getRowCount:function(){return this.behavior.getRowCount()},getRow:function(e){return this.behavior.getRow(e)},getValue:function(e,t,n){return this.behavior.getValue(e,t,n)},setValue:function(e,t,n,i){this.behavior.setValue(e,t,n,i)},setData:function(e,t){this.behavior||this.setBehavior(t),this.behavior.setData(e,t),this.setInfo(e.length?"":this.properties.noDataMessage),this.behavior.shapeChanged()},setInfo:function(e){this.renderer.setInfo(e)},reindex:function(){x.call(this)?this.needsReindex=!0:this.behavior.reindex(),this.behaviorShapeChanged()},behaviorChanged:function(){this.divCanvas&&(this.numColumns!==this.getColumnCount()||this.numRows!==this.getRowCount()?(this.numColumns=this.getColumnCount(),this.numRows=this.getRowCount(),this.behaviorShapeChanged()):this.behaviorStateChanged())},behaviorShapeChanged:function(){x.call(this)?(this.needsShapeChanged=!0,this.canvas.requestRepaint()):this.divCanvas&&(this.synchronizeScrollingBoundaries(),this.repaint())},behaviorStateChanged:function(){x.call(this)?(this.needsStateChanged=!0,this.canvas.requestRepaint()):this.divCanvas&&(this.computeCellsBounds(),this.repaint())},deferredBehaviorChange:function(){this.needsReindex&&(this.behavior.reindex(),this.needsReindex=!1),this.needsShapeChanged?this.divCanvas&&this.synchronizeScrollingBoundaries():this.needsStateChanged&&this.divCanvas&&this.computeCellsBounds(),this.needsShapeChanged=this.needsStateChanged=!1},getBounds:function(){return this.renderer.getBounds()},repaint:function(){var e=this.canvas;e&&(this.properties.repaintImmediately?this.paintNow():e.repaint())},paintNow:function(){this.behavior.columnsCreated&&this.canvas.paintNow()},setContainer:function(e){this.initContainer(e),this.initRenderer()},initContainer:function(e){"string"==typeof e&&(e=document.querySelector(e)),e.style.position||(e.style.position=null),e.clientHeight<1&&(e.style.height=null),s("grid"),e.oncontextmenu=function(e){return e.stopPropagation(),e.preventDefault(),!1},e.removeAttribute("tabindex"),e.classList.add("hypergrid-container"),e.id=e.id||"hypergrid"+(document.querySelectorAll(".hypergrid-container").length-1||""),this.div=e},initCanvas:function(e){if(!this.divCanvas){var t=document.createElement("div");S(t,e&&e.margin,b),this.div.appendChild(t);var n=new c(t,this.renderer,e&&e.contextAttributes);n.canvas.classList.add("hypergrid"),this.divCanvas=t,this.canvas=n,this.delegateCanvasEvents()}},convertViewPointToDataPoint:function(e){return this.behavior.convertViewPointToDataPoint(e)},convertDataPointToViewPoint:function(e){return this.behavior.convertDataPointToViewPoint(e)},beCursor:function(e){e?Array.isArray(e)||(e=[e]):e=["default"],e.forEach(function(e){this.cursor=e},this.div.style)},stopEditing:function(){return!this.cellEditor||this.cellEditor.stopEditing()},cancelEditing:function(){return!this.cellEditor||this.cellEditor.cancelEditing()},abortEditing:function(){return!this.cellEditor||(this.cellEditor.abortEditing?this.cellEditor.abortEditing():this.cellEditor.stopEditing())},getDataBounds:function(){var e=this.canvas.bounds;return new r(0,0,e.origin.x+e.extent.x,e.origin.y+e.extent.y)},editAt:function(e){var t;return this.abortEditing(),e.isDataColumn&&e.properties[e.isDataRow?"editable":"filterable"]&&(t=this.getCellEditorAt(e))&&t.beginEditing(),t},isColumnVisible:function(e){return this.renderer.isColumnVisible(e)},isDataRowVisible:function(e){return this.renderer.isDataRowVisible(e)},isDataVisible:function(e,t){return this.isDataRowVisible(t)&&this.isColumnVisible(e)},insureModelColIsVisible:function(e,t){var n=this.getColumnCount()-1,i=e+Math.sign(t),r=!this.isColumnVisible(i)||e===n;return r&&this.scrollBy(t,0),r},insureModelRowIsVisible:function(e,t){var n=this.getRowCount()-1,i=e+(t>-1?1:0),r=!this.isDataRowVisible(i)||e===n;return r&&this.scrollBy(0,t),r},getGridCellFromMousePoint:function(e){return this.renderer.getGridCellFromMousePoint(e)},getBoundsOfCell:function(e){var t=this.renderer.getBoundsOfCell(e.x,e.y);return new r(t.x,t.y,t.width,t.height)},resized:function(){this.behaviorShapeChanged()},cellClicked:function(e){return this.behavior.cellClicked(e)},windowOpen:function(e,t,n,i){return window.open.apply(window,arguments)},getColumns:function(e,t){var n=this.behavior.getColumns();return n.slice.apply(n,arguments)},getActiveColumns:function(e,t){var n=this.behavior.getActiveColumns();return n.slice.apply(n,arguments)},getHiddenColumns:function(){return this.behavior.getHiddenColumns()},takeFocus:function(){var e=this.cellEditor;this.stopEditing(),e||this.canvas.takeFocus()},editorTakeFocus:function(){if(this.cellEditor)return this.cellEditor.takeFocus()},getVisibleRows:function(){return this.renderer.getVisibleRows()},getVisibleColumns:function(){return this.renderer.getVisibleColumns()},initRenderer:function(){this.renderer=this.renderer||new h(this)},getColumnWidth:function(e){return this.behavior.getColumnWidth(e)},setColumnWidth:function(e,t){this.abortEditing()&&this.behavior.setColumnWidth(e,t)},getFixedColumnsWidth:function(){return this.behavior.getFixedColumnsWidth()},getRowHeight:function(e,t){return this.behavior.getRowHeight(e,t)},setRowHeight:function(e,t,n){this.abortEditing()&&this.behavior.setRowHeight(e,t,n)},getFixedRowsHeight:function(){return this.behavior.getFixedRowsHeight()},getFixedColumnCount:function(){return this.behavior.getFixedColumnCount()},getFixedRowCount:function(){return this.behavior.getFixedRowCount()},topLeftClicked:function(e){this.behavior.topLeftClicked(this,e)},rowHeaderClicked:function(e){this.behavior.rowHeaderClicked(this,e)},columnHeaderClicked:function(e){this.behavior.columnHeaderClicked(this,e)},onEditorActivate:function(e){return this.editAt(e)},getCellEditorAt:function(e){return this.behavior.getCellEditorAt(e)},toggleHiDPI:function(){this.properties.useHiDPI?this.removeAttribute("hidpi"):this.setAttribute("hidpi",null),this.canvas.resize()},getHiDPI:function(e){if(window.devicePixelRatio&&this.properties.useHiDPI)var t=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);else t=1;return t},getRenderedWidth:function(e){return this.renderer.getRenderedWidth(e)},getRenderedHeight:function(e){return this.renderer.getRenderedHeight(e)},updateCursor:function(){var e=this.behavior.getCursorAt(-1,-1),t=this.hoverCell;if(t&&t.x>-1&&t.y>-1){var n=t.x+this.getHScrollValue();e=this.behavior.getCursorAt(n,t.y+this.getVScrollValue())}this.beCursor(e)},repaintCell:function(e,t){this.renderer.repaintCell(e,t)},isDraggingColumn:function(){return!!this.renderOverridesCache.dragger},getRenderedData:function(){return this.renderer.getVisibleCellMatrix()},autosizeColumn:function(e){(e>=-2?this.behavior.getActiveColumn(e):e).checkColumnAutosizing(!0),this.computeCellsBounds()},setFocusable:function(e){this.canvas.setFocusable(e)},getVisibleColumnsCount:function(){return this.renderer.getVisibleColumnsCount()},getVisibleRowsCount:function(){return this.renderer.getVisibleRowsCount()},updateSize:function(){this.canvas.checksize()},stopPaintThread:function(){this.canvas.stopPaintThread()},stopResizeThread:function(){this.canvas.stopResizeThread()},restartResizeThread:function(){this.canvas.restartResizeThread()},restartPaintThread:function(){this.canvas.restartPaintThread()},swapColumns:function(e,t){this.behavior.swapColumns(e,t)},endDragColumnNotification:function(){this.behavior.endDragColumnNotification()},getFixedColumnsMaxWidth:function(){return this.behavior.getFixedColumnsMaxWidth()},isMouseDownInHeaderArea:function(){var e=this.getHeaderRowCount(),t=this.getMouseDown();return t.x<0||t.y<e},getColumnProperties:function(e){return this.behavior.getColumnProperties(e)},setColumnProperties:function(e,t){this.behavior.setColumnProperties(e,t)},clearAllCellProperties:function(e){this.behavior.clearAllCellProperties(e),this.renderer.resetAllCellPropertiesCaches()},isGridRow:function(e){return new this.behavior.CellEvent(0,e).isDataRow},getHeaderRowCount:function(){return this.behavior.getHeaderRowCount()},getFooterRowCount:function(){return this.behavior.getFooterRowCount()},getLogicalRowCount:function(){return this.behavior.getLogicalRowCount()},hasTreeColumn:function(){return this.behavior.hasTreeColumn()},lookupFeature:function(e){return this.behavior.lookupFeature(e)},newPoint:function(e,t){return new i(e,t)},newRectangle:function(e,t,n,i){return new r(e,t,n,i)},get charMap(){return this.behavior.charMap},decorateColumnArray:function(e){if(!this.columnArrayDecorations){var t=this;this.columnArrayDecorations={findWithNeg:{value:function(e,n){for(var i=t.behavior.leftMostColIndex;i<0;i++)if(this[i]&&e.call(n,this[i],i,this))return this[i];return this.find(e,n)}},forEachWithNeg:{value:function(e,n){for(var i=t.behavior.leftMostColIndex;i<0;i++)this[i]&&e.call(n,this[i],i,this);return this.forEach(e,n)}}}}return Object.defineProperties(e||[],this.columnArrayDecorations)}});function x(){return!this.properties.repaintImmediately&&this.canvas.paintLoopRunning()}function S(e,t,n){if(t){var i=e.style;n.forEach(function(e){void 0!==t[e]&&(i[e]=t[e])})}}function k(){var e=this;return Object.keys(this).reduce(function(t,n){return"toJSON"!==n&&(t[n]=/^function /.test(n)?null:e[n].toString().replace(/^function anonymous\(/,"function(").replace("\n/*``*/)",")")),t},{})}function _(e,t){if(!_.warned[e]){var n=e.match(/\w+$/)[0];console.warn("Reference to "+n+" external module using `Hypergrid."+n+".` has been deprecated as of v3.0.0 in favor of `require('"+e+"')` from within a Hypergrid Client Module (otherwise use `Hypergrid.require(...)`) and will be removed in a future release. See https://github.com/fin-hypergrid/core/wiki/Client-Modules#internal-modules."),_.warned[e]=!0}return t}C.plugins={},C.localization={locale:"en-US",numberOptions:{maximumFractionDigits:0}},C.mixIn=C.prototype.mixIn,C.mixIn(n(36).sharedMixin),C.prototype.mixIn(n(36).mixin),C.prototype.mixIn(n(105).mixin),C.prototype.mixIn(n(106).mixin),C.prototype.mixIn(n(108).mixin),C.prototype.mixIn(n(109).mixin),_.warned={},Object.defineProperties(C,{Base:{get:function(){return _("fin-hypergrid/src/Base",n(4))}},images:{get:function(){return _("fin-hypergrid/images",n(9))}}}),C.grids=[],C.defaults=C.properties=l,C.modules=y,e.exports=C},function(e,t,n){"use strict";function i(e,t){switch(arguments.length){case 0:t={};break;case 1:switch(typeof e){case"object":t=e,e=void 0;break;case"string":t={};break;default:throw"Single-parameter overload must be either string or object."}break;case 2:if("string"!=typeof e||"object"!=typeof t)throw"Two-parameter overload must be string, object.";break;default:throw"Too many parameters"}function n(){this.preInitialize&&this.preInitialize.apply(this,arguments),function(){var e=this,t=arguments;!function n(i){var r=Object.getPrototypeOf(i);r.constructor!==Object&&(n(r),r.hasOwnProperty("initialize")&&r.initialize.apply(e,t))}(e)}.apply(this,arguments),this.postInitialize&&this.postInitialize.apply(this,arguments)}n.extend=i,n.getClassName=o,n.parent=s;var r,a,l=n.prototype=Object.create(this.prototype);for(r in l.constructor=n,(e=e||l.$$CLASS_NAME||l.name)&&(Object.defineProperty(n,"name",{value:e,configurable:!0}),l.$$CLASS_NAME=e),t)(a=Object.getOwnPropertyDescriptor(t,r))&&Object.defineProperty(l,r,a);return"function"==typeof this.postExtend&&this.postExtend(l),n}function r(){}function o(){return this.prototype.$$CLASS_NAME||this.prototype.name||this.name}function s(e){var t=this.prototype;if(t)do{t=Object.getPrototypeOf(t)}while(e&&t&&t.constructor.name!==e);return t&&t.constructor}r.prototype={constructor:r.prototype.constructor,getClassName:function(){return this.$$CLASS_NAME||this.name||this.constructor.name},get super(){return Object.getPrototypeOf(Object.getPrototypeOf(this))},superMember:function(e){var t=this.super;do{t=Object.getPrototypeOf(t)}while(!t.hasOwnProperty(e));return t&&t[e]},superMethod:function(e){var t=this.superMember(e);if("function"!=typeof t)throw new TypeError("this."+e+" is not a function");return t},callSuperMethod:function(e){return this.superMethod(e).apply(this,Array.prototype.slice.call(arguments,1))}},r.extend=i,i.Base=r,e.exports=i},function(e,t,n){"use strict";var i=n(22).version,r=n(6),o={COLUMNS:1,STRIPES:2,ROWS:3,CELLS:4},s={DEFAULT:[o.COLUMNS,o.STRIPES,o.ROWS,o.CELLS],NO_ROWS:[o.COLUMNS,o.CELLS]},a={themeName:"default",noDataMessage:"",wheelHFactor:.01,wheelVFactor:.05,subgrids:["HeaderSubgrid","data"],font:"13px Tahoma, Geneva, sans-serif",color:"rgb(25, 25, 25)",backgroundColor:"rgb(241, 241, 241)",foregroundSelectionFont:"bold 13px Tahoma, Geneva, sans-serif",foregroundSelectionColor:"rgb(0, 0, 128)",backgroundSelectionColor:"rgba(147, 185, 255, 0.625)",columnHeaderFont:"12px Tahoma, Geneva, sans-serif",columnHeaderColor:"rgb(25, 25, 25)",columnHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",columnHeaderBackgroundColor:"rgb(223, 227, 232)",columnHeaderForegroundSelectionColor:"rgb(80, 80, 80)",columnHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",columnHeaderHalign:"center",columnHeaderRenderer:"SimpleCell",columnHeaderFormat:"header",rowHeaderFont:"12px Tahoma, Geneva, sans-serif",rowHeaderColor:"rgb(25, 25, 25)",rowHeaderBackgroundColor:"rgb(223, 227, 232)",rowHeaderForegroundSelectionColor:"rgb(80, 80, 80)",rowHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",rowHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",backgroundColor2:"rgb(201, 201, 201)",treeHeaderFont:"12px Tahoma, Geneva, sans-serif",treeHeaderColor:"rgb(25, 25, 25)",treeHeaderBackgroundColor:"rgb(223, 227, 232)",treeHeaderForegroundSelectionColor:"rgb(80, 80, 80)",treeHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",treeHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",filterFont:"12px Tahoma, Geneva, sans-serif",filterColor:"rgb(25, 25, 25)",filterBackgroundColor:"white",filterForegroundSelectionColor:"rgb(25, 25, 25)",filterBackgroundSelectionColor:"rgb(255, 220, 97)",filterHalign:"center",filterRenderer:"SimpleCell",filterEditor:"TextField",filterable:!0,showFilterRow:!1,voffset:0,scrollbarHoverOver:"visible",scrollbarHoverOff:"hidden",scrollingEnabled:!0,vScrollbarClassPrefix:"",hScrollbarClassPrefix:"",halign:"center",cellPadding:5,iconPadding:3,leftIcon:void 0,centerIcon:void 0,rightIcon:void 0,renderFalsy:!1,headerify:"toTitle",gridLinesH:!0,gridLinesHWidth:1,gridLinesHColor:"rgb(199, 199, 199)",gridLinesV:!0,gridLinesVWidth:1,gridLinesVColor:"rgb(199, 199, 199)",gridLinesColumnHeader:!0,gridLinesRowHeader:!0,gridLinesUserDataArea:!0,gridBorder:!1,gridBorderLeft:!1,gridBorderRight:!1,gridBorderTop:!1,gridBorderBottom:!1,fixedLinesHWidth:2,fixedLinesHEdge:void 0,fixedLinesHColor:"rgb(164,164,164)",fixedLinesVWidth:2,fixedLinesVEdge:void 0,fixedLinesVColor:"rgb(164,164,164)",boxSizing:i>2?"content-box":"border-box",defaultRowHeight:i>2?14:15,defaultColumnWidth:100,minimumColumnWidth:5,resizeColumnInPlace:!1,repaintIntervalRate:60,repaintImmediately:!1,useBitBlit:!1,useHiDPI:!0,navKeyMap:{RETURN:"DOWN",RETURNSHIFT:"UP",TAB:"RIGHT",TABSHIFT:"LEFT"},feedbackCount:3,feedbackEffect:"shaker",readOnly:!1,fixedColumnCount:0,fixedRowCount:0,rowHeaderNumbers:!0,rowHeaderCheckboxes:!0,showTreeColumn:!0,treeRenderer:"SimpleCell",showHeaderRow:!0,cellSelection:!0,columnSelection:!0,rowSelection:!0,singleRowSelectionMode:!0,selectionRegionOverlayColor:"transparent",selectionRegionOutlineColor:"rgb(69, 69, 69)",columnAutosizing:!0,rowNumberAutosizing:!0,treeColumnAutosizing:!0,columnAutosizingMax:400,treeColumnAutosizingMax:400,headerTextWrapping:!1,rowResize:!1,editable:!0,editOnDoubleClick:!0,editOnKeydown:!0,editOnNextCell:!1,unsortable:!1,sortOnDoubleClick:!0,maxSortColumns:3,sortOnHiddenColumns:!0,checkboxOnlyRowSelections:!1,autoSelectRows:!1,autoSelectColumns:!1,collapseCellSelections:!1,format:void 0,editor:void 0,renderer:"SimpleCell",gridRenderer:"by-columns-and-rows",hoverCellHighlight:{enabled:!0,backgroundColor:"rgba(160, 160, 40, 0.45)"},hoverRowHighlight:{enabled:!0,backgroundColor:"rgba(100, 100, 25, 0.30)"},hoverColumnHighlight:{enabled:!0,backgroundColor:"rgba(60, 60, 15, 0.15)"},link:!1,linkTarget:"_blank",linkOnHover:!1,linkColor:"blue",linkVisitedColor:"purple",linkColorOnHover:!1,strikeThrough:!1,multipleSelections:!1,enableContinuousRepaint:!1,columnsReorderable:!0,columnGrabMargin:5,columnClip:!0,rowStripes:void 0,propClassLayers:s.DEFAULT,features:["filters","cellselection","keypaging","columnresizing","rowselection","columnselection","columnmoving","columnsorting","cellclick","cellediting","onhover"],restoreRowSelections:!0,restoreColumnSelections:!0,truncateTextWithEllipsis:!0},l={};function u(){l.rowProperties||(l.rowProperties=!0,console.warn("The `rowProperties` property has been deprecated as of v2.1.0 in favor of `rowStripes`. (Will be removed in a future release.)"))}function c(){throw new r("Attempt to set/get column-only property on a non-column properties object.")}Object.defineProperties(a,{rowProperties:{get:function(){return u(),this.rowStripes},set:function(e){u(),this.rowStripes=e}}}),["name","type","header","calculator"].forEach(function(e){Object.defineProperty(a,e,{set:c})}),Object.defineProperties(a,{mixIn:{value:n(8).mixIn},delete:{value:function(e){var t=Object.getOwnPropertyDescriptor(this,e);return!!t&&(t.get?!t.get.toString().indexOf(".var.")||(this.var[e]=Object.getPrototypeOf(this)[e],this.grid.repaint(),!1):delete this[e])}},propClassEnum:{value:o},propClassLayersMap:{value:s},navKey:{value:function(e,t){var n;return(e.length>1||!this.editOnKeydown||t)&&(n=e),n}},mappedNavKey:{value:function(e,t){return(e=this.navKeyMap[e])&&this.navKey(e)}},reapplyCellProperties:{set:function(e){l.reapplyCellProperties||(console.warn("The `.reapplyCellProperties` property has been deprecated as of v2.1.3 in favor of using the new `.propClassLayers` property. (May be removed in a future release.) This property is now a setter which sets `.propClassLayers` to `.propClassLayersMap.DEFAULT` (grid ← columns ← stripes ← rows ← cells) on truthy or `propClassLayersMap.NO_ROWS` (grid ← columns ← cells) on falsy, which is what you will see on properties stringification. This will give the same effect in most cases as the former property implementation, but not in all cases due to it no longer being applied dynamically. Developers should discontinue use of this property and start specifying `.propClassLayers` instead."),l.reapplyCellProperties=!0),this.propClassLayers=e?s.NO_ROWS:s.DEFAULT}},exec:{value:function(e){if(this.dataRow){var t="f"===(typeof e)[0]&&e||this.calculator;t&&(e=t(this.dataRow,this.name,this.subrow))}return e}}}),e.exports=a},function(e,t,n){"use strict";e.exports=function(e){var t,n,i,r=this.grid.properties,o=this.visibleRows,s=o.length;if(e){i=this.cellEventPool;var a=0;this.visibleColumns.forEachWithNeg(function(e){for(n=0;n<s;n++,a++)t=o[n],i[a].reset(e,t)})}var l,u,c=[],h=r.backgroundColor;this.visibleColumns.forEachWithNeg(function(e){u=e.column.properties.backgroundColor,l&&l.backgroundColor===u?l.right=e.right:u===h?l=void 0:(l={backgroundColor:u,left:e.left,right:e.right},c.push(l))}),this.columnBundles=c}},function(e,t,n){"use strict";var i=n(4).extend({initialize:function(e,t,n){"object"==typeof t&&(n=t,t=e),this.locale=t,n&&("function"==typeof n.invalid&&(this.invalid=n.invalid),n.expectation&&(this.expectation=n.expectation))}});window.Intl||(window.Intl={NumberFormat:function(e,t){this.format=function(e){var n=e.toString();if(!t||void 0===t.useGrouping||t.useGrouping){var i=n.indexOf(".");for(i<0&&(i=n.length);(i-=3)>0&&"0123456789".indexOf(n[i-1])>=0;)n=n.substr(0,i)+","+n.substr(i)}return n}},DateTimeFormat:function(e,t){this.format=function(e){return null!=e?("object"!=typeof e&&(e=new Date(e)),e=e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()):e=null,e}}});var r=i.extend("NumberFormatter",{initialize:function(e,t,n){"object"==typeof t&&(n=t),n=n||{},this.format=new Intl.NumberFormat(this.locale,n).format;var i=new Intl.NumberFormat(this.locale,{useGrouping:!1}).format;this.demapper=function(e){var t=this.map.indexOf(e)%11;return t<0?"":t<10?t:"."}.bind(this),this.map=i(10123456789.5).substr(1,11),n.acceptStandardDigits&&"0123456789."!==this.map&&(this.map+="0123456789."),this.invalids=new RegExp("[^"+this.format(11111).replace(this.map[1],"")+this.map+"]")},invalid:function(e){return this.invalids.test(e)},expectation:"Expected a number with optional commas (thousands grouping separator), optional decimal point, and an optional fractional part.\nComma separators are part of the format and will always be displayed for values >= 1000.\nEdited values are always saved in their entirety even though the formatted value is rounded to the specified number of decimal places.",parse:function(e){var t=Number(e.split("").map(this.demapper).join(""));if(isNaN(t))throw"Invalid Number";return t}});var o=i.extend("DateFormatter",{initialize:function(e,t,n){"object"==typeof t&&(n=t),n=n||{},this.format=new Intl.DateTimeFormat(this.locale,n).format;var i=new Intl.NumberFormat(this.locale,{useGrouping:!1,style:"decimal"}).format,r=this.localizedDigits=i(10123456789).substr(1,10);this.digitFormatter=function(e){return this.localizedDigits[e]}.bind(this),this.digitParser=function(e){var t=this.localizedDigits.indexOf(e);t<0&&(t="");return t}.bind(this);var o=this.transformNumber(this.digitFormatter,1987),s=this.transformNumber(this.digitFormatter,12),a=this.transformNumber(this.digitFormatter,30),l=new Date(1987,11,30),u=(0,new Intl.DateTimeFormat(this.locale).format)(l),c=new Intl.NumberFormat(this.locale).format(456),h=this.localizedNumberPattern=new RegExp("["+r+"]+","g"),d=u.match(h);this.partsMap={yy:d.indexOf(o),mm:d.indexOf(s),dd:d.indexOf(a)},n.acceptStandardDigits&&(c+="1234567890"),this.invalids=new RegExp("[^"+u.replace(/-/g,"\\-")+c+"]")},invalid:function(e){return this.invalids.test(e)},parse:function(e){var t=e.match(this.localizedNumberPattern);if(!t||3!==t.length)throw"Invalid Date";var n=this.transformNumber(this.digitParser,t[this.partsMap.yy]),i=this.transformNumber(this.digitParser,t[this.partsMap.mm])-1,r=this.transformNumber(this.digitParser,t[this.partsMap.dd]);return new Date(n,i,r)},transformNumber:function(e,t){return t.toString().split("").map(e).join("")}});function s(e,t,n){this.locale=e,this.int=this.float=this.construct("number",r,t),this.construct("date",o,n)}s.prototype={constructor:s.prototype.constructor,$$CLASS_NAME:"Localization",construct:function(e,t,n){var i=e[0].toUpperCase()+e.substr(1).toLowerCase()+"Formatter",r=t.bind(null,this.locale),o=new r(n);return this[i]=r,this.add(e,o)},add:function(e,t){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t||"function"!=typeof t.format||"function"!=typeof t.parse||t.invalid&&"function"!=typeof t.invalid||t.expectation&&"string"!=typeof t.expectation)throw"Expected localizer object to conform to interface.";return this[e=(e=e||t.name)&&e.toLowerCase()]=t,t},get:function(e){return this[e&&e.toLowerCase()]||this.string},chromeDate:{format:function(e){if(null!=e){"object"!=typeof e&&(e=new Date(e));var t=e.getFullYear(),n=e.getMonth()+1,i=n<10?"0"+n:n,r=e.getDate();e=t+"-"+i+"-"+(r<10?"0"+r:r)}else e=null;return e},parse:function(e){var t=e.split("-");return t&&3===t.length?new Date(t[0],t[1]-1,t[2]):null}},null:{format:function(e){return e},parse:function(e){return e}},string:{format:function(e){return e+""},parse:function(e){return e+""}}},e.exports=s},function(e,t,n){"use strict";e.exports=function(e,t){Object.keys(t).forEach(function(n){for(var i,r=e;r&&!(i=Object.getOwnPropertyDescriptor(r,n));r=Object.getPrototypeOf(r));void 0!==t[n]?(!i||i.writable||i.set)&&(e[n]=t[n]):i&&(!i.configurable||i.set||i.get?(i.writable||i.set)&&(e[n]=void 0):delete e[n])})}},function(e,t,n){"use strict";var i=/([^_A-Z])([A-Z]+)/g,r=/[^a-z0-9]+/gi,o=/[^a-z0-9]+([a-z0-9])?/gi;function s(e,t){return void 0===t?"":t.toUpperCase()}var a=/^(\d)/,l=/^([A-Z])/;function u(e,t){return t.toLowerCase()}var c=/[a-z]/,h=/[\s\-_]*([^\s\-_])([^\s\-_]+)/g,d=function(e,t,n){return t.toUpperCase()+n},f=/[A-Z]+/g,p=/([A-Z]+)([A-Z][a-z])/g;e.exports={verbatim:function(e){return e+""},toCamelCase:function(e){return e.replace(o,s).replace(a,"$$$1").replace(l,u)},toAllCaps:function(e){return e.replace(r,"_").replace(i,"$1_$2").replace(a,"$$$1").toUpperCase()},toTitle:function(e){return(c.test(e)?e:e.toLowerCase()).replace(h,d).replace(f," $&").replace(p,"$1 $2").trim()}}},function(e,t,n){"use strict";var i=["gridCell","dataCell","mousePoint","keys","row"];e.exports=function(e,t,n,r){var o;if(this.canvas)return"boolean"!=typeof t&&(r=n,n=t,t=!1),n?n instanceof CustomEvent&&(n=Object({},n)):n={},n.type||(n.type=e),n.detail||(n={detail:n}),(o=n.detail).grid||(o.grid=this),o.time=Date.now(),r&&(o.primitiveEvent||(o.primitiveEvent=r),i.forEach(function(e){e in r&&!(e in o)&&(o[e]=r[e])}),"dataRow"in r&&Object.defineProperty(o,"row",{get:function(){return r.dataRow}})),n.cancelable=t,this.canvas.dispatchEvent(new CustomEvent(e,n))}},function(e,t,n){(function(t,i){
/* Inspire Tree
 * @version 5.0.1
 * https://github.com/helion3/inspire-tree
 * @copyright Copyright 2015 Helion3, and other contributors
 * @license Licensed under MIT
 *          see https://github.com/helion3/inspire-tree/blob/master/LICENSE
 */
!function(t,i){e.exports=i(n(38))}(0,function(e){"use strict";var n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function r(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function o(e,t){return e(t={exports:{}},t.exports),t.exports}for(var s=o(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}}),a=[],l=0;l<256;++l)a[l]=(l+256).toString(16).substr(1);var u=function(e,t){var n=t||0,i=a;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]};var c=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||u(r)};function h(t,n,i,r,o){return r.state(t)!==n&&(r._tree.batch(),r._tree.config.nodes.resetStateOnRestore&&"restored"===i&&function(t){e.each(t._tree.defaultState,function(e,n){t.state(n,e)})}(r),n&&"checked"===t&&r.state("indeterminate",!1),r.state(t,n),r._tree.emit("node."+i,r,!1),o&&r.hasChildren()&&r.children.recurseDown(function(e){h(t,n,i,e)}),r.markDirty(),r._tree.end()),r}var d=o(function(e,t){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
e.exports=function(){function e(e){return"function"==typeof e}var t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,s=void 0,a=void 0,l=function(e,t){g[o]=e,g[o+1]=t,2===(o+=2)&&(a?a(v):m())},u="undefined"!=typeof window?window:void 0,c=u||{},h=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==i&&"[object process]"==={}.toString.call(i),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(v,1)}}var g=new Array(1e3);function v(){for(var e=0;e<o;e+=2){var t=g[e],n=g[e+1];t(n),g[e]=void 0,g[e+1]=void 0}o=0}var m=void 0;function y(e,t){var n=this,i=new this.constructor(C);void 0===i[w]&&N(i);var r=n._state;if(r){var o=arguments[r-1];l(function(){return F(r,i,o,n._result)})}else O(n,i,e,t);return i}function b(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return A(t,e),t}m=d?function(){return i.nextTick(v)}:h?function(){var e=0,t=new h(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():f?function(){var e=new MessageChannel;return e.port1.onmessage=v,function(){return e.port2.postMessage(0)}}():void 0===u?function(){try{var e=r,t=e("vertx");return void 0!==(s=t.runOnLoop||t.runOnContext)?function(){s(v)}:p()}catch(e){return p()}}():p();var w=Math.random().toString(36).substring(16);function C(){}var x=void 0,S=1,k=2,_=new L;function D(e){try{return e.then}catch(e){return _.error=e,_}}function E(t,n,i){n.constructor===t.constructor&&i===y&&n.constructor.resolve===b?function(e,t){t._state===S?R(e,t._result):t._state===k?P(e,t._result):O(t,void 0,function(t){return A(e,t)},function(t){return P(e,t)})}(t,n):i===_?(P(t,_.error),_.error=null):void 0===i?R(t,n):e(i)?function(e,t,n){l(function(e){var i=!1,r=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,function(n){i||(i=!0,t!==n?A(e,n):R(e,n))},function(t){i||(i=!0,P(e,t))},e._label);!i&&r&&(i=!0,P(e,r))},e)}(t,n,i):R(t,n)}function A(e,t){e===t?P(e,new TypeError("You cannot resolve a promise with itself")):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?E(e,t,D(t)):R(e,t)}function M(e){e._onerror&&e._onerror(e._result),T(e)}function R(e,t){e._state===x&&(e._result=t,e._state=S,0!==e._subscribers.length&&l(T,e))}function P(e,t){e._state===x&&(e._state=k,e._result=t,l(M,e))}function O(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+S]=n,r[o+k]=i,0===o&&e._state&&l(T,e)}function T(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?F(n,i,r,o):r(o);e._subscribers.length=0}}function L(){this.error=null}var I=new L;function F(t,n,i,r){var o=e(i),s=void 0,a=void 0,l=void 0,u=void 0;if(o){if((s=function(e,t){try{return e(t)}catch(e){return I.error=e,I}}(i,r))===I?(u=!0,a=s.error,s.error=null):l=!0,n===s)return void P(n,new TypeError("A promises callback cannot return that same promise."))}else s=r,l=!0;n._state!==x||(o&&l?A(n,s):u?P(n,a):t===S?R(n,s):t===k&&P(n,s))}var H=0;function N(e){e[w]=H++,e._state=void 0,e._result=void 0,e._subscribers=[]}var j=function(){function e(e,n){this._instanceConstructor=e,this.promise=new e(C),this.promise[w]||N(this.promise),t(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&R(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===b){var r=D(e);if(r===y&&e._state!==x)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===B){var o=new n(C);E(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===x&&(this._remaining--,e===k?P(i,n):this._result[t]=n),0===this._remaining&&R(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,function(e){return n._settledAt(S,t,e)},function(e){return n._settledAt(k,t,e)})},e}(),B=function(){function e(t){this[w]=H++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){A(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return B.prototype.then=y,B.all=function(e){return new j(this,e).promise},B.race=function(e){var n=this;return t(e)?new n(function(t,i){for(var r=e.length,o=0;o<r;o++)n.resolve(e[o]).then(t,i)}):new n(function(e,t){return t(new TypeError("You must pass an array to race."))})},B.resolve=b,B.reject=function(e){var t=new this(C);return P(t,e),t},B._setScheduler=function(e){a=e},B._setAsap=function(e){l=e},B._asap=l,B.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=B},B.Promise=B,B}()}).Promise,f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};function m(e,t){if(t)return this.extract(e);var n=b(e);return this.flatten(function(t){return("removed"===e||!t.removed())&&n(t)})}function y(t,n,i,r){return n=e.castArray(n),t._tree.batch(),t[r?"recurseDown":"each"](function(t){e.each(n,function(n){e.isFunction(t[n])&&t[n].apply(t,i)})}),t._tree.end(),t}function b(t){var n=t;return e.isString(t)&&(n=function(n){return e.isFunction(n[t])?n[t]():n[t]}),n}var w=function(t){function n(t,i){f(this,n);var r=v(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(e.isFunction(e.get(t,"isTree"))&&!t.isTree(t))throw new TypeError("Invalid tree instance.");return r._tree=t,r.length=0,r._pagination={limit:t.config.pagination.limit,total:0},(e.isArray(i)||i instanceof n)&&e.each(i,function(e){e instanceof k?r.push(e.clone()):r.addNode(e)}),r}return g(n,t),p(n,[{key:"addNode",value:function(t){var n=this.length;return this._tree.config.sort&&(n=e.sortedIndexBy(this,t,this._tree.config.sort)),this.insertAt(n,t)}},{key:"available",value:function(e){return m.call(this,"available",e)}},{key:"blur",value:function(){return this.invoke("blur")}},{key:"blurDeep",value:function(){return this.invokeDeep("blur")}},{key:"checked",value:function(e){return m.call(this,"checked",e)}},{key:"clean",value:function(){return this.invoke("clean")}},{key:"clone",value:function(){return new n(this._tree,this)}},{key:"collapse",value:function(){return this.invoke("collapse")}},{key:"collapsed",value:function(e){return m.call(this,"collapsed",e)}},{key:"collapseDeep",value:function(){return this.invokeDeep("collapse")}},{key:"concat",value:function(t){var i=new n(this._tree);i._context=this._context;var r=function(e){e instanceof k&&i.push(e)};return e.each(this,r),e.each(t,r),i._pagination.limit=this._pagination.limit,i}},{key:"context",value:function(){return this._context||this._tree}},{key:"copy",value:function(t,i){var r=new n(this._tree);return e.each(this,function(e){r.push(e.copy(t,i))}),r}},{key:"deepest",value:function(){var e=new n(this._tree);return this.recurseDown(function(t){t.children||e.push(t)}),e}},{key:"deselect",value:function(){return this.invoke("deselect")}},{key:"deselectDeep",value:function(){return this.invokeDeep("deselect")}},{key:"each",value:function(t){return e.each(this,t),this}},{key:"editable",value:function(e){return m.call(this,"editable",e)}},{key:"editing",value:function(e){return m.call(this,"editing",e)}},{key:"expand",value:function(){return this.invoke("expand")}},{key:"expanded",value:function(e){return m.call(this,"expanded",e)}},{key:"expandDeep",value:function(){var e=this;return new d(function(t){var n=0,i=function(){0==--n&&t(e)};e.recurseDown(function(e){n++,e.children?e.expand().catch(i).then(function(){e.children.expandDeep().catch(i).then(i)}):i()})})}},{key:"expandParents",value:function(){return this.invoke("expandParents")}},{key:"extract",value:function(t){var i=this.flatten(t),r=new n(this._tree);return e.each(i,function(e){return r.addNode(e.copyHierarchy())}),r}},{key:"filterBy",value:function(t){var i=b(t),r=new n(this._tree);return e.each(this,function(e){i(e)&&r.push(e)}),r}},{key:"find",value:function(e){var t=void 0;return this.recurseDown(function(n){if(e(n))return t=n,!1}),t}},{key:"flatten",value:function(e){var t=new n(this._tree),i=b(e);return this.recurseDown(function(e){i(e)&&t.push(e)}),t}},{key:"focused",value:function(e){return m.call(this,"focused",e)}},{key:"forEach",value:function(e){return this.each(e)}},{key:"get",value:function(e){return this[e]}},{key:"hidden",value:function(e){return m.call(this,"hidden",e)}},{key:"hide",value:function(){return this.invoke("hide")}},{key:"hideDeep",value:function(){return this.invokeDeep("hide")}},{key:"indeterminate",value:function(e){return m.call(this,"indeterminate",e)}},{key:"insertAt",value:function(t,i){if(i.id){var r=this.node(i.id);if(r)return r.restore().show(),e.isArrayLike(i.children)?(e.isArrayLike(r.children)||(r.children=new n(this._tree),r.children._context=r),e.each(i.children,function(e){r.children.addNode(e)})):i.children&&e.isBoolean(r.children)&&(r.children=i.children),r.markDirty(),this._tree.applyChanges(),r}var o=this._tree.constructor.isTreeNode(i)?i:_(this._tree,i);return this.splice(t,0,o),this._context&&(o.itree.parent=this._context,this._context.refreshIndeterminateState().markDirty()),this._tree.emit("node.added",o),o.markDirty(),this.length-1!==t&&this.invoke("markDirty"),this._tree.applyChanges(),o}},{key:"invoke",value:function(e,t){return y(this,e,t)}},{key:"invokeDeep",value:function(t,n){return(!e.isArrayLikeObject(n)||arguments.length>2)&&(n=e.tail(arguments)),y(this,t,n,!0)}},{key:"loading",value:function(e){return m.call(this,"loading",e)}},{key:"loadMore",value:function(t){var n=this;if(this._loading)return d.reject(new Error("Pending loadMore call must complete before being invoked again."));var i=void 0;return this._pagination.limit===this._pagination.total?d.resolve():(this._loading=!0,this._tree.batch(),e.invoke(this._context,"markDirty"),this._pagination.limit+=this._tree.config.pagination.limit,this._tree.emit("node.paginated",this._context||this._tree,this.pagination,t),this._tree.config.deferredLoading?i=this._context?this._context.loadChildren():this._tree.load(this._tree.config.data):(this._loading=!1,i=d.resolve()),this._tree.end(),this._tree.config.deferredLoading&&i.then(function(){n._loading=!1,n._tree.applyChanges()}).catch(function(){n._loading=!1,n._tree.applyChanges()}),i)}},{key:"matched",value:function(e){return m.call(this,"matched",e)}},{key:"move",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this._tree.batch();var i=this[e].remove(),r=n.insertAt(t,i);return this._tree.emit("node.moved",r,this,e,n,t),this._tree.end(),r}},{key:"node",value:function(e){var t=void 0;return this.recurseDown(function(n){if(n.id===e)return t=n,!1}),t}},{key:"nodes",value:function(t){var i=void 0;return e.isArray(t)&&(i=new n(this._tree),this.recurseDown(function(e){t.indexOf(e.id)>-1&&i.push(e)})),e.isArray(t)?i:this}},{key:"pagination",value:function(){return this._pagination}},{key:"recurseDown",value:function(e){return C(this,e),this}},{key:"remove",value:function(t){return e.remove(this,{id:t.id}),e.invoke(this._context,"markDirty"),this._tree.applyChanges(),this}},{key:"removed",value:function(e){return m.call(this,"removed",e)}},{key:"restore",value:function(){return this.invoke("restore")}},{key:"restoreDeep",value:function(){return this.invokeDeep("restore")}},{key:"select",value:function(){return this.invoke("select")}},{key:"selectable",value:function(e){return m.call(this,"selectable",e)}},{key:"selectDeep",value:function(){return this.invokeDeep("select")}},{key:"selected",value:function(e){return m.call(this,"selected",e)}},{key:"show",value:function(){return this.invoke("show")}},{key:"showDeep",value:function(){return this.invokeDeep("show")}},{key:"softRemove",value:function(){return this.invoke("softRemove")}},{key:"sortBy",value:function(t){var n=this;if(t=t||this._tree.config.sort){var i=e.sortBy(this,t);this.length=0,e.each(i,function(e){n.push(e)})}return this}},{key:"sortDeep",value:function(e){return this.sort(e),this.each(function(t){t.hasChildren()&&t.children.sortDeep(e)}),this}},{key:"state",value:function(){return this.invoke("state",arguments)}},{key:"stateDeep",value:function(){return this.invokeDeep("state",arguments)}},{key:"swap",value:function(e,t){this._tree.batch();var n=e.context(),i=t.context(),r=n.indexOf(e),o=i.indexOf(t);return n===i?(this[r]=t,this[o]=e,this._tree.emit("node.moved",e,n,r,i,o),this._tree.emit("node.moved",t,i,o,n,r)):(n.move(r,i.indexOf(t),i),i.move(i.indexOf(t),r,n)),this._tree.end(),this._tree.emit("node.swapped",e,n,r,t,i,o),this}},{key:"tree",value:function(){return this._tree}},{key:"toArray",value:function(){var t=[];return e.each(this,function(e){t.push(e.toObject())}),t}},{key:"visible",value:function(e){return m.call(this,"visible",e)}}]),n}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));function C(t,n){var i=void 0;return t instanceof w?e.each(t,function(e){return i=C(e,n)}):t instanceof k&&!1!==(i=n(t))&&t.hasChildren()&&(i=C(t.children,n)),i}function x(t){return new d(function(n,i){if(!e.isObject(t))return i(new Error("Invalid Promise"));e.isFunction(t.then)&&t.then(n),e.isFunction(t.error)?t.error(i):e.isFunction(t.catch)&&t.catch(i)})}function S(e,t,n){var i=e.itree.state[t];return void 0!==n&&i!==n&&(e.itree.state[t]=n,"rendered"!==t&&e.markDirty(),e._tree.emit("node.state.changed",e,t,i,n)),i}var k=function(){function t(n,i,r){var o=this;f(this,t),this._tree=n,i instanceof t&&((r=e.castArray(r)).push("_tree"),e.each(i,function(t,n){e.includes(r,n)||(e.isObject(t)?o[n]=t instanceof w?t.clone():"itree"===n?function(t,n){var i={};return(n=e.castArray(n)).push("ref"),e.each(t,function(t,r){e.includes(n,r)||(i[r]=e.cloneDeep(t))}),i}(t):e.cloneDeep(t):o[n]=t)}))}return p(t,[{key:"addChild",value:function(t){return!e.isArray(this.children)&&e.isArrayLike(this.children)||(this.children=new w(this._tree),this.children._context=this),this.children.addNode(t)}},{key:"addChildren",value:function(t){var n=this,i=new w(this._tree);return this._tree.batch(),e.each(t,function(e){i.push(n.addChild(e))}),this._tree.end(),i}},{key:"allowDynamicLoad",value:function(){return this._tree.isDynamic&&(e.isArrayLike(this.children)||!0===this.children)}},{key:"assign",value:function(){return e.assign.apply(e,[this].concat(Array.prototype.slice.call(arguments))),this.markDirty(),this._tree.applyChanges(),this}},{key:"available",value:function(){return!this.hidden()&&!this.removed()}},{key:"blur",value:function(){return this.state("editing",!1),h("focused",!1,"blurred",this)}},{key:"check",value:function(e){return this._tree.batch(),h("checked",!0,"checked",this,!e&&this._tree.config.checkbox.autoCheckChildren),this.hasParent()&&this.getParent().refreshIndeterminateState(),this._tree.end(),this}},{key:"checked",value:function(){return this.state("checked")}},{key:"clean",value:function(){return this.recurseUp(function(e){if(e.hasParent()){var t=e.getParent();t.hasVisibleChildren()||t.hide()}}),this}},{key:"clone",value:function(e){return new t(this._tree,this,e)}},{key:"collapse",value:function(){return h("collapsed",!0,"collapsed",this)}},{key:"collapsed",value:function(){return this.state("collapsed")}},{key:"context",value:function(){return this.hasParent()?this.getParent().children:this._tree.model}},{key:"copy",value:function(t,n){if(!t||!e.isFunction(t.addNode))throw new Error("Destination must be an Inspire Tree instance.");var i=this;return n&&(i=i.copyHierarchy()),t.addNode(i.toObject())}},{key:"copyHierarchy",value:function(t){var n=[],i=this.getParents();if(e.each(i,function(e){n.push(e.toObject(t))}),i=n.reverse(),!t){var r=this.toObject(!0);this.hasChildren()&&(r.children=this.children.filterBy(function(e){return!e.state("hidden")}).toArray(),r.children._context=r),n.push(r)}var o=n[0],s=o,a=n.length;return e.each(n,function(e,t){var i=[];t+1<a&&(i.push(n[t+1]),s.children=i,s=s.children[0])}),_(this._tree,o)}},{key:"deselect",value:function(e){this.selected()&&(!this._tree.config.selection.require||this._tree.selected().length>1)&&(this._tree.batch(),h("selected",!1,"deselected",this,!e&&this._tree.config.selection.autoSelectChildren),this._tree.end());return this}},{key:"editable",value:function(){return this._tree.config.editable&&this._tree.config.editing.edit&&this.state("editable")}},{key:"editing",value:function(){return this.state("editing")}},{key:"expand",value:function(){var e=this;return new d(function(t,n){(e.hasChildren()||e._tree.isDynamic&&!0===e.children)&&(e.collapsed()||e.hidden())?(e.state("collapsed",!1),e.state("hidden",!1),e._tree.emit("node.expanded",e),e._tree.isDynamic&&!0===e.children?e.loadChildren().then(t).catch(n):(e._tree.applyChanges(),t(e))):t(e)})}},{key:"expanded",value:function(){return!this.collapsed()}},{key:"expandParents",value:function(){return this.hasParent()&&this.getParent().recurseUp(function(e){e.expand()}),this}},{key:"focus",value:function(){return this.focused()||(this._tree.batch(),this._tree.blurDeep(),this.state("focused",!0),this._tree.emit("node.focused",this),this.markDirty(),this._tree.end()),this}},{key:"focused",value:function(){return this.state("focused")}},{key:"getChildren",value:function(){return this.hasChildren()?this.children:new w(this._tree)}},{key:"getParent",value:function(){return this.itree.parent}},{key:"getParents",value:function(){var e=new w(this._tree);return this.hasParent()&&this.getParent().recurseUp(function(t){e.push(t)}),e}},{key:"getTextualHierarchy",value:function(){var e=[];return this.recurseUp(function(t){e.unshift(t.text)}),e}},{key:"hasAncestor",value:function(e){var t=!1;return this.recurseUp(function(n){return!(t=n.id===e.id)}),t}},{key:"hasChildren",value:function(){return e.isArrayLike(this.children)&&this.children.length>0}},{key:"hasLoadedChildren",value:function(){return e.isArrayLike(this.children)}},{key:"hasOrWillHaveChildren",value:function(){return e.isArrayLike(this.children)?Boolean(this.children.length):this.allowDynamicLoad()}},{key:"hasParent",value:function(){return Boolean(this.itree.parent)}},{key:"hasVisibleChildren",value:function(){var e=!1;return this.hasChildren()&&(e=this.children.filterBy("available").length>0),e}},{key:"hide",value:function(){var e=h("hidden",!0,"hidden",this);return e.hasChildren()&&e.children.hide(),e}},{key:"hidden",value:function(){return this.state("hidden")}},{key:"indexPath",value:function(){var t=[];return this.recurseUp(function(n){t.push(e.indexOf(n.context(),n))}),t.reverse().join(".")}},{key:"indeterminate",value:function(){return this.state("indeterminate")}},{key:"lastDeepestVisibleChild",value:function(){var t=void 0;if(this.hasChildren()&&!this.collapsed()){var n=(t=e.findLast(this.children,function(e){return e.visible()})).lastDeepestVisibleChild();n&&(t=n)}return t}},{key:"loadChildren",value:function(){var t=this;return new d(function(n,i){if(!t.allowDynamicLoad())return i(new Error("Node does not have or support dynamic children."));t.state("loading",!0),t.markDirty(),t._tree.applyChanges();var r=function(r,o){if(!e.isArrayLike(r))return i(new TypeError("Loader requires an array-like `nodes` parameter."));t._tree.batch(),t.state("loading",!1);var s=D(t._tree,r,t);e.isArrayLike(t.children)?t.children=t.children.concat(s):t.children=s,e.parseInt(o)>r.length&&(t.children._pagination.total=e.parseInt(o)),"checkbox"===t._tree.config.selection.mode&&t.selected()&&t.children.select(),t.markDirty(),t._tree.end(),n(t.children),t._tree.emit("children.loaded",t)},o=function(e){t.state("loading",!1),t.children=new w(t._tree),t.children._context=t,t.markDirty(),t._tree.applyChanges(),i(e),t._tree.emit("tree.loaderror",e)},s=t._tree.constructor.isTreeNodes(t.children)?t.children.pagination():null,a=t._tree.config.data(t,r,o,s);e.isObject(a)&&x(a).then(r).catch(o)})}},{key:"loading",value:function(){return this.state("loading")}},{key:"loadMore",value:function(){return this.children&&!0!==this.children?this.children.loadMore():d.reject(new Error("Children have not yet been loaded."))}},{key:"markDirty",value:function(){return this.itree.dirty||(this.itree.dirty=!0,this.hasParent()&&this.getParent().markDirty()),this}},{key:"matched",value:function(){return this.state("matched")}},{key:"nextVisibleAncestralSiblingNode",value:function(){var e=void 0;if(this.hasParent()){var t=this.getParent();(e=t.nextVisibleSiblingNode())||(e=t.nextVisibleAncestralSiblingNode())}return e}},{key:"nextVisibleChildNode",value:function(){var t=void 0;return this.hasChildren()&&(t=e.find(this.children,function(e){return e.visible()})),t}},{key:"nextVisibleNode",value:function(){var e=void 0;return(e=this.nextVisibleChildNode())||(e=this.nextVisibleSiblingNode()),e||(e=this.nextVisibleAncestralSiblingNode()),e}},{key:"nextVisibleSiblingNode",value:function(){var t=this.hasParent()?this.getParent().children:this._tree.nodes(),n=e.findIndex(t,{id:this.id});return e.find(e.slice(t,n+1),function(e){return e.visible()})}},{key:"pagination",value:function(){return e.get(this,"children._pagination")}},{key:"previousVisibleNode",value:function(){var e=void 0;return(e=this.previousVisibleSiblingNode())&&e.hasChildren()&&!e.collapsed()&&(e=e.lastDeepestVisibleChild()),!e&&this.hasParent()&&(e=this.getParent()),e}},{key:"previousVisibleSiblingNode",value:function(){var t=this.hasParent()?this.getParent().children:this._tree.nodes(),n=e.findIndex(t,{id:this.id});return e.findLast(e.slice(t,0,n),function(e){return e.visible()})}},{key:"recurseDown",value:function(e){return C(this,e),this}},{key:"recurseUp",value:function(e){return!1!==e(this)&&this.hasParent()&&this.getParent().recurseUp(e),this}},{key:"refreshIndeterminateState",value:function(){var e=this.indeterminate();if(this.state("indeterminate",!1),this.hasChildren()){var t=this.children.length,n=0,i=0;this.children.each(function(e){e.checked()&&i++,e.indeterminate()&&n++}),i===t?h("checked",!0,"checked",this):h("checked",!1,"unchecked",this),this.checked()||this.state("indeterminate",n>0||t>0&&i>0&&i<t)}return this.hasParent()&&this.getParent().refreshIndeterminateState(),e!==this.state("indeterminate")&&this.markDirty(),this}},{key:"reload",value:function(){var e=this;return new d(function(t,n){if(!e.allowDynamicLoad())return n(new Error("Node or tree does not support dynamic children."));e.children=!0,e.collapse(),e.loadChildren().then(t).catch(n)})}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getParent();this.context().remove(this),t&&(t.refreshIndeterminateState(),t.markDirty()),(t?t.pagination():this._tree.pagination()).total--;var n=this.toObject(!1,e);return this._tree.emit("node.removed",n,t),this._tree.applyChanges(),n}},{key:"removed",value:function(){return this.state("removed")}},{key:"rendered",value:function(){return this.state("rendered")}},{key:"restore",value:function(){return h("removed",!1,"restored",this)}},{key:"select",value:function(e){if(!this.selected()&&this.selectable()){if(this._tree.batch(),this._tree.canAutoDeselect()){var t=this._tree.config.selection.require;this._tree.config.selection.require=!1,this._tree.deselectDeep(),this._tree.config.selection.require=t}h("selected",!0,"selected",this,!e&&this._tree.config.selection.autoSelectChildren),this._tree._lastSelectedNode=this,this.markDirty(),this._tree.end()}return this}},{key:"selectable",value:function(){var e=this._tree.config.selection.allow(this);return"boolean"==typeof e?e:this.state("selectable")}},{key:"selected",value:function(){return this.state("selected")}},{key:"set",value:function(e,t){return this[e]=t,this.markDirty(),this._tree.applyChanges(),this}},{key:"show",value:function(){return h("hidden",!1,"shown",this)}},{key:"state",value:function(t,n){var i=this;if(e.isString(t))return S(this,t,n);this._tree.batch();var r={};return e.each(t,function(e,t){r[t]=S(i,t,e)}),this._tree.end(),r}},{key:"states",value:function(t,n){var i=this,r=[];return this._tree.batch(),e.each(t,function(e){r.push(i.state(e,n))}),this._tree.end(),r}},{key:"swap",value:function(e){return this.context().swap(this,e),this}},{key:"softRemove",value:function(){return h("removed",!0,"softremoved",this,"softRemove")}},{key:"toggleCheck",value:function(){return this.checked()?this.uncheck():this.check()}},{key:"toggleCollapse",value:function(){return this.collapsed()?this.expand():this.collapse()}},{key:"toggleEditing",value:function(){return this.state("editing",!this.state("editing")),this.markDirty(),this._tree.applyChanges(),this}},{key:"toggleSelect",value:function(){return this.selected()?this.deselect():this.select()}},{key:"toObject",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},o=e.pull(Object.keys(this),"_tree","children","itree");e.each(o,function(e){r[e]=t[e]});var s=r.itree={};return s.a=this.itree.a,s.icon=this.itree.icon,s.li=this.itree.li,i&&(s.state=this.itree.state),!n&&this.hasChildren()&&e.isFunction(this.children.toArray)&&(r.children=this.children.toArray()),r}},{key:"toString",value:function(){return this.text}},{key:"tree",value:function(){return this.context().tree()}},{key:"uncheck",value:function(e){return this._tree.batch(),h("checked",!1,"unchecked",this,!e&&this._tree.config.checkbox.autoCheckChildren),this.state("indeterminate",!1),this.hasParent()&&this.getParent().refreshIndeterminateState(),this._tree.end(),this}},{key:"visible",value:function(){return!(this.hidden()||this.removed()||this._tree.usesNativeDOM&&!this.rendered())&&(!this.hasParent()||!this.getParent().collapsed()&&this.getParent().visible())}}]),t}();function _(t,n,i){n.id=n.id||c(),"string"!=typeof n.id&&"number"!=typeof n.id&&(n.id=n.id.toString());var r=n.itree=n.itree||{};r.icon=r.icon||!1,r.dirty=!1;var o=r.li=r.li||{};o.attributes=o.attributes||{};var s=r.a=r.a||{};s.attributes=s.attributes||{};var a=r.state=r.state||{};return a.collapsed="boolean"==typeof a.collapsed?a.collapsed:t.defaultState.collapsed,a.selectable="boolean"==typeof a.selectable?a.selectable:t.defaultState.selectable,a.draggable="boolean"==typeof a.draggable?a.draggable:t.defaultState.draggable,a["drop-target"]="boolean"==typeof a["drop-target"]?a["drop-target"]:t.defaultState["drop-target"],a.checked="boolean"==typeof a.checked&&a.checked,a.editable="boolean"==typeof a.editable?a.editable:t.defaultState.editable,a.editing="boolean"==typeof a.editing?a.editing:t.defaultState.editing,a.focused=a.focused||t.defaultState.focused,a.hidden=a.hidden||t.defaultState.hidden,a.indeterminate=a.indeterminate||t.defaultState.indeterminate,a.loading=a.loading||t.defaultState.loading,a.removed=a.removed||t.defaultState.removed,a.rendered=a.rendered||t.defaultState.rendered,a.selected=a.selected||t.defaultState.selected,n.itree.parent=i,n=e.assign(new k(t),n),e.isArrayLike(n.children)&&(n.children=D(t,n.children,n)),t.allowsLoadEvents&&e.each(t.config.allowLoadEvents,function(e){a[e]&&t.emit("node."+e,n,!0)}),n}function D(t,n,i){var r=new w(t);return t.config.sort&&(n=e.sortBy(n,t.config.sort)),e.each(n,function(e){r.push(_(t,e,i))}),r._context=i,r}var E=o(function(e,t){!function(t){var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=10;function o(){this._events={},this._conf&&s.call(this,this._conf)}function s(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==t?e.maxListeners:r,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=r}function a(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==i&&i.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,i.emitWarning(r)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,s.call(this,e)}function u(e,t,n,i){if(!n)return[];var r,o,s,a,l,c,h,d=[],f=t.length,p=t[i],g=t[i+1];if(i===f&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,o=n._listeners.length;r<o;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(d=d.concat(u(e,t,n[s],i+1)));return d}if("**"===p){for(s in(h=i+1===f||i+2===f&&"*"===g)&&n._listeners&&(d=d.concat(u(e,t,n,f))),n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!h&&(d=d.concat(u(e,t,n[s],f))),d=d.concat(u(e,t,n[s],i))):d=s===g?d.concat(u(e,t,n[s],i+2)):d.concat(u(e,t,n[s],i)));return d}d=d.concat(u(e,t,n[p],i+1))}if((a=n["*"])&&u(e,t,a,i+1),l=n["**"])if(i<f)for(s in l._listeners&&u(e,t,l,f),l)"_listeners"!==s&&l.hasOwnProperty(s)&&(s===g?u(e,t,l[s],i+2):s===p?u(e,t,l[s],i+1):((c={})[s]=l[s],u(e,t,{"**":c},i+1)));else l._listeners?u(e,t,l,f):l["*"]&&l["*"]._listeners&&u(e,t,l["*"],f);return d}l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,i){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&r.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,i),r},l.prototype.emit=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,i,r,s,a=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),a>3)for(t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];for(i=0,n=s.length;i<n;i++)switch(this.event=e,a){case 1:s[i].call(this,e);break;case 2:s[i].call(this,e,arguments[1]);break;case 3:s[i].call(this,e,arguments[1],arguments[2]);break;default:s[i].apply(this,t)}}if(this.wildcard){s=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,s,l,this.listenerTree,0)}else{if("function"==typeof(s=this._events[e])){switch(this.event=e,a){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];s.apply(this,t)}return!0}s&&(s=s.slice())}if(s&&s.length){if(a>3)for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];for(i=0,n=s.length;i<n;i++)switch(this.event=e,a){case 1:s[i].call(this);break;case 2:s[i].call(this,arguments[1]);break;case 3:s[i].call(this,arguments[1],arguments[2]);break;default:s[i].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,i,r,s,a=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),r=1;r<l;r++)t[r]=arguments[r];for(i=0,n=this._all.length;i<n;i++)switch(this.event=e,l){case 1:a.push(this._all[i].call(this,e));break;case 2:a.push(this._all[i].call(this,e,arguments[1]));break;case 3:a.push(this._all[i].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[i].apply(this,t))}}if(this.wildcard){s=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();u.call(this,s,c,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s)switch(this.event=e,l){case 1:a.push(s.call(this));break;case 2:a.push(s.call(this,arguments[1]));break;case 3:a.push(s.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];a.push(s.apply(this,t))}else if(s&&s.length){if(s=s.slice(),l>3)for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];for(i=0,n=s.length;i<n;i++)switch(this.event=e,l){case 1:a.push(s[i].call(this));break;case 2:a.push(s[i].call(this,arguments[1]));break;case 3:a.push(s[i].call(this,arguments[1],arguments[2]));break;default:a.push(s[i].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,n,i){if("function"==typeof e)return this._onAny(e,n),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");return this._events||o.call(this),this._newListener&&this.emit("newListener",e,n),this.wildcard?(function(e,n){for(var i=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;i+1<r;i++)if("**"===e[i]&&"**"===e[i+1])return;for(var o=this.listenerTree,s=e.shift();s!==t;){if(o[s]||(o[s]={}),o=o[s],0===e.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(n),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,a.call(this,o._listeners.length,s))):o._listeners=n,!0;s=e.shift()}return!0}.call(this,e,n),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(n):this._events[e].push(n),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,a.call(this,this._events[e].length,e))):this._events[e]=n,this)},l.prototype.off=function(e,i){if("function"!=typeof i)throw new Error("removeListener only takes instances of Function");var r,o=[];if(this.wildcard){var s="string"==typeof e?e.split(this.delimiter):e.slice();o=u.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],o.push({_listeners:r})}for(var a=0;a<o.length;a++){var l=o[a];if(r=l._listeners,n(r)){for(var c=-1,h=0,d=r.length;h<d;h++)if(r[h]===i||r[h].listener&&r[h].listener===i||r[h]._origin&&r[h]._origin===i){c=h;break}if(c<0)continue;return this.wildcard?l._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,i),this}(r===i||r.listener&&r.listener===i||r._origin&&r._origin===i)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,i))}return function e(n){if(n!==t){var i=Object.keys(n);for(var r in i){var o=i[r],s=n[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(n[o]),0===Object.keys(s).length&&delete n[o])}}}(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&this._all.length>0){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(e===t)return!this._events||o.call(this),this;if(this.wildcard)for(var n="string"==typeof e?e.split(this.delimiter):e.slice(),i=u.call(this,null,n,this.listenerTree,0),r=0;r<i.length;r++){i[r]._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return u.call(this,t,i,this.listenerTree,0),t}return this._events||o.call(this),this._events[e]||(this._events[e]=[]),n(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return l}):e.exports=l}()}).EventEmitter2;function A(e,t,n){return e.model[t].apply(e.model,n)}return function(t){function n(t){f(this,n);var i=v(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),r=i;r._lastSelectedNode,r._muted=!1,r.allowsLoadEvents=!1,r.batching=0,r.id=c(),r.initialized=!1,r.isDynamic=!1,r.opts=t,r.preventDeselection=!1,r.config=e.defaultsDeep({},t,{allowLoadEvents:[],checkbox:{autoCheckChildren:!0},contextMenu:!1,data:!1,editable:!1,editing:{add:!1,edit:!1,remove:!1},nodes:{resetStateOnRestore:!0},pagination:{limit:-1},search:{matcher:!1,matchProcessor:!1},selection:{allow:e.noop,autoDeselect:!0,autoSelectChildren:!1,disableDirectDeselection:!1,mode:"default",multiple:!1,require:!1},showCheckboxes:!1,sort:!1}),"checkbox"===r.config.selection.mode&&(r.config.selection.autoSelectChildren=!0,r.on("node.checked",function(e){e.selected()||e.select(!0)}),r.on("node.selected",function(e){e.checked()||e.check(!0)}),r.on("node.unchecked",function(e){e.selected()&&e.deselect(!0)}),r.on("node.deselected",function(e){e.checked()&&e.uncheck(!0)})),r.config.selection.autoSelectChildren&&(r.config.selection.multiple=!0,r.config.selection.autoDeselect=!1),t.editable&&!t.editing&&(r.config.editing.add=!0,r.config.editing.edit=!0,r.config.editing.remove=!0),e.isFunction(t.search)&&(r.config.search={matcher:t.search,matchProcessor:!1}),r.defaultState={collapsed:!0,editable:e.get(r,"config.editing.edit"),editing:!1,draggable:!0,"drop-target":!0,focused:!1,hidden:!1,indeterminate:!1,loading:!1,matched:!1,removed:!1,rendered:!1,selectable:!0,selected:!1},r.allowsLoadEvents=e.isArray(r.config.allowLoadEvents)&&r.config.allowLoadEvents.length>0,r.isDynamic=e.isFunction(r.config.data);var o=r.emit;return r.emit=function(t){if(!r.isEventMuted(t)){if(e.isFunction(e.get(arguments,"[1].preventDefault"))){var n=arguments[1];n.treeDefaultPrevented=!1,n.preventTreeDefault=function(){n.treeDefaultPrevented=!0}}o.apply(r,arguments)}},r.model=new w(r),r.config.data&&r.load(r.config.data),r.initialized=!0,i}return g(n,E),p(n,[{key:"addNode",value:function(){return A(this,"addNode",arguments)}},{key:"addNodes",value:function(t){var n=this;this.batch();var i=new w(this);return e.each(t,function(e){return i.push(n.addNode(e))}),this.end(),i}},{key:"applyChanges",value:function(){0===this.batching&&this.emit("changes.applied")}},{key:"available",value:function(){return A(this,"available",arguments)}},{key:"batch",value:function(){this.batching<0&&(this.batching=0),this.batching++}},{key:"blur",value:function(){return A(this,"blur",arguments)}},{key:"blurDeep",value:function(){return A(this,"blurDeep",arguments)}},{key:"boundingNodes",value:function(){var t=e.transform(arguments,function(e,t){e[t.indexPath().replace(/\./g,"")]=t},{}),n=function(e){return Array.isArray(e)?e:Array.from(e)}(e.sortBy(Object.keys(t))),i=n[0],r=n.slice(1);return[e.get(t,i),e.get(t,r)]}},{key:"canAutoDeselect",value:function(){return this.config.selection.autoDeselect&&!this.preventDeselection}},{key:"checked",value:function(){return A(this,"checked",arguments)}},{key:"clean",value:function(){return A(this,"clean",arguments)}},{key:"clearSearch",value:function(){return this.batch(),this.recurseDown(function(e){e.show().collapse().state("matched",!1)}),this.end(),this}},{key:"clone",value:function(){return A(this,"clone",arguments)}},{key:"collapse",value:function(){return A(this,"collapse",arguments)}},{key:"collapsed",value:function(){return A(this,"collapsed",arguments)}},{key:"collapseDeep",value:function(){return A(this,"collapseDeep",arguments)}},{key:"concat",value:function(){return A(this,"concat",arguments)}},{key:"copy",value:function(){return A(this,"copy",arguments)}},{key:"createNode",value:function(e){return n.isTreeNode(e)?e:_(this,e)}},{key:"deepest",value:function(){return A(this,"deepest",arguments)}},{key:"deselect",value:function(){return A(this,"deselect",arguments)}},{key:"deselectDeep",value:function(){return A(this,"deselectDeep",arguments)}},{key:"disableDeselection",value:function(){return this.config.selection.multiple&&(this.preventDeselection=!0),this}},{key:"each",value:function(){return A(this,"each",arguments)}},{key:"every",value:function(){return A(this,"every",arguments)}},{key:"editable",value:function(){return A(this,"editable",arguments)}},{key:"editing",value:function(){return A(this,"editing",arguments)}},{key:"enableDeselection",value:function(){return this.preventDeselection=!1,this}},{key:"end",value:function(){this.batching--,0===this.batching&&this.applyChanges()}},{key:"expand",value:function(){return A(this,"expand",arguments)}},{key:"expandDeep",value:function(){return A(this,"expandDeep",arguments)}},{key:"expanded",value:function(){return A(this,"expanded",arguments)}},{key:"extract",value:function(){return A(this,"extract",arguments)}},{key:"filter",value:function(){return A(this,"filter",arguments)}},{key:"filterBy",value:function(){return A(this,"filterBy",arguments)}},{key:"find",value:function(){return A(this,"find",arguments)}},{key:"flatten",value:function(){return A(this,"flatten",arguments)}},{key:"focused",value:function(){return A(this,"focused",arguments)}},{key:"forEach",value:function(){return A(this,"each",arguments)}},{key:"get",value:function(){return A(this,"get",arguments)}},{key:"hidden",value:function(){return A(this,"hidden",arguments)}},{key:"hide",value:function(){return A(this,"hide",arguments)}},{key:"hideDeep",value:function(){return A(this,"hideDeep",arguments)}},{key:"indeterminate",value:function(){return A(this,"indeterminate",arguments)}},{key:"indexOf",value:function(){return A(this,"indexOf",arguments)}},{key:"insertAt",value:function(){return A(this,"insertAt",arguments)}},{key:"invoke",value:function(){return A(this,"invoke",arguments)}},{key:"invokeDeep",value:function(){return A(this,"invokeDeep",arguments)}},{key:"isEventMuted",value:function(t){return e.isBoolean(this.muted())?this.muted():e.includes(this.muted(),t)}},{key:"isTree",value:function(e){return e instanceof n}},{key:"join",value:function(){return A(this,"join",arguments)}},{key:"lastSelectedNode",value:function(){return this._lastSelectedNode}},{key:"load",value:function(t){var n=this,i=new d(function(i,r){var o=function(t,o){if(!e.isArrayLike(t))return r(new TypeError("Loader requires an array-like `nodes` parameter."));!n.initialized&&e.isArrayLike(t)?setTimeout(function(){n.emit("data.loaded",t)}):n.emit("data.loaded",t);var s=D(n,t);n.config.deferredLoading?n.model=n.model.concat(s):n.model=s,n.model._pagination.total=t.length,e.parseInt(o)>t.length&&(n.model._pagination.total=e.parseInt(o)),o||n.model.recurseDown(function(e){e.hasChildren()&&(e.children._pagination.total=e.children.length)}),n.config.selection.require&&!n.selected().length&&n.selectFirstAvailableNode();var a=function(){n.emit("model.loaded",n.model),i(n.model),n.applyChanges()};!n.initialized&&e.isArray(t)?setTimeout(a):a()};if(e.isArrayLike(t))o(t);else if(e.isFunction(t)){var s=t(null,o,r,n.pagination());s&&(t=s)}e.isObject(t)?x(t).then(o).catch(r):error(new Error("Invalid data loader."))});return i.catch(function(e){n.emit("data.loaderror",e)}),this._loader={promise:i},i}},{key:"loading",value:function(){return A(this,"loading",arguments)}},{key:"loadMore",value:function(){return A(this,"loadMore",arguments)}},{key:"map",value:function(){return A(this,"map",arguments)}},{key:"matched",value:function(){return A(this,"matched",arguments)}},{key:"move",value:function(){return A(this,"move",arguments)}},{key:"mute",value:function(t){return e.isString(t)||e.isArray(t)?this._muted=e.castArray(t):this._muted=!0,this}},{key:"muted",value:function(){return this._muted}},{key:"node",value:function(){return A(this,"node",arguments)}},{key:"nodes",value:function(){return A(this,"nodes",arguments)}},{key:"pagination",value:function(){return A(this,"pagination",arguments)}},{key:"pop",value:function(){return A(this,"pop",arguments)}},{key:"push",value:function(){return A(this,"push",arguments)}},{key:"recurseDown",value:function(){return A(this,"recurseDown",arguments)}},{key:"reduce",value:function(){return A(this,"reduce",arguments)}},{key:"reduceRight",value:function(){return A(this,"reduceRight",arguments)}},{key:"reload",value:function(){return this.removeAll(),this.load(this.opts.data||this.config.data)}},{key:"remove",value:function(){return A(this,"remove",arguments)}},{key:"removeAll",value:function(){return this.model=new w(this),this.applyChanges(),this}},{key:"removed",value:function(){return A(this,"removed",arguments)}},{key:"restore",value:function(){return A(this,"restore",arguments)}},{key:"restoreDeep",value:function(){return A(this,"restoreDeep",arguments)}},{key:"reverse",value:function(){return A(this,"reverse",arguments)}},{key:"search",value:function(t){var i=this,r=this.config.search,o=r.matcher,s=r.matchProcessor;return!t||e.isString(t)&&e.isEmpty(t)?d.resolve(this.clearSearch()):(this.batch(),this.recurseDown(function(e){e.state("hidden",!0),e.state("matched",!1)}),this.end(),o=e.isFunction(o)?o:function(t,n){var r=new w(i);e.isString(t)&&(t=new RegExp(t,"i"));var o=void 0;o=e.isRegExp(t)?function(e){return t.test(e.text)}:t,i.model.recurseDown(function(e){e.removed()||o(e)&&r.push(e)}),n(r)},s=e.isFunction(s)?s:function(e){e.each(function(e){e.show().state("matched",!0),e.expandParents().collapse(),e.hasChildren()&&e.children.showDeep()})},new d(function(r,a){o(t,function(t){n.isTreeNodes(t)||(t=i.nodes(e.map(t,"id"))),i.batch(),s(t),i.end(),r(t)},a)}))}},{key:"select",value:function(){return A(this,"select",arguments)}},{key:"selectable",value:function(){return A(this,"selectable",arguments)}},{key:"selectBetween",value:function(e,t){this.batch();for(var n=e.nextVisibleNode();n.id!==t.id;)n.select(),n=n.nextVisibleNode();return this.end(),this}},{key:"selectDeep",value:function(){return A(this,"selectDeep",arguments)}},{key:"selected",value:function(){return A(this,"selected",arguments)}},{key:"selectFirstAvailableNode",value:function(){var e=this.model.filterBy("available").get(0);return e&&e.select(),e}},{key:"shift",value:function(){return A(this,"shift",arguments)}},{key:"show",value:function(){return A(this,"show",arguments)}},{key:"showDeep",value:function(){return A(this,"showDeep",arguments)}},{key:"slice",value:function(){return A(this,"slice",arguments)}},{key:"softRemove",value:function(){return A(this,"softRemove",arguments)}},{key:"some",value:function(){return A(this,"some",arguments)}},{key:"sort",value:function(){return A(this,"sort",arguments)}},{key:"sortBy",value:function(){return A(this,"sortBy",arguments)}},{key:"sortDeep",value:function(){return A(this,"sortDeep",arguments)}},{key:"splice",value:function(){return A(this,"slice",arguments)}},{key:"state",value:function(){return A(this,"state",arguments)}},{key:"stateDeep",value:function(){return A(this,"stateDeep",arguments)}},{key:"swap",value:function(){return A(this,"swap",arguments)}},{key:"toArray",value:function(){return A(this,"toArray",arguments)}},{key:"toString",value:function(){return A(this,"toString",arguments)}},{key:"unmute",value:function(t){return e.isString(t)||e.isArray(t)?(this._muted=e.difference(this._muted,e.castArray(t)),this._muted.length||(this._muted=!1)):this._muted=!1,this}},{key:"unshift",value:function(){return A(this,"unshift",arguments)}},{key:"visible",value:function(){return A(this,"visible",arguments)}}],[{key:"isTreeNode",value:function(e){return e instanceof k}},{key:"isTreeNodes",value:function(e){return e instanceof w}}]),n}()})}).call(this,n(37),n(110))},function(e){e.exports={name:"fin-hypergrid",version:"3.0.3",description:"Canvas-based high-performance grid",main:"src/Hypergrid",repository:{type:"git",url:"git://github.com/fin-hypergrid/core.git"},author:"SWirts, JEiten, DJones, NMichaud",license:"MIT",readmeFilename:"README.md",gitHead:"",keywords:["spreadsheet","grid"],dependencies:{"datasaur-base":"^3.0.0","datasaur-local":"^3.0.0","extend-me":"^2.7.0",finbars:"^1.6.0","inject-stylesheet-template":"^1.0.1",mustache:"^2.3.0","object-iterators":"1.3.0",overrider:"^0",rectangular:"1.0.1","sparse-boolean-array":"1.0.1",synonomous:"^2.1.2"},devDependencies:{gulp:"^3.9.0","gulp-concat":"^2.6.0","gulp-each":"^0.1.1","gulp-eslint":"^4.0.2","gulp-footer":"^1.1.1","gulp-header":"^1.8.2","gulp-imagine-64":"^1.0.1","gulp-load-plugins":"^1.1.0","gulp-mocha":"^6.0.0","run-sequence":"^1.1.4"}}},function(e,t,n){"use strict";var i,r={theme:{enumerable:!0,get:function(){return this.grid.getTheme()},set:function(e){this.grid.applyTheme(e)}},wheelHFactor:{enumerable:!0,get:function(){return this.grid.sbHScroller.deltaXFactor},set:function(e){this.grid.sbHScroller.deltaXFactor=e}},wheelVFactor:{enumerable:!0,get:function(){return this.grid.sbVScroller.deltaYFactor},set:function(e){this.grid.sbVScroller.deltaYFactor=e}},subgrids:{enumerable:!0,get:function(){return this.var.subgrids},set:function(e){this.var.subgrids=e.slice(),this.grid.behavior&&(this.grid.behavior.subgrids=e)}},features:{enumerable:!0,get:function(){return this.var.features},set:function(e){this.var.features=e.slice(),this.grid.behavior&&(this.grid.behavior.initializeFeatureChain(e),this.grid.allowEvents(this.grid.getRowCount()))}},gridRenderer:{enumerable:!0,get:function(){return this.var.gridRenderer},set:function(e){this.var.gridRenderer=e,this.grid.renderer.setGridRenderer(e)}},columnIndexes:{enumerable:!0,get:function(){return this.grid.behavior.getActiveColumns().map(function(e){return e.index})},set:function(e){this.grid.behavior.setColumnOrder(e),this.grid.behavior.changed()}},columnNames:{enumerable:!0,get:function(){return this.grid.behavior.getActiveColumns().map(function(e){return e.name})},set:function(e){this.grid.behavior.setColumnOrderByName(e),this.grid.behavior.changed()}},rows:{enumerable:!0,get:function(){var e={},t=this.grid.behavior,n=this.grid.properties.defaultRowHeight;return t.subgrids.forEach(function(i){for(var r=i.name||i.type,o=0,s=i.getRowCount();o<s;++o){var a=t.getRowProperties(o,void 0,i);if(a){var l={height:a.height};l.height===n&&(l=void 0),a=Object.assign({},a,l),Object.getOwnPropertyNames(a).find(u)&&((e[r]||(e[r]={}))[o]=a)}}function u(e){return void 0!==a[e]}}),e},set:function(e){e&&(function(e){var t=this.grid.behavior,n=this.settingState?"setRowProperties":"addRowProperties";Object.keys(e).forEach(function(i){var r=t.subgrids.lookup[i];if(r){var o=e[i];Object.keys(o).forEach(function(e){var i=o[e];t[n](e,i,r)})}})}.call(this,e),this.grid.behavior.changed())}},columns:{enumerable:!0,get:function(){var e=this.grid.behavior.getColumns(),t=this.grid.headerify;return e.reduce(function(e,n){var i=Object.keys(n.properties).reduce(function(e,i){switch(i){case"preferredWidth":break;case"header":if(t&&n.properties.header===t(n.properties.name))break;default:e[i]=n.properties[i]}return e},{});return Object.keys(i).length&&(e[n.name]=i),e},{})},set:function(e){e&&(function(e){this.grid.behavior.addAllColumnProperties(e,this.settingState)}.call(this,e),this.grid.behavior.changed())}},cells:{enumerable:!0,get:function(){var e=this.grid.behavior,t=e.getColumns(),n={};return e.subgrids.forEach(function(i){for(var r=i.name||i.type,o=0,s=i.getRowCount();o<s;++o)t.forEach(a);function a(t){var s=e.getCellOwnProperties(t.index,o,i);if(s){var a=n[r]=n[r]||{};(a[o]=a[o]={})[t.name]=Object.assign({},s)}}}),n},set:function(e){e&&(function(e){var t=this.grid.behavior.subgrids,n=this.grid.behavior.getColumns(),i=this.settingState?"setCellProperties":"addCellProperties";Object.keys(e).forEach(function(r){var o=t.lookup[r];if(o){var s=e[r];Object.keys(s).forEach(function(e){var t=s[e];Object.keys(t).forEach(function(r){var s=t[r];if(s){var a=n.find(function(e){return e.name===r});a&&a[i](e,s,o)}})})}})}.call(this,e),this.grid.behavior.changed())}},rowHeaderCheckboxes:{enumerable:!0,get:function(){return this.var.rowHeaderCheckboxes},set:function(e){this.var.rowHeaderCheckboxes=e,this.grid.renderer.resetRowHeaderColumnWidth()}},rowHeaderNumbers:{enumerable:!0,get:function(){return this.var.rowHeaderNumbers},set:function(e){this.var.rowHeaderNumbers=e,this.grid.renderer.resetRowHeaderColumnWidth()}},showRowNumbers:{enumerable:!1,get:function(){return this.rowHeaderCheckboxes||this.rowHeaderNumbers},set:function(e){this.rowHeaderCheckboxes=this.rowHeaderNumbers=e}},doubleClickDelay:{enumerable:!0,get:function(){return this.var.doubleClickDelay},set:function(e){i||(i=!0,console.warn("The doubleClickDelay property has been deprecated as of v2.1.0. Setting this property no longer has any effect. Set double-click speed in your system's mouse preferences. (This warning will be removed in a future release.)")),this.var.doubleClickDelay=e}},lineColor:{get:function(){return this.gridLinesHColor},set:function(e){this.gridLinesHColor=this.gridLinesVColor=e}},lineWidth:{get:function(){return this.gridLinesHWidth},set:function(e){this.gridLinesHWidth=this.gridLinesVWidth=e}},gridBorder:o(),gridBorderLeft:o("Left"),gridBorderRight:o("Right"),gridBorderTop:o("Top"),gridBorderBottom:o("Bottom")};function o(e){var t="gridBorder"+(e||"");return{enumerable:!0,get:function(){return this.var[t]},set:function(n){this.var[t]=n,e||(this.var.gridBorderLeft=this.var.gridBorderRight=this.var.gridBorderTop=this.var.gridBorderBottom=n),this.grid.resetGridBorder(e)}}}r.columnProperties=r.columns,e.exports=r},function(e,t,n){"use strict";var i=n(3).Rectangle;function r(e,t,n,r){i.call(this,e,t,n-1,r-1)}r.prototype=Object.create(i.prototype,{width:{get:function(){return this.extent.x+1}},height:{get:function(){return this.extent.y+1}}}),e.exports=r},function(e,t,n){"use strict";var i=n(16),r=n(26);function o(e){var t,n,o,s,a,l,u,c,h,d,f,p=this.grid.properties.backgroundColor,g=this.visibleColumns,v=this.visibleRows,m=g.length,y=m-1,b=v.length,w=this.cellEventPool,C=m?g[m-1].right:0,x=b?v[b-1].bottom:0;if(e.clearRect(0,0,this.bounds.width,this.bounds.height),m&&b){if(e.alpha(p)>0&&(e.cache.fillStyle=p,e.fillRect(0,0,C,x)),this.gridRenderer.reset?(this.resetAllGridRenderers(),this.gridRenderer.reset=!1,r.call(this,!1),i.call(this,!0)):this.gridRenderer.rebundle&&(this.gridRenderer.rebundle=!1,i.call(this)),(a=this.rowBundles).length)for(n=this.rowPrefillColors,h=a.length;h--;)s=a[h],e.clearFill(0,s.top,C,s.bottom-s.top,s.backgroundColor);else for(c=(u=this.columnBundles).length;c--;)l=u[c],e.clearFill(l.left,0,l.right-l.left,x,l.backgroundColor);var S=0;this.visibleColumns.forEachWithNeg(function(i,r){for(i=(o=w[S]).visibleColumn,n||(t=o.column.properties.backgroundColor),f=i.column.properties.columnClip,e.clipSave(f||null===f&&r===y,0,0,i.right,x),d=h=0;h<b;h++,S++){n&&(t=n[h]);try{d=Math.max(d,this._paintCell(e,w[S],t))}catch(t){this.renderErrorCell(t,e,i,w[S].visibleRow)}}e.clipRestore(f),o.column.properties.preferredWidth=Math.round(d)},this),this.paintGridlines(e)}}o.key="by-columns-and-rows",o.rebundle=!0,e.exports=o},function(e,t,n){"use strict";e.exports=function(e){var t,n,i,r,o=this.grid.properties,s=this.visibleRows,a=s.length;if(e)for(r=this.cellEventPool,i=0,n=0;n<a;n++)t=s[n],this.visibleColumns.forEachWithNeg(function(e){r[++i].reset(e,t)});var l,u,c,h=[],d=o.backgroundColor,f=o.rowStripes,p=Array(a);for(n=0;n<a;n++)u=(t=s[n]).subgrid.isData&&f&&f[t.rowIndex%f.length],c=p[n]=u&&u.backgroundColor||d,l&&l.backgroundColor===c?l.bottom=t.bottom:c===d?l=void 0:(l={backgroundColor:c,top:t.top,bottom:t.bottom},h.push(l));this.rowBundles=h,this.rowPrefillColors=p}},function(e,t,n){"use strict";(function(e){(function(e){function t(){this.selection=[],this.states=[],this.storeState=function(){for(var e,t=this.selection,n=[],i=0;i<t.length;i++)e=[].concat(t[i]),n.push(e);this.states.push(n)}}function n(e,t){return e instanceof Array?n.apply(this,e):void 0===t?[e,e]:e<=t?[e,t]:[t,e]}function i(e,t){return e[0]<=t[0]&&t[0]<=e[1]||e[0]<=t[1]&&t[1]<=e[1]||t[0]<e[0]&&e[1]<t[1]}t.prototype={select:function(e,t){this.storeState();var r=n(e,t),o=[0,1];return this.selection.forEach(function(e){i(e,r)||function(e,t){return e[1]===t[0]-1||t[1]===e[0]-1}(e,r)?r=function(e,t){var n=Math.min(Math.min.apply(Math,e),Math.min.apply(Math,t)),i=Math.max(Math.max.apply(Math,e),Math.max.apply(Math,t));return[n,i]}(e,r):o.push(e)}),o.push(r),o[1]=this.selection.length,this.selection.splice.apply(this.selection,o),this},deselect:function(e,t){var r=n(e,t),o=[0,0];return this.selection.forEach(function(e){if(i(e,r)){var t=function(e,t){var n=e[0],i=e[1],r=t[0],o=t[1],s=[];r<=n&&o<i?s.push([o+1,i]):r>n&&o>=i?s.push([n,r-1]):n<r&&o<i?(s.push([n,r-1]),s.push([o+1,i])):(o<n||r>i)&&s.push(e);return s}(e,r);o=o.concat(t)}else o.push(e)}),o[1]=this.selection.length,this.selection.splice.apply(this.selection,o),this},clear:function(){return this.states.length=0,this.selection.length=0,this},clearMostRecentSelection:function(){0!==this.states.length&&(this.selection=this.states.pop())},isSelected:function(e){return this.selection.some(function(t){return t[0]<=e&&e<=t[1]})},isEmpty:function(){return 0===this.selection.length},getSelections:function(){var e=[];return this.selection.forEach(function(t){for(var n=t[0];n<=t[1];n++)e.push(n)}),e.sort(function(e,t){return e-t}),e}},e.exports=t})("object"==typeof e&&e||(window.RangeSelectionModel={}),"object"==typeof e&&e.exports||(window.RangeSelectionModel.exports={}))||"object"==typeof e||(window.RangeSelectionModel=window.RangeSelectionModel.exports)}).call(this,n(28)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var i=n(3).Point,r=n(4),o=n(56),s=n(60),a=n(61),l=n(62),u=n(10),c=n(18),h=n(20),d=["columnHeader","columnHeaderColumnSelection","filterProperties","rowHeader","rowHeaderRowSelection","rowNumbersProperties","treeColumnProperties","treeColumnPropertiesColumnSelection"],f=r.extend("Behavior",{initialize:function(e,t){this.grid=e,this.initializeFeatureChain(),this.grid.behavior=this,this.reset(t)},initializeFeatureChain:function(e){var t;if(this.featureChain=void 0,this.featureMap={},this.featureRegistry=this.featureRegistry||l,this.grid.properties.features){var n=this.featureRegistry.get.bind(this.featureRegistry);t=this.grid.properties.features.map(n)}else this.features&&(t=this.features,function(){var e=[],t=[],n=0;if(this.features.forEach(function(i){var r=i.prototype.$$CLASS_NAME||i.name,o=r||"feature"+n++;if(e.push(o),!this.featureRegistry.get(o,!0)){var s=i.name||i.prototype.$$CLASS_NAME||"FeatureConstructor"+n,a=[];r||a.push("'"+o+"'"),a.push(s),t.push(a.join(", "))}},this),e.length){var i="Hypergrid.defaults.features = [\n"+p("\t'",e,"',\n")+"];";t.length&&(i+="\n\nThe following custom features are unregistered and will need to be registered prior to behavior instantiation:\n\n"+p("Features.add(",t,");\n")),n&&(i+="\n\n(You should provide meaningful names for your custom features rather than the generated names above.)"),console.warn("`grid.behavior.features` (array of feature constructors) has been deprecated as of version 2.1.0 in favor of `grid.properties.features` (array of feature names). Remove `features` array from your behavior and add `features` property to your grid state object (or Hypergrid.defaults), e.g.:\n\n"+i)}}.call(this));t.forEach(function(e,t){var n=new e;this.featureMap[n.$$CLASS_NAME]=n,t?this.featureChain.setNext(n):this.featureChain=n},this),this.featureChain&&this.featureChain.initializeOn(this.grid)},features:[],reset:function(e){var t=this.resetDataModel(e);t&&(this.CellEvent=s(this.grid)),this.scrollPositionX=this.scrollPositionY=0,this.rowPropertiesPrototype=Object.create(this.grid.properties,n(30).rowPropertiesPrototypeDescriptors),this.clearColumns(),this.createColumns(),this.subgrids=e&&e.subgrids||!t&&this.subgrids||this.grid.properties.subgrids,this.setData(e)},setHeaders:function(e){if(e instanceof Array){var t=this.allColumns;e.forEach(function(e,n){t[n].header=e})}else"object"==typeof e&&this.allColumns.forEach(function(t){e[t.name]&&(t.header=e[t.name])})},setData:function(e,t){if(Array.isArray(e)||"function"==typeof e||(e=(t=e)&&t.data),void 0!==(e=this.unwrap(e))){if(!Array.isArray(e))throw"Expected data to be an array (of data row objects).";t=t||{};var n=this.unwrap(t.schema);this.subgrids.forEach(function(t){t.setData(e,n)}),this.grid.cellEditor&&this.grid.cellEditor.cancelEditing(),(t.apply||void 0===t.apply)&&this.reindex(),this.grid.allowEvents(this.getRowCount())}},get renderedColumnCount(){return this.grid.renderer.visibleColumns.length},get renderedRowCount(){return this.grid.renderer.visibleRows.length},get leftMostColIndex(){return this.grid.properties.showRowNumbers?this.rowColumnIndex:this.hasTreeColumn()?this.treeColumnIndex:0},clearColumns:function(){var e=this.schema,t=this.treeColumnIndex,n=this.rowColumnIndex;this.columnsCreated=!1,e[t]=e[t]||{},e[t].index=t,void 0===e[t].name&&(e[t].name=this.treeColumnNameDefault),void 0===e[t].header&&(e[t].header=this.treeColumnHeaderDefault),e[n]=e[n]||{},e[n].index=n,void 0===e[n].name&&(e[n].name=this.rowColumnNameDefault),void 0===e[n].header&&(e[n].header=""),this.columns=this.grid.decorateColumnArray(),this.allColumns=this.grid.decorateColumnArray(),this.allColumns[t]=this.columns[t]=this.newColumn(e[t]),this.allColumns[n]=this.columns[n]=this.newColumn(e[n]),this.columns[t].properties.propClassLayers=this.columns[n].properties.propClassLayers=this.grid.properties.propClassLayersMap.NO_ROWS,this.grid.renderer.resetRowHeaderColumnWidth()},getActiveColumn:function(e){return this.columns[e]},getActiveColumnIndex:function(e){var t=e instanceof o?e.index:e,n="number"==typeof index?"index":"name";return this.columns.findIndex(function(e){return e[n]===t})},getColumn:function(e){return this.allColumns[e]},newColumn:function(e){return new o(this,e)},addColumn:function(e){var t=this.newColumn(e),n=new u,i=n.getSynonyms(t.name);return this.columns.push(t),n.decorateObject(this.columns,i,t),this.allColumns.push(t),n.decorateObject(this.allColumns,i,t),t},createColumns:function(e){var t=this.dataModel.getSchema();a.normalizeSchema(t),a.decorateSchema(t),a.decorateColumnSchema(t,this.grid.properties.headerify),this.createDataRowProxy(),this.clearColumns(),e&&e.call(this),this.columnsCreated=!0,this.changed(),h.call(this.grid,"fin-hypergrid-columns-created")},createDataRowProxy:function(){},getColumnWidth:function(e){var t=(e!==this.treeColumnIndex||this.hasTreeColumn())&&this.getActiveColumn(e);return t?t.getWidth():0},setColumnWidth:function(e,t){(e>=-2?this.getActiveColumn(e):e).setWidth(t),this.stateChanged()},reindex:function(){this.dataModel.reindex()},clearObjectProperties:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(void 0===t||!t&&d.indexOf(n)>=0||t&&d.indexOf(n)<0)&&delete e[n]},getState:function(){var e=JSON.parse(JSON.stringify(this.grid.properties));return this.clearObjectProperties(e.columnProperties,!1),e},clearState:function(){this.grid.clearState(),this.createColumns()},setState:function(e){this.addState(e,!0)},addState:function(e,t){t&&this.clearState();var n=this.grid.properties;n.settingState=t,c(n,e),delete n.settingState,this.reindex()},setAllColumnProperties:function(e){this.addAllColumnProperties(e,!0)},addAllColumnProperties:function(e,t){if(e){var n=this.grid.behavior.getColumns();Object.keys(e).forEach(function(i){var r=n[i];r&&r.addProperties(e[i],t)})}},setColumnOrder:function(e){if(Array.isArray(e)){var t=this.columns,n=this.allColumns,i=new u;t.length=0;var r=this.treeColumnIndex.toString(),o=this.rowColumnIndex.toString();Object.keys(t).forEach(function(e){switch(e){case r:case o:break;default:delete t[e]}}),e.forEach(function(e){t.push(n[e])}),i.decorateArray(t)}},setColumnOrderByName:function(e){if(Array.isArray(e)){var t=this.allColumns;this.setColumnOrder(e.map(function(e){return t[e].index}))}},setColumnIndexes:function(e,t){this.grid.properties.columnIndexes=e,t||this.grid.fireSyntheticOnColumnsChangedEvent()},showColumns:function(e,t,n,i){("number"==typeof e||Array.isArray(e))&&(i=n,n=t,t=e,e=!1);var r=this.columns,o=e?r:this.allColumns;"number"==typeof t&&(t=[t]);var s=t.map(function(e){return o[e]}).filter(function(e){return e});"number"!=typeof n&&(i=n,n=r.length),i||s.forEach(function(e){var t=r.indexOf(e);t>=0&&(r.splice(t,1),n>t&&--n)}),n>=0&&r.splice.apply(r,[n,0].concat(s)),this.grid.properties.columnIndexes=r.map(function(e){return e.index})},hideColumns:function(e,t){var n=Array.prototype.slice.call(arguments);n.push(-1),this.showColumns.apply(this,n)},resolveProperty:function(e){return this.grid.resolveProperty(e)},lookupFeature:function(e){return this.featureMap[e]},getFixedColumnsWidth:function(){for(var e,t=this.getFixedColumnCount(),n=0,i=this.leftMostColIndex,r=this.grid.properties,o="border-box"!==r.boxSizing,s=r.gridLinesVWidth;i<t;i++)(e=this.getColumnWidth(i))&&(n+=e,o&&(n+=s));return r.fixedLinesVWidth&&(n+=r.fixedLinesHWidth-s),n},getFixedColumnsMaxWidth:function(){return this.getFixedColumnsWidth()},setCursor:function(e){e.updateCursor(),this.featureChain.setCursor(e)},onMouseMove:function(e,t){this.featureChain&&(this.featureChain.handleMouseMove(e,t),this.setCursor(e))},onClick:function(e,t){this.featureChain&&(this.featureChain.handleClick(e,t),this.setCursor(e))},onContextMenu:function(e,t){this.featureChain&&(this.featureChain.handleContextMenu(e,t),this.setCursor(e))},onWheelMoved:function(e,t){this.featureChain&&(this.featureChain.handleWheelMoved(e,t),this.setCursor(e))},onMouseUp:function(e,t){this.featureChain&&(this.featureChain.handleMouseUp(e,t),this.setCursor(e))},onMouseDrag:function(e,t){this.featureChain&&(this.featureChain.handleMouseDrag(e,t),this.setCursor(e))},onKeyDown:function(e,t){this.featureChain&&(this.featureChain.handleKeyDown(e,t),this.setCursor(e))},onKeyUp:function(e,t){this.featureChain&&(this.featureChain.handleKeyUp(e,t),this.setCursor(e))},onDoubleClick:function(e,t){this.featureChain&&(this.featureChain.handleDoubleClick(e,t),this.setCursor(e))},handleMouseDown:function(e,t){this.featureChain&&(this.featureChain.handleMouseDown(e,t),this.setCursor(e))},handleMouseExit:function(e,t){this.featureChain&&(this.featureChain.handleMouseExit(e,t),this.setCursor(e))},changed:function(){this.grid.behaviorChanged()},shapeChanged:function(){this.grid.behaviorShapeChanged()},stateChanged:function(){this.grid.behaviorStateChanged()},isColumnReorderable:function(){return this.deprecated("isColumnReorderable()","grid.properties.columnsReorderable","2.1.3")},getColumnProperties:function(e){var t=(e!==this.treeColumnIndex||this.hasTreeColumn())&&this.getColumn(e);return t&&t.properties},setColumnProperties:function(e,t){var n=this.getColumn(e);if(!n)throw"Expected column.";var i=Object.assign(n.properties,t);return this.changed(),i},clearAllCellProperties:function(e){var t;for(void 0===e?(e=0,t=this.columns.length):t=e+1;e<t;e++){var n=this.getColumn(e);n&&n.clearAllCellProperties()}},getHiddenColumnDescriptors:function(){for(var e=this.grid.properties.columnIndexes,t=[],n=this.getActiveColumnCount(),i=0;i<n;i++)if(-1===e.indexOf(i)){var r=this.getActiveColumn(i);t.push({id:i,header:r.header,field:r.name})}return t},getFixedColumnCount:function(){return this.grid.properties.fixedColumnCount},setFixedColumnCount:function(e){this.grid.properties.fixedColumnCount=e},getFixedRowCount:function(){return this.getHeaderRowCount()+this.grid.properties.fixedRowCount},setFixedRowCount:function(e){this.grid.properties.fixedRowCount=e},endDragColumnNotification:function(){},getCursorAt:function(e,t){return null},getActiveColumnCount:function(){return this.columns.length},setScrollPositionX:function(e){this.scrollPositionX=e},getScrollPositionX:function(){return this.scrollPositionX},setScrollPositionY:function(e){this.scrollPositionY=e},getScrollPositionY:function(){return this.scrollPositionY},getCellEditorAt:function(e){return e.isDataColumn&&e.column.getCellEditorAt(e)},highlightCellOnHover:function(e,t){return e&&t},set cellPropertiesPrePaintNotification(e){throw new this.HypergridError("cellPropertiesPrePaintNotification has been deprecated as of v3.0.0. Code to inspect or mutate the render config object should be moved to the getCell hook.")},swapColumns:function(e,t){var n=this.columns,i=n[e];n[e]=n[t],n[t]=i,this.changed()},convertViewPointToDataPoint:function(e){return new i(this.getActiveColumn(e.x).index,e.y)},hasTreeColumn:function(e){return!1},getSelectionMatrixFunction:function(e){return function(){return null}},getRowHeaderColumn:function(){return this.allColumns[this.rowColumnIndex]},getTreeColumn:function(){return this.allColumns[this.treeColumnIndex]},autosizeAllColumns:function(){this.checkColumnAutosizing(!0),this.changed()},checkColumnAutosizing:function(e){var t=this.autoSizeRowNumberColumn(e)||this.autoSizeTreeColumn(e);return this.allColumns.findWithNeg(function(n){t=n.checkColumnAutosizing(e)||t}),t},autoSizeRowNumberColumn:function(e){if(this.grid.properties.showRowNumbers&&this.grid.properties.rowNumberAutosizing)return this.getRowHeaderColumn().checkColumnAutosizing(e)},autoSizeTreeColumn:function(e){if(this.grid.properties.showTreeColumn&&this.grid.properties.treeColumnAutosizing)return this.getTreeColumn().checkColumnAutosizing(e)},getColumns:function(){return this.allColumns},getActiveColumns:function(){return this.columns},getHiddenColumns:function(){for(var e=this.columns,t=this.allColumns,n=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&n.push(t[i]);return n.sort(function(e,t){return e.header<t.header}),n},getSelectedRows:function(){return this.grid.selectionModel.getSelectedRows()},getSelectedColumns:function(){return this.grid.selectionModel.getSelectedColumns()},getSelections:function(){return this.grid.selectionModel.getSelections()},getIndexedData:function(){return this.deprecated("getIndexedData()","getData()","3.0.0")}});function p(e,t,n){return e+t.join(n+e)+n}Object.defineProperties(f.prototype,{treeColumnIndex:{value:-1},treeColumnNameDefault:{value:"Tree",writable:!0},treeColumnHeaderDefault:{value:"Tree",writable:!0},rowColumnIndex:{value:-2},rowColumnNameDefault:{value:"RowHeader",writable:!0}}),f.prototype.applyAnalytics=f.prototype.reindex,f.prototype.mixIn(n(30).mixin),f.prototype.mixIn(n(76).mixin),f.prototype.mixIn(n(77).mixin),f.prototype.mixIn(n(78).mixin),e.exports=f},function(e,t,n){"use strict";t.mixin={getFixedRowsHeight:function(){for(var e,t,n,i,r=this.subgrids,o=0,s=this.grid.properties,a="border-box"!==s.boxSizing,l=s.gridLinesHWidth,u=0;u<r.length&&!t;++u){for(i=(t=(e=r[u]).isData)?s.fixedRowCount:e.getRowCount(),n=0;n<i;++n)o+=this.getRowHeight(n,e),a&&(o+=l);t&&s.fixedLinesHWidth&&(o+=s.fixedLinesHWidth-l)}return o},getRowProperties:function(e,t,n){"object"==typeof e&&(n=e.subgrid,e=e.dataCell.y);var i=(n||this.dataModel).getRowMetadata(e,void 0===t?void 0:null);return i&&(i.__ROW||void 0!==t&&(i.__ROW=Object.create(t)))},setRowProperties:function(e,t,n){if(t){"object"==typeof e&&(n=e.subgrid,e=e.dataCell.y);var i=(n||this.dataModel).getRowMetadata(e,null);i&&(i.__ROW=Object.create(this.rowPropertiesPrototype),this.addRowProperties(e,t,n,i.__ROW),this.stateChanged())}},setRowProperty:function(e,t,n,i){var r,o="height"===t;void 0!==n?(r=this.getRowProperties(e,this.rowPropertiesPrototype,i))[t]=n:(r=this.getRowProperties(e,void 0,i))&&delete r[o?"_height":t],o?this.shapeChanged():this.stateChanged()},addRowProperties:function(e,t,n,i){var r,o;t&&((i=i||this.getRowProperties(e,this.rowPropertiesPrototype,n))&&(Object.keys(t).forEach(function(e){var n=t[e];void 0!==n?i[e]=n:(delete i[(r="height"===e)?"_height":e],o=o||r)}),o?this.shapeChanged():this.stateChanged()))},getRowHeight:function(e,t){var n=this.getRowProperties(e,void 0,t);return n&&n.height||this.grid.properties.defaultRowHeight},setRowHeight:function(e,t,n){this.setRowProperty(e,"height",t,n)}},t.rowPropertiesPrototypeDescriptors={height:{enumerable:!0,get:function(){return this._height||this.defaultRowHeight},set:function(e){e=Math.max(5,Math.ceil(e)),isNaN(e)&&(e=void 0),e!==this._height&&(e?Object.defineProperty(this,"_height",{value:e,configurable:!0}):delete this._height,this.grid.behaviorStateChanged())}}}},function(e,t,n){"use strict";var i=n(12).extend("DatasaurLocal",{initialize:function(e,t){this.reset()},reset:function(){this.schema=[],this.data=[]},setData:function(e,t){this.data=e||[],t?this.setSchema(t):this.data.length&&!this.schema.length&&this.setSchema([]),this.dispatchEvent("fin-hypergrid-data-loaded")},getSchema:function(){return this.schema},setSchema:function(e){if(!e.length){var t=this.getFirstRow();t&&(e=Object.keys(t))}this.schema=e,this.dispatchEvent("fin-hypergrid-schema-loaded")},getFirstRow:function(){for(var e in this.data)if(this.data[e])return this.data[e]},getRow:function(e){return this.data[e]},setRow:function(e,t){this.data[e]=t||void 0},getRowMetadata:function(e,t){var n=this.data[e];return n&&(n.__META||void 0!==t&&(n.__META=Object.create(t)))},setRowMetadata:function(e,t){var n=this.data[e];return n&&(t?n.__META=t:delete n.__META),!!n},addRow:function(e,t){1===arguments.length&&(t=arguments[0],e=void 0),void 0===e||e>=this.getRowCount()?this.data.push(t):this.data.splice(e,0,t),this.dispatchEvent("fin-hypergrid-data-shape-changed")},delRow:function(e,t){var n=this.data.splice(e,void 0===t?1:t);return n.length&&this.dispatchEvent("fin-hypergrid-data-shape-changed"),n},getValue:function(e,t){var n=this.data[t];return n?n[this.schema[e].name]:null},setValue:function(e,t,n){this.data[t][this.schema[e].name]=n},getRowCount:function(){return this.data.length},getColumnCount:function(){return this.schema.length}});e.exports=i},function(e,t,n){"use strict";e.exports={"fin-hypergrid-schema-loaded":function(e){this.behavior.createColumns()},"fin-hypergrid-data-loaded":function(e){this.repaint()},"fin-hypergrid-data-shape-changed":function(e){this.behaviorShapeChanged()},"fin-hypergrid-data-prereindex":function(e){this.stashRowSelections(),this.stashColumnSelections()},"fin-hypergrid-data-postreindex":function(e){this.selectionModel.reset(),this.unstashRowSelections(),this.unstashColumnSelections(),this.behaviorShapeChanged()}}},function(e,t,n){"use strict";var i=n(10),r=n(19),o={};function s(e,t){o[e]||(console.warn("."+e+" has been deprecated as of v3.0.0. (Will be removed in a future release.) "+(t||"")),o[e]=!0)}t.mixin={columnEnumSynchronize:function(){this._columnEnumKey=this._columnEnumKey||"toAllCaps";var e=this._columnEnum||(this._columnEnum={}),t=this.allColumns,n=new i({transformations:[this._columnEnumKey]}).decorateArray(t.slice());n.length=0,Object.keys(n).reduce(function(e,t){return e[t]=n[t].index,e},e),Object.keys(e).forEach(function(t){t in n||delete e[t]})},get columnEnum(){return o.columnEnum||(console.warn(".columnEnum[propName] has been deprecated as of v3.0.0 in favor of either .getColumns()[propName].index or .schema[propName].index. (Will be removed in a future release.)"),o.columnEnum=!0),this._columnEnum},get columnEnumKey(){return s("columnEnumKey"),"verbatim"===this._columnEnumKey?"passThrough":this._columnEnumKey},set columnEnumKey(e){s("columnEnumKey");var t=typeof e,n=Object.keys(r);switch(t){case"string":if("passThrough"===e)e="verbatim";else if(!(e in r))throw new this.HypergridError("Expected registered transformer for .columnEnumKey value from: "+n);this._columnEnumKey=e;break;case"function":if(this._columnEnumKey=n.find(function(t){return e===r[t]}),!this._columnEnumKey)throw new this.HypergridError('.columnEnumKey has been deprecated as of v3.0.0 and now accepts a function reference (or string key) from require("synonmous/transformers"): '+n);break;default:throw new this.HypergridError("Expected string or function for .columnEnumKey assignment but received "+t+".")}}},t.mixInShared={get columnEnumDecorators(){return s("columnEnumDecorators"),r}}},function(e,t,n){"use strict";var i=n(2).extend("Button",{paint:function(e,t){var n=t.value,i=t.bounds,r=i.x+1,o=i.y+1,s=i.width-2,a=i.height-2,l=a/2,u=e.createLinearGradient(r,o,r,o+a);"border-box"===t.boxSizing&&(s-=t.gridLinesVWidth,a-=t.gridLinesHWidth),t.mouseDown?(u.addColorStop(0,"#B5CBED"),u.addColorStop(1,"#4d74ea")):(u.addColorStop(0,"#ffffff"),u.addColorStop(1,"#aaaaaa")),e.cache.fillStyle=t.backgroundColor,e.fillRect(i.x,i.y,i.width,i.height),e.cache.fillStyle=u,e.cache.strokeStyle="#000000",this.roundRect(e,r,o,s,a,l,u,!0);var c=(s-e.getTextWidth(n))/2,h=(a-e.getTextHeight(e.cache.font).descent)/2;e.cache.textBaseline="middle",e.cache.fillStyle="#333333",e.cache.font=a-2+"px sans-serif",t.backgroundColor="rgba(0,0,0,0)",e.fillText(n,r+c,o+h)}});e.exports=i},function(e,t,n){"use strict";e.exports={Scrollbar:n(102),templater:n(104)},Object.defineProperties(e.exports,{"datasaur-base":{value:n(12)},"datasaur-local":{value:n(31)},"extend-me":{value:n(14)},"object-iterators":{value:n(7)},overrider:{value:n(8)},rectangular:{value:n(3)},"sparse-boolean-array":{value:n(27)},synonomous:{value:n(10)}})},function(e,t,n){"use strict";var i=n(7),r=n(15),o=n(23),s=n(6),a=["BackgroundColor","Color","Font"],l=a.concat(["Halign"]),u=[{prefix:"",props:l.concat(["cellPadding","iconPadding"])},{prefix:"foregroundSelection",props:a},{prefix:"columnHeader",props:l},{prefix:"columnHeaderForegroundSelection",props:a},{prefix:"rowHeader",props:a},{prefix:"rowHeaderForegroundSelection",props:a}],c={rowHeaderCheckboxes:r.rowHeaderCheckboxes,rowHeaderNumbers:r.rowHeaderNumbers,gridBorder:r.gridBorder,gridBorderTop:r.gridBorderTop,gridBorderRight:r.gridBorderRight,gridBorderBottom:r.gridBorderBottom,gridBorderLeft:r.gridBorderLeft,gridRenderer:r.gridRenderer},h=Object.assign({},c,{themeName:r.themeName});u.reduce(function(e,t){return t.props.reduce(function(e,n){return e[n=(n=(n=t.prefix+n).replace("ForegroundSelectionBackground","BackgroundSelection"))[0].toLowerCase()+n.substr(1)]=r[n],e},e)},h);var d=Object.create(null,{default:{value:h}}),f={showRowNumbers:"rowHeaderCheckboxes and rowHeaderNumbers",lineColor:"gridLinesHColor and gridLinesVColor",lineWidth:"gridLinesHWidth and gridLinesVWidth",gridBorder:"gridBorderLeft, gridBorderRight, gridBorderTop, and gridBorderBottom"};function p(e){var t,n,i;if(e&&"object"==typeof e&&!Object.getOwnPropertyNames(e).length&&(e=null),this._theme?(n=[this],t=this._theme,i=this.properties,e||(Object.keys(t).forEach(function(e){e in o||delete i[e]}),Object.keys(c).forEach(function(e){i.var[e]=r[e]})),Object.keys(t).forEach(function(e){delete t[e]})):(n=this.grids,t=r,e=e||"default"),"string"==typeof e){if(!d[e])throw new s('Unknown theme "'+e+'"');e=d[e]}e&&(e.themeName||(e.themeName=void 0),Object.keys(e).forEach(function(t){if(t in o)if(t in c)n.forEach(function(n){n.properties[t]=e[t]});else{var i=f[t];i=i?"Ignoring unexpected pseudo-prop "+t+" in theme object. Use actual props "+i+" instead.":"Ignoring invalid property "+t+" in theme object.",console.warn(i),delete e[t]}}),Object.defineProperties(t,Object.getOwnPropertyDescriptors(e))),n.forEach(function(e){e.repaint()})}var g={initThemeLayer:function(){return this._theme=Object.create(r),Object.create(this._theme,o)},applyTheme:p,getTheme:function(){var e=this._theme,t=e.themeName;return"default"!==t&&Object.getOwnPropertyNames(e).length?t in d?t:e:void 0}};Object.defineProperty(g,"theme",{enumerable:!0,set:g.applyTheme,get:g.getTheme});var v={registerTheme:function(e,t){if("object"==typeof e&&(e=(t=e).themeName),!e)throw new s("Cannot register an anonymous theme.");if("default"===e)throw new s('Cannot register or unregister the "default" theme.');t?(t.themeName=e,d[e]=t):delete d[e]},registerThemes:function(e){e?i(e).each(function(e,t){this.registerTheme(t,e)},this):Object.keys(d).forEach(function(e){this.registerTheme(e)},this)},applyTheme:p};Object.defineProperty(v,"theme",{enumerable:!0,set:p,get:function(){return r}}),e.exports={mixin:g,sharedMixin:v}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",d=1,f=2,p=4,g=1,v=2,m=1,y=2,b=4,w=8,C=16,x=32,S=64,k=128,_=256,D=512,E=30,A="...",M=800,R=16,P=1,O=2,T=1/0,L=9007199254740991,I=1.7976931348623157e308,F=NaN,H=4294967295,N=H-1,j=H>>>1,B=[["ary",k],["bind",m],["bindKey",y],["curry",w],["curryRight",C],["flip",D],["partial",x],["partialRight",S],["rearg",_]],V="[object Arguments]",W="[object Array]",z="[object AsyncFunction]",U="[object Boolean]",Y="[object Date]",G="[object DOMException]",$="[object Error]",K="[object Function]",q="[object GeneratorFunction]",Z="[object Map]",Q="[object Number]",J="[object Null]",X="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",ie="[object String]",re="[object Symbol]",oe="[object Undefined]",se="[object WeakMap]",ae="[object WeakSet]",le="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",he="[object Float64Array]",de="[object Int8Array]",fe="[object Int16Array]",pe="[object Int32Array]",ge="[object Uint8Array]",ve="[object Uint8ClampedArray]",me="[object Uint16Array]",ye="[object Uint32Array]",be=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xe=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,ke=RegExp(xe.source),_e=RegExp(Se.source),De=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,Ae=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,Te=RegExp(Oe.source),Le=/^\s+|\s+$/g,Ie=/^\s+/,Fe=/\s+$/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,Ue=/^[-+]0x[0-9a-f]+$/i,Ye=/^0b[01]+$/i,Ge=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Xe+"]",nt="["+Je+"]",it="\\d+",rt="[\\u2700-\\u27bf]",ot="[a-z\\xdf-\\xf6\\xf8-\\xff]",st="[^\\ud800-\\udfff"+Xe+it+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",at="\\ud83c[\\udffb-\\udfff]",lt="[^\\ud800-\\udfff]",ut="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",ht="[A-Z\\xc0-\\xd6\\xd8-\\xde]",dt="(?:"+ot+"|"+st+")",ft="(?:"+ht+"|"+st+")",pt="(?:"+nt+"|"+at+")"+"?",gt="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[lt,ut,ct].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),vt="(?:"+[rt,ut,ct].join("|")+")"+gt,mt="(?:"+[lt+nt+"?",nt,ut,ct,et].join("|")+")",yt=RegExp("['’]","g"),bt=RegExp(nt,"g"),wt=RegExp(at+"(?="+at+")|"+mt+gt,"g"),Ct=RegExp([ht+"?"+ot+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,ht,"$"].join("|")+")",ft+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,ht+dt,"$"].join("|")+")",ht+"?"+dt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",it,vt].join("|"),"g"),xt=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),St=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_t=-1,Dt={};Dt[ce]=Dt[he]=Dt[de]=Dt[fe]=Dt[pe]=Dt[ge]=Dt[ve]=Dt[me]=Dt[ye]=!0,Dt[V]=Dt[W]=Dt[le]=Dt[U]=Dt[ue]=Dt[Y]=Dt[$]=Dt[K]=Dt[Z]=Dt[Q]=Dt[X]=Dt[te]=Dt[ne]=Dt[ie]=Dt[se]=!1;var Et={};Et[V]=Et[W]=Et[le]=Et[ue]=Et[U]=Et[Y]=Et[ce]=Et[he]=Et[de]=Et[fe]=Et[pe]=Et[Z]=Et[Q]=Et[X]=Et[te]=Et[ne]=Et[ie]=Et[re]=Et[ge]=Et[ve]=Et[me]=Et[ye]=!0,Et[$]=Et[K]=Et[se]=!1;var At={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mt=parseFloat,Rt=parseInt,Pt="object"==typeof e&&e&&e.Object===Object&&e,Ot="object"==typeof self&&self&&self.Object===Object&&self,Tt=Pt||Ot||Function("return this")(),Lt="object"==typeof t&&t&&!t.nodeType&&t,It=Lt&&"object"==typeof i&&i&&!i.nodeType&&i,Ft=It&&It.exports===Lt,Ht=Ft&&Pt.process,Nt=function(){try{var e=It&&It.require&&It.require("util").types;return e||Ht&&Ht.binding&&Ht.binding("util")}catch(e){}}(),jt=Nt&&Nt.isArrayBuffer,Bt=Nt&&Nt.isDate,Vt=Nt&&Nt.isMap,Wt=Nt&&Nt.isRegExp,zt=Nt&&Nt.isSet,Ut=Nt&&Nt.isTypedArray;function Yt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Gt(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(i,s,n(s),e)}return i}function $t(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function Kt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function qt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Zt(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function Qt(e,t){return!!(null==e?0:e.length)&&ln(e,t,0)>-1}function Jt(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function Xt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function en(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function tn(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function nn(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function rn(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var on=dn("length");function sn(e,t,n){var i;return n(e,function(e,n,r){if(t(e,n,r))return i=n,!1}),i}function an(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function ln(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):an(e,cn,n)}function un(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function cn(e){return e!=e}function hn(e,t){var n=null==e?0:e.length;return n?gn(e,t)/n:F}function dn(e){return function(t){return null==t?o:t[e]}}function fn(e){return function(t){return null==e?o:e[t]}}function pn(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function gn(e,t){for(var n,i=-1,r=e.length;++i<r;){var s=t(e[i]);s!==o&&(n=n===o?s:n+s)}return n}function vn(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function mn(e){return function(t){return e(t)}}function yn(e,t){return Xt(t,function(t){return e[t]})}function bn(e,t){return e.has(t)}function wn(e,t){for(var n=-1,i=e.length;++n<i&&ln(t,e[n],0)>-1;);return n}function Cn(e,t){for(var n=e.length;n--&&ln(t,e[n],0)>-1;);return n}var xn=fn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Sn=fn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function kn(e){return"\\"+At[e]}function _n(e){return xt.test(e)}function Dn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function En(e,t){return function(n){return e(t(n))}}function An(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==h||(e[n]=h,o[r++]=n)}return o}function Mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Rn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Pn(e){return _n(e)?function(e){var t=wt.lastIndex=0;for(;wt.test(e);)++t;return t}(e):on(e)}function On(e){return _n(e)?function(e){return e.match(wt)||[]}(e):function(e){return e.split("")}(e)}var Tn=fn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ln=function e(t){var n=(t=null==t?Tt:Ln.defaults(Tt.Object(),t,Ln.pick(Tt,kt))).Array,i=t.Date,r=t.Error,Je=t.Function,Xe=t.Math,et=t.Object,tt=t.RegExp,nt=t.String,it=t.TypeError,rt=n.prototype,ot=Je.prototype,st=et.prototype,at=t["__core-js_shared__"],lt=ot.toString,ut=st.hasOwnProperty,ct=0,ht=function(){var e=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dt=st.toString,ft=lt.call(et),pt=Tt._,gt=tt("^"+lt.call(ut).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=Ft?t.Buffer:o,mt=t.Symbol,wt=t.Uint8Array,xt=vt?vt.allocUnsafe:o,At=En(et.getPrototypeOf,et),Pt=et.create,Ot=st.propertyIsEnumerable,Lt=rt.splice,It=mt?mt.isConcatSpreadable:o,Ht=mt?mt.iterator:o,Nt=mt?mt.toStringTag:o,on=function(){try{var e=No(et,"defineProperty");return e({},"",{}),e}catch(e){}}(),fn=t.clearTimeout!==Tt.clearTimeout&&t.clearTimeout,In=i&&i.now!==Tt.Date.now&&i.now,Fn=t.setTimeout!==Tt.setTimeout&&t.setTimeout,Hn=Xe.ceil,Nn=Xe.floor,jn=et.getOwnPropertySymbols,Bn=vt?vt.isBuffer:o,Vn=t.isFinite,Wn=rt.join,zn=En(et.keys,et),Un=Xe.max,Yn=Xe.min,Gn=i.now,$n=t.parseInt,Kn=Xe.random,qn=rt.reverse,Zn=No(t,"DataView"),Qn=No(t,"Map"),Jn=No(t,"Promise"),Xn=No(t,"Set"),ei=No(t,"WeakMap"),ti=No(et,"create"),ni=ei&&new ei,ii={},ri=cs(Zn),oi=cs(Qn),si=cs(Jn),ai=cs(Xn),li=cs(ei),ui=mt?mt.prototype:o,ci=ui?ui.valueOf:o,hi=ui?ui.toString:o;function di(e){if(Ea(e)&&!va(e)&&!(e instanceof vi)){if(e instanceof gi)return e;if(ut.call(e,"__wrapped__"))return hs(e)}return new gi(e)}var fi=function(){function e(){}return function(t){if(!Da(t))return{};if(Pt)return Pt(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function pi(){}function gi(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function vi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function mi(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function yi(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function bi(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function wi(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new bi;++t<n;)this.add(e[t])}function Ci(e){var t=this.__data__=new yi(e);this.size=t.size}function xi(e,t){var n=va(e),i=!n&&ga(e),r=!n&&!i&&wa(e),o=!n&&!i&&!r&&Ia(e),s=n||i||r||o,a=s?vn(e.length,nt):[],l=a.length;for(var u in e)!t&&!ut.call(e,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Yo(u,l))||a.push(u);return a}function Si(e){var t=e.length;return t?e[wr(0,t-1)]:o}function ki(e,t){return as(to(e),Ti(t,0,e.length))}function _i(e){return as(to(e))}function Di(e,t,n){(n===o||da(e[t],n))&&(n!==o||t in e)||Pi(e,t,n)}function Ei(e,t,n){var i=e[t];ut.call(e,t)&&da(i,n)&&(n!==o||t in e)||Pi(e,t,n)}function Ai(e,t){for(var n=e.length;n--;)if(da(e[n][0],t))return n;return-1}function Mi(e,t,n,i){return Ni(e,function(e,r,o){t(i,e,n(e),o)}),i}function Ri(e,t){return e&&no(t,il(t),e)}function Pi(e,t,n){"__proto__"==t&&on?on(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Oi(e,t){for(var i=-1,r=t.length,s=n(r),a=null==e;++i<r;)s[i]=a?o:Ja(e,t[i]);return s}function Ti(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function Li(e,t,n,i,r,s){var a,l=t&d,u=t&f,c=t&p;if(n&&(a=r?n(e,i,r,s):n(e)),a!==o)return a;if(!Da(e))return e;var h=va(e);if(h){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ut.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return to(e,a)}else{var g=Vo(e),v=g==K||g==q;if(wa(e))return qr(e,l);if(g==X||g==V||v&&!r){if(a=u||v?{}:zo(e),!l)return u?function(e,t){return no(e,Bo(e),t)}(e,function(e,t){return e&&no(t,rl(t),e)}(a,e)):function(e,t){return no(e,jo(e),t)}(e,Ri(a,e))}else{if(!Et[g])return r?e:{};a=function(e,t,n){var i=e.constructor;switch(t){case le:return Zr(e);case U:case Y:return new i(+e);case ue:return function(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ce:case he:case de:case fe:case pe:case ge:case ve:case me:case ye:return Qr(e,n);case Z:return new i;case Q:case ie:return new i(e);case te:return function(e){var t=new e.constructor(e.source,ze.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ne:return new i;case re:return function(e){return ci?et(ci.call(e)):{}}(e)}}(e,g,l)}}s||(s=new Ci);var m=s.get(e);if(m)return m;if(s.set(e,a),Oa(e))return e.forEach(function(i){a.add(Li(i,t,n,i,e,s))}),a;if(Aa(e))return e.forEach(function(i,r){a.set(r,Li(i,t,n,r,e,s))}),a;var y=h?o:(c?u?Po:Ro:u?rl:il)(e);return $t(y||e,function(i,r){y&&(i=e[r=i]),Ei(a,r,Li(i,t,n,r,e,s))}),a}function Ii(e,t,n){var i=n.length;if(null==e)return!i;for(e=et(e);i--;){var r=n[i],s=t[r],a=e[r];if(a===o&&!(r in e)||!s(a))return!1}return!0}function Fi(e,t,n){if("function"!=typeof e)throw new it(l);return is(function(){e.apply(o,n)},t)}function Hi(e,t,n,i){var r=-1,o=Qt,a=!0,l=e.length,u=[],c=t.length;if(!l)return u;n&&(t=Xt(t,mn(n))),i?(o=Jt,a=!1):t.length>=s&&(o=bn,a=!1,t=new wi(t));e:for(;++r<l;){var h=e[r],d=null==n?h:n(h);if(h=i||0!==h?h:0,a&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;u.push(h)}else o(t,d,i)||u.push(h)}return u}di.templateSettings={escape:De,evaluate:Ee,interpolate:Ae,variable:"",imports:{_:di}},di.prototype=pi.prototype,di.prototype.constructor=di,gi.prototype=fi(pi.prototype),gi.prototype.constructor=gi,vi.prototype=fi(pi.prototype),vi.prototype.constructor=vi,mi.prototype.clear=function(){this.__data__=ti?ti(null):{},this.size=0},mi.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},mi.prototype.get=function(e){var t=this.__data__;if(ti){var n=t[e];return n===u?o:n}return ut.call(t,e)?t[e]:o},mi.prototype.has=function(e){var t=this.__data__;return ti?t[e]!==o:ut.call(t,e)},mi.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ti&&t===o?u:t,this},yi.prototype.clear=function(){this.__data__=[],this.size=0},yi.prototype.delete=function(e){var t=this.__data__,n=Ai(t,e);return!(n<0||(n==t.length-1?t.pop():Lt.call(t,n,1),--this.size,0))},yi.prototype.get=function(e){var t=this.__data__,n=Ai(t,e);return n<0?o:t[n][1]},yi.prototype.has=function(e){return Ai(this.__data__,e)>-1},yi.prototype.set=function(e,t){var n=this.__data__,i=Ai(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},bi.prototype.clear=function(){this.size=0,this.__data__={hash:new mi,map:new(Qn||yi),string:new mi}},bi.prototype.delete=function(e){var t=Fo(this,e).delete(e);return this.size-=t?1:0,t},bi.prototype.get=function(e){return Fo(this,e).get(e)},bi.prototype.has=function(e){return Fo(this,e).has(e)},bi.prototype.set=function(e,t){var n=Fo(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},wi.prototype.add=wi.prototype.push=function(e){return this.__data__.set(e,u),this},wi.prototype.has=function(e){return this.__data__.has(e)},Ci.prototype.clear=function(){this.__data__=new yi,this.size=0},Ci.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ci.prototype.get=function(e){return this.__data__.get(e)},Ci.prototype.has=function(e){return this.__data__.has(e)},Ci.prototype.set=function(e,t){var n=this.__data__;if(n instanceof yi){var i=n.__data__;if(!Qn||i.length<s-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new bi(i)}return n.set(e,t),this.size=n.size,this};var Ni=oo(Gi),ji=oo($i,!0);function Bi(e,t){var n=!0;return Ni(e,function(e,i,r){return n=!!t(e,i,r)}),n}function Vi(e,t,n){for(var i=-1,r=e.length;++i<r;){var s=e[i],a=t(s);if(null!=a&&(l===o?a==a&&!La(a):n(a,l)))var l=a,u=s}return u}function Wi(e,t){var n=[];return Ni(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function zi(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=Uo),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?zi(a,t-1,n,i,r):en(r,a):i||(r[r.length]=a)}return r}var Ui=so(),Yi=so(!0);function Gi(e,t){return e&&Ui(e,t,il)}function $i(e,t){return e&&Yi(e,t,il)}function Ki(e,t){return Zt(t,function(t){return Sa(e[t])})}function qi(e,t){for(var n=0,i=(t=Yr(t,e)).length;null!=e&&n<i;)e=e[us(t[n++])];return n&&n==i?e:o}function Zi(e,t,n){var i=t(e);return va(e)?i:en(i,n(e))}function Qi(e){return null==e?e===o?oe:J:Nt&&Nt in et(e)?function(e){var t=ut.call(e,Nt),n=e[Nt];try{e[Nt]=o;var i=!0}catch(e){}var r=dt.call(e);return i&&(t?e[Nt]=n:delete e[Nt]),r}(e):function(e){return dt.call(e)}(e)}function Ji(e,t){return e>t}function Xi(e,t){return null!=e&&ut.call(e,t)}function er(e,t){return null!=e&&t in et(e)}function tr(e,t,i){for(var r=i?Jt:Qt,s=e[0].length,a=e.length,l=a,u=n(a),c=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Xt(d,mn(t))),c=Yn(d.length,c),u[l]=!i&&(t||s>=120&&d.length>=120)?new wi(l&&d):o}d=e[0];var f=-1,p=u[0];e:for(;++f<s&&h.length<c;){var g=d[f],v=t?t(g):g;if(g=i||0!==g?g:0,!(p?bn(p,v):r(h,v,i))){for(l=a;--l;){var m=u[l];if(!(m?bn(m,v):r(e[l],v,i)))continue e}p&&p.push(v),h.push(g)}}return h}function nr(e,t,n){var i=null==(e=es(e,t=Yr(t,e)))?e:e[us(xs(t))];return null==i?o:Yt(i,e,n)}function ir(e){return Ea(e)&&Qi(e)==V}function rr(e,t,n,i,r){return e===t||(null==e||null==t||!Ea(e)&&!Ea(t)?e!=e&&t!=t:function(e,t,n,i,r,s){var a=va(e),l=va(t),u=a?W:Vo(e),c=l?W:Vo(t),h=(u=u==V?X:u)==X,d=(c=c==V?X:c)==X,f=u==c;if(f&&wa(e)){if(!wa(t))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Ci),a||Ia(e)?Ao(e,t,n,i,r,s):function(e,t,n,i,r,o,s){switch(n){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case le:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case U:case Y:case Q:return da(+e,+t);case $:return e.name==t.name&&e.message==t.message;case te:case ie:return e==t+"";case Z:var a=Dn;case ne:var l=i&g;if(a||(a=Mn),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;i|=v,s.set(e,t);var c=Ao(a(e),a(t),i,r,o,s);return s.delete(e),c;case re:if(ci)return ci.call(e)==ci.call(t)}return!1}(e,t,u,n,i,r,s);if(!(n&g)){var p=h&&ut.call(e,"__wrapped__"),m=d&&ut.call(t,"__wrapped__");if(p||m){var y=p?e.value():e,b=m?t.value():t;return s||(s=new Ci),r(y,b,n,i,s)}}return!!f&&(s||(s=new Ci),function(e,t,n,i,r,s){var a=n&g,l=Ro(e),u=l.length,c=Ro(t).length;if(u!=c&&!a)return!1;for(var h=u;h--;){var d=l[h];if(!(a?d in t:ut.call(t,d)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var p=!0;s.set(e,t),s.set(t,e);for(var v=a;++h<u;){d=l[h];var m=e[d],y=t[d];if(i)var b=a?i(y,m,d,t,e,s):i(m,y,d,e,t,s);if(!(b===o?m===y||r(m,y,n,i,s):b)){p=!1;break}v||(v="constructor"==d)}if(p&&!v){var w=e.constructor,C=t.constructor;w!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof C&&C instanceof C)&&(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,i,r,s))}(e,t,n,i,rr,r))}function or(e,t,n,i){var r=n.length,s=r,a=!i;if(null==e)return!s;for(e=et(e);r--;){var l=n[r];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<s;){var u=(l=n[r])[0],c=e[u],h=l[1];if(a&&l[2]){if(c===o&&!(u in e))return!1}else{var d=new Ci;if(i)var f=i(c,h,u,e,t,d);if(!(f===o?rr(h,c,g|v,i,d):f))return!1}}return!0}function sr(e){return!(!Da(e)||function(e){return!!ht&&ht in e}(e))&&(Sa(e)?gt:Ge).test(cs(e))}function ar(e){return"function"==typeof e?e:null==e?Ml:"object"==typeof e?va(e)?fr(e[0],e[1]):dr(e):Nl(e)}function lr(e){if(!Zo(e))return zn(e);var t=[];for(var n in et(e))ut.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ur(e){if(!Da(e))return function(e){var t=[];if(null!=e)for(var n in et(e))t.push(n);return t}(e);var t=Zo(e),n=[];for(var i in e)("constructor"!=i||!t&&ut.call(e,i))&&n.push(i);return n}function cr(e,t){return e<t}function hr(e,t){var i=-1,r=ya(e)?n(e.length):[];return Ni(e,function(e,n,o){r[++i]=t(e,n,o)}),r}function dr(e){var t=Ho(e);return 1==t.length&&t[0][2]?Jo(t[0][0],t[0][1]):function(n){return n===e||or(n,e,t)}}function fr(e,t){return $o(e)&&Qo(t)?Jo(us(e),t):function(n){var i=Ja(n,e);return i===o&&i===t?Xa(n,e):rr(t,i,g|v)}}function pr(e,t,n,i,r){e!==t&&Ui(t,function(s,a){if(Da(s))r||(r=new Ci),function(e,t,n,i,r,s,a){var l=ts(e,n),u=ts(t,n),c=a.get(u);if(c)Di(e,n,c);else{var h=s?s(l,u,n+"",e,t,a):o,d=h===o;if(d){var f=va(u),p=!f&&wa(u),g=!f&&!p&&Ia(u);h=u,f||p||g?va(l)?h=l:ba(l)?h=to(l):p?(d=!1,h=qr(u,!0)):g?(d=!1,h=Qr(u,!0)):h=[]:Ra(u)||ga(u)?(h=l,ga(l)?h=za(l):Da(l)&&!Sa(l)||(h=zo(u))):d=!1}d&&(a.set(u,h),r(h,u,i,s,a),a.delete(u)),Di(e,n,h)}}(e,t,a,n,pr,i,r);else{var l=i?i(ts(e,a),s,a+"",e,t,r):o;l===o&&(l=s),Di(e,a,l)}},rl)}function gr(e,t){var n=e.length;if(n)return Yo(t+=t<0?n:0,n)?e[t]:o}function vr(e,t,n){var i=-1;return t=Xt(t.length?t:[Ml],mn(Io())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(hr(e,function(e,n,r){return{criteria:Xt(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return function(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;++i<s;){var l=Jr(r[i],o[i]);if(l){if(i>=a)return l;var u=n[i];return l*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)})}function mr(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=qi(e,s);n(a,s)&&_r(o,Yr(s,e),a)}return o}function yr(e,t,n,i){var r=i?un:ln,o=-1,s=t.length,a=e;for(e===t&&(t=to(t)),n&&(a=Xt(e,mn(n)));++o<s;)for(var l=0,u=t[o],c=n?n(u):u;(l=r(a,c,l,i))>-1;)a!==e&&Lt.call(a,l,1),Lt.call(e,l,1);return e}function br(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;Yo(r)?Lt.call(e,r,1):Hr(e,r)}}return e}function wr(e,t){return e+Nn(Kn()*(t-e+1))}function Cr(e,t){var n="";if(!e||t<1||t>L)return n;do{t%2&&(n+=e),(t=Nn(t/2))&&(e+=e)}while(t);return n}function xr(e,t){return rs(Xo(e,t,Ml),e+"")}function Sr(e){return Si(dl(e))}function kr(e,t){var n=dl(e);return as(n,Ti(t,0,n.length))}function _r(e,t,n,i){if(!Da(e))return e;for(var r=-1,s=(t=Yr(t,e)).length,a=s-1,l=e;null!=l&&++r<s;){var u=us(t[r]),c=n;if(r!=a){var h=l[u];(c=i?i(h,u,l):o)===o&&(c=Da(h)?h:Yo(t[r+1])?[]:{})}Ei(l,u,c),l=l[u]}return e}var Dr=ni?function(e,t){return ni.set(e,t),e}:Ml,Er=on?function(e,t){return on(e,"toString",{configurable:!0,enumerable:!1,value:Dl(t),writable:!0})}:Ml;function Ar(e){return as(dl(e))}function Mr(e,t,i){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(i=i>o?o:i)<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var s=n(o);++r<o;)s[r]=e[r+t];return s}function Rr(e,t){var n;return Ni(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function Pr(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=j){for(;i<r;){var o=i+r>>>1,s=e[o];null!==s&&!La(s)&&(n?s<=t:s<t)?i=o+1:r=o}return r}return Or(e,t,Ml,n)}function Or(e,t,n,i){t=n(t);for(var r=0,s=null==e?0:e.length,a=t!=t,l=null===t,u=La(t),c=t===o;r<s;){var h=Nn((r+s)/2),d=n(e[h]),f=d!==o,p=null===d,g=d==d,v=La(d);if(a)var m=i||g;else m=c?g&&(i||f):l?g&&f&&(i||!p):u?g&&f&&!p&&(i||!v):!p&&!v&&(i?d<=t:d<t);m?r=h+1:s=h}return Yn(s,N)}function Tr(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!da(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function Lr(e){return"number"==typeof e?e:La(e)?F:+e}function Ir(e){if("string"==typeof e)return e;if(va(e))return Xt(e,Ir)+"";if(La(e))return hi?hi.call(e):"";var t=e+"";return"0"==t&&1/e==-T?"-0":t}function Fr(e,t,n){var i=-1,r=Qt,o=e.length,a=!0,l=[],u=l;if(n)a=!1,r=Jt;else if(o>=s){var c=t?null:xo(e);if(c)return Mn(c);a=!1,r=bn,u=new wi}else u=t?[]:l;e:for(;++i<o;){var h=e[i],d=t?t(h):h;if(h=n||0!==h?h:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),l.push(h)}else r(u,d,n)||(u!==l&&u.push(d),l.push(h))}return l}function Hr(e,t){return null==(e=es(e,t=Yr(t,e)))||delete e[us(xs(t))]}function Nr(e,t,n,i){return _r(e,t,n(qi(e,t)),i)}function jr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?Mr(e,i?0:o,i?o+1:r):Mr(e,i?o+1:0,i?r:o)}function Br(e,t){var n=e;return n instanceof vi&&(n=n.value()),tn(t,function(e,t){return t.func.apply(t.thisArg,en([e],t.args))},n)}function Vr(e,t,i){var r=e.length;if(r<2)return r?Fr(e[0]):[];for(var o=-1,s=n(r);++o<r;)for(var a=e[o],l=-1;++l<r;)l!=o&&(s[o]=Hi(s[o]||a,e[l],t,i));return Fr(zi(s,1),t,i)}function Wr(e,t,n){for(var i=-1,r=e.length,s=t.length,a={};++i<r;){var l=i<s?t[i]:o;n(a,e[i],l)}return a}function zr(e){return ba(e)?e:[]}function Ur(e){return"function"==typeof e?e:Ml}function Yr(e,t){return va(e)?e:$o(e,t)?[e]:ls(Ua(e))}var Gr=xr;function $r(e,t,n){var i=e.length;return n=n===o?i:n,!t&&n>=i?e:Mr(e,t,n)}var Kr=fn||function(e){return Tt.clearTimeout(e)};function qr(e,t){if(t)return e.slice();var n=e.length,i=xt?xt(n):new e.constructor(n);return e.copy(i),i}function Zr(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function Qr(e,t){var n=t?Zr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Jr(e,t){if(e!==t){var n=e!==o,i=null===e,r=e==e,s=La(e),a=t!==o,l=null===t,u=t==t,c=La(t);if(!l&&!c&&!s&&e>t||s&&a&&u&&!l&&!c||i&&a&&u||!n&&u||!r)return 1;if(!i&&!s&&!c&&e<t||c&&n&&r&&!i&&!s||l&&n&&r||!a&&r||!u)return-1}return 0}function Xr(e,t,i,r){for(var o=-1,s=e.length,a=i.length,l=-1,u=t.length,c=Un(s-a,0),h=n(u+c),d=!r;++l<u;)h[l]=t[l];for(;++o<a;)(d||o<s)&&(h[i[o]]=e[o]);for(;c--;)h[l++]=e[o++];return h}function eo(e,t,i,r){for(var o=-1,s=e.length,a=-1,l=i.length,u=-1,c=t.length,h=Un(s-l,0),d=n(h+c),f=!r;++o<h;)d[o]=e[o];for(var p=o;++u<c;)d[p+u]=t[u];for(;++a<l;)(f||o<s)&&(d[p+i[a]]=e[o++]);return d}function to(e,t){var i=-1,r=e.length;for(t||(t=n(r));++i<r;)t[i]=e[i];return t}function no(e,t,n,i){var r=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],u=i?i(n[l],e[l],l,n,e):o;u===o&&(u=e[l]),r?Pi(n,l,u):Ei(n,l,u)}return n}function io(e,t){return function(n,i){var r=va(n)?Gt:Mi,o=t?t():{};return r(n,e,Io(i,2),o)}}function ro(e){return xr(function(t,n){var i=-1,r=n.length,s=r>1?n[r-1]:o,a=r>2?n[2]:o;for(s=e.length>3&&"function"==typeof s?(r--,s):o,a&&Go(n[0],n[1],a)&&(s=r<3?o:s,r=1),t=et(t);++i<r;){var l=n[i];l&&e(t,l,i,s)}return t})}function oo(e,t){return function(n,i){if(null==n)return n;if(!ya(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=et(n);(t?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function so(e){return function(t,n,i){for(var r=-1,o=et(t),s=i(t),a=s.length;a--;){var l=s[e?a:++r];if(!1===n(o[l],l,o))break}return t}}function ao(e){return function(t){var n=_n(t=Ua(t))?On(t):o,i=n?n[0]:t.charAt(0),r=n?$r(n,1).join(""):t.slice(1);return i[e]()+r}}function lo(e){return function(t){return tn(Sl(gl(t).replace(yt,"")),e,"")}}function uo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=fi(e.prototype),i=e.apply(n,t);return Da(i)?i:n}}function co(e){return function(t,n,i){var r=et(t);if(!ya(t)){var s=Io(n,3);t=il(t),n=function(e){return s(r[e],e,r)}}var a=e(t,n,i);return a>-1?r[s?t[a]:a]:o}}function ho(e){return Mo(function(t){var n=t.length,i=n,r=gi.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new it(l);if(r&&!a&&"wrapper"==To(s))var a=new gi([],!0)}for(i=a?i:n;++i<n;){var u=To(s=t[i]),c="wrapper"==u?Oo(s):o;a=c&&Ko(c[0])&&c[1]==(k|w|x|_)&&!c[4].length&&1==c[9]?a[To(c[0])].apply(a,c[3]):1==s.length&&Ko(s)?a[u]():a.thru(s)}return function(){var e=arguments,i=e[0];if(a&&1==e.length&&va(i))return a.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}})}function fo(e,t,i,r,s,a,l,u,c,h){var d=t&k,f=t&m,p=t&y,g=t&(w|C),v=t&D,b=p?o:uo(e);return function m(){for(var y=arguments.length,w=n(y),C=y;C--;)w[C]=arguments[C];if(g)var x=Lo(m),S=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}(w,x);if(r&&(w=Xr(w,r,s,g)),a&&(w=eo(w,a,l,g)),y-=S,g&&y<h){var k=An(w,x);return wo(e,t,fo,m.placeholder,i,w,k,u,c,h-y)}var _=f?i:this,D=p?_[e]:e;return y=w.length,u?w=function(e,t){for(var n=e.length,i=Yn(t.length,n),r=to(e);i--;){var s=t[i];e[i]=Yo(s,n)?r[s]:o}return e}(w,u):v&&y>1&&w.reverse(),d&&c<y&&(w.length=c),this&&this!==Tt&&this instanceof m&&(D=b||uo(D)),D.apply(_,w)}}function po(e,t){return function(n,i){return function(e,t,n,i){return Gi(e,function(e,r,o){t(i,n(e),r,o)}),i}(n,e,t(i),{})}}function go(e,t){return function(n,i){var r;if(n===o&&i===o)return t;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=Ir(n),i=Ir(i)):(n=Lr(n),i=Lr(i)),r=e(n,i)}return r}}function vo(e){return Mo(function(t){return t=Xt(t,mn(Io())),xr(function(n){var i=this;return e(t,function(e){return Yt(e,i,n)})})})}function mo(e,t){var n=(t=t===o?" ":Ir(t)).length;if(n<2)return n?Cr(t,e):t;var i=Cr(t,Hn(e/Pn(t)));return _n(t)?$r(On(i),0,e).join(""):i.slice(0,e)}function yo(e){return function(t,i,r){return r&&"number"!=typeof r&&Go(t,i,r)&&(i=r=o),t=ja(t),i===o?(i=t,t=0):i=ja(i),function(e,t,i,r){for(var o=-1,s=Un(Hn((t-e)/(i||1)),0),a=n(s);s--;)a[r?s:++o]=e,e+=i;return a}(t,i,r=r===o?t<i?1:-1:ja(r),e)}}function bo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Wa(t),n=Wa(n)),e(t,n)}}function wo(e,t,n,i,r,s,a,l,u,c){var h=t&w;t|=h?x:S,(t&=~(h?S:x))&b||(t&=~(m|y));var d=[e,t,r,h?s:o,h?a:o,h?o:s,h?o:a,l,u,c],f=n.apply(o,d);return Ko(e)&&ns(f,d),f.placeholder=i,os(f,e,t)}function Co(e){var t=Xe[e];return function(e,n){if(e=Wa(e),n=null==n?0:Yn(Ba(n),292)){var i=(Ua(e)+"e").split("e");return+((i=(Ua(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var xo=Xn&&1/Mn(new Xn([,-0]))[1]==T?function(e){return new Xn(e)}:Ll;function So(e){return function(t){var n=Vo(t);return n==Z?Dn(t):n==ne?Rn(t):function(e,t){return Xt(t,function(t){return[t,e[t]]})}(t,e(t))}}function ko(e,t,i,r,s,a,u,c){var d=t&y;if(!d&&"function"!=typeof e)throw new it(l);var f=r?r.length:0;if(f||(t&=~(x|S),r=s=o),u=u===o?u:Un(Ba(u),0),c=c===o?c:Ba(c),f-=s?s.length:0,t&S){var p=r,g=s;r=s=o}var v=d?o:Oo(e),D=[e,t,i,r,s,p,g,a,u,c];if(v&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<(m|y|k),s=i==k&&n==w||i==k&&n==_&&e[7].length<=t[8]||i==(k|_)&&t[7].length<=t[8]&&n==w;if(!o&&!s)return e;i&m&&(e[2]=t[2],r|=n&m?0:b);var a=t[3];if(a){var l=e[3];e[3]=l?Xr(l,a,t[4]):a,e[4]=l?An(e[3],h):t[4]}(a=t[5])&&(l=e[5],e[5]=l?eo(l,a,t[6]):a,e[6]=l?An(e[5],h):t[6]),(a=t[7])&&(e[7]=a),i&k&&(e[8]=null==e[8]?t[8]:Yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(D,v),e=D[0],t=D[1],i=D[2],r=D[3],s=D[4],!(c=D[9]=D[9]===o?d?0:e.length:Un(D[9]-f,0))&&t&(w|C)&&(t&=~(w|C)),t&&t!=m)E=t==w||t==C?function(e,t,i){var r=uo(e);return function s(){for(var a=arguments.length,l=n(a),u=a,c=Lo(s);u--;)l[u]=arguments[u];var h=a<3&&l[0]!==c&&l[a-1]!==c?[]:An(l,c);return(a-=h.length)<i?wo(e,t,fo,s.placeholder,o,l,h,o,o,i-a):Yt(this&&this!==Tt&&this instanceof s?r:e,this,l)}}(e,t,c):t!=x&&t!=(m|x)||s.length?fo.apply(o,D):function(e,t,i,r){var o=t&m,s=uo(e);return function t(){for(var a=-1,l=arguments.length,u=-1,c=r.length,h=n(c+l),d=this&&this!==Tt&&this instanceof t?s:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++a];return Yt(d,o?i:this,h)}}(e,t,i,r);else var E=function(e,t,n){var i=t&m,r=uo(e);return function t(){return(this&&this!==Tt&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,i);return os((v?Dr:ns)(E,D),e,t)}function _o(e,t,n,i){return e===o||da(e,st[n])&&!ut.call(i,n)?t:e}function Do(e,t,n,i,r,s){return Da(e)&&Da(t)&&(s.set(t,e),pr(e,t,o,Do,s),s.delete(t)),e}function Eo(e){return Ra(e)?o:e}function Ao(e,t,n,i,r,s){var a=n&g,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(e);if(c&&s.get(t))return c==t;var h=-1,d=!0,f=n&v?new wi:o;for(s.set(e,t),s.set(t,e);++h<l;){var p=e[h],m=t[h];if(i)var y=a?i(m,p,h,t,e,s):i(p,m,h,e,t,s);if(y!==o){if(y)continue;d=!1;break}if(f){if(!rn(t,function(e,t){if(!bn(f,t)&&(p===e||r(p,e,n,i,s)))return f.push(t)})){d=!1;break}}else if(p!==m&&!r(p,m,n,i,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Mo(e){return rs(Xo(e,o,ms),e+"")}function Ro(e){return Zi(e,il,jo)}function Po(e){return Zi(e,rl,Bo)}var Oo=ni?function(e){return ni.get(e)}:Ll;function To(e){for(var t=e.name+"",n=ii[t],i=ut.call(ii,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Lo(e){return(ut.call(di,"placeholder")?di:e).placeholder}function Io(){var e=di.iteratee||Rl;return e=e===Rl?ar:e,arguments.length?e(arguments[0],arguments[1]):e}function Fo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ho(e){for(var t=il(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Qo(r)]}return t}function No(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return sr(n)?n:o}var jo=jn?function(e){return null==e?[]:(e=et(e),Zt(jn(e),function(t){return Ot.call(e,t)}))}:Vl,Bo=jn?function(e){for(var t=[];e;)en(t,jo(e)),e=At(e);return t}:Vl,Vo=Qi;function Wo(e,t,n){for(var i=-1,r=(t=Yr(t,e)).length,o=!1;++i<r;){var s=us(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&_a(r)&&Yo(s,r)&&(va(e)||ga(e))}function zo(e){return"function"!=typeof e.constructor||Zo(e)?{}:fi(At(e))}function Uo(e){return va(e)||ga(e)||!!(It&&e&&e[It])}function Yo(e,t){var n=typeof e;return!!(t=null==t?L:t)&&("number"==n||"symbol"!=n&&Ke.test(e))&&e>-1&&e%1==0&&e<t}function Go(e,t,n){if(!Da(n))return!1;var i=typeof t;return!!("number"==i?ya(n)&&Yo(t,n.length):"string"==i&&t in n)&&da(n[t],e)}function $o(e,t){if(va(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!La(e))||Re.test(e)||!Me.test(e)||null!=t&&e in et(t)}function Ko(e){var t=To(e),n=di[t];if("function"!=typeof n||!(t in vi.prototype))return!1;if(e===n)return!0;var i=Oo(n);return!!i&&e===i[0]}(Zn&&Vo(new Zn(new ArrayBuffer(1)))!=ue||Qn&&Vo(new Qn)!=Z||Jn&&"[object Promise]"!=Vo(Jn.resolve())||Xn&&Vo(new Xn)!=ne||ei&&Vo(new ei)!=se)&&(Vo=function(e){var t=Qi(e),n=t==X?e.constructor:o,i=n?cs(n):"";if(i)switch(i){case ri:return ue;case oi:return Z;case si:return"[object Promise]";case ai:return ne;case li:return se}return t});var qo=at?Sa:Wl;function Zo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||st)}function Qo(e){return e==e&&!Da(e)}function Jo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in et(n))}}function Xo(e,t,i){return t=Un(t===o?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=Un(r.length-t,0),a=n(s);++o<s;)a[o]=r[t+o];o=-1;for(var l=n(t+1);++o<t;)l[o]=r[o];return l[t]=i(a),Yt(e,this,l)}}function es(e,t){return t.length<2?e:qi(e,Mr(t,0,-1))}function ts(e,t){if("__proto__"!=t)return e[t]}var ns=ss(Dr),is=Fn||function(e,t){return Tt.setTimeout(e,t)},rs=ss(Er);function os(e,t,n){var i=t+"";return rs(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(He,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return $t(B,function(n){var i="_."+n[0];t&n[1]&&!Qt(e,i)&&e.push(i)}),e.sort()}(function(e){var t=e.match(Ne);return t?t[1].split(je):[]}(i),n)))}function ss(e){var t=0,n=0;return function(){var i=Gn(),r=R-(i-n);if(n=i,r>0){if(++t>=M)return arguments[0]}else t=0;return e.apply(o,arguments)}}function as(e,t){var n=-1,i=e.length,r=i-1;for(t=t===o?i:t;++n<t;){var s=wr(n,r),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var ls=function(e){var t=sa(e,function(e){return n.size===c&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Pe,function(e,n,i,r){t.push(i?r.replace(Ve,"$1"):n||e)}),t});function us(e){if("string"==typeof e||La(e))return e;var t=e+"";return"0"==t&&1/e==-T?"-0":t}function cs(e){if(null!=e){try{return lt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function hs(e){if(e instanceof vi)return e.clone();var t=new gi(e.__wrapped__,e.__chain__);return t.__actions__=to(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ds=xr(function(e,t){return ba(e)?Hi(e,zi(t,1,ba,!0)):[]}),fs=xr(function(e,t){var n=xs(t);return ba(n)&&(n=o),ba(e)?Hi(e,zi(t,1,ba,!0),Io(n,2)):[]}),ps=xr(function(e,t){var n=xs(t);return ba(n)&&(n=o),ba(e)?Hi(e,zi(t,1,ba,!0),o,n):[]});function gs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:Ba(n);return r<0&&(r=Un(i+r,0)),an(e,Io(t,3),r)}function vs(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==o&&(r=Ba(n),r=n<0?Un(i+r,0):Yn(r,i-1)),an(e,Io(t,3),r,!0)}function ms(e){return null!=e&&e.length?zi(e,1):[]}function ys(e){return e&&e.length?e[0]:o}var bs=xr(function(e){var t=Xt(e,zr);return t.length&&t[0]===e[0]?tr(t):[]}),ws=xr(function(e){var t=xs(e),n=Xt(e,zr);return t===xs(n)?t=o:n.pop(),n.length&&n[0]===e[0]?tr(n,Io(t,2)):[]}),Cs=xr(function(e){var t=xs(e),n=Xt(e,zr);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?tr(n,o,t):[]});function xs(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Ss=xr(ks);function ks(e,t){return e&&e.length&&t&&t.length?yr(e,t):e}var _s=Mo(function(e,t){var n=null==e?0:e.length,i=Oi(e,t);return br(e,Xt(t,function(e){return Yo(e,n)?+e:e}).sort(Jr)),i});function Ds(e){return null==e?e:qn.call(e)}var Es=xr(function(e){return Fr(zi(e,1,ba,!0))}),As=xr(function(e){var t=xs(e);return ba(t)&&(t=o),Fr(zi(e,1,ba,!0),Io(t,2))}),Ms=xr(function(e){var t=xs(e);return t="function"==typeof t?t:o,Fr(zi(e,1,ba,!0),o,t)});function Rs(e){if(!e||!e.length)return[];var t=0;return e=Zt(e,function(e){if(ba(e))return t=Un(e.length,t),!0}),vn(t,function(t){return Xt(e,dn(t))})}function Ps(e,t){if(!e||!e.length)return[];var n=Rs(e);return null==t?n:Xt(n,function(e){return Yt(t,o,e)})}var Os=xr(function(e,t){return ba(e)?Hi(e,t):[]}),Ts=xr(function(e){return Vr(Zt(e,ba))}),Ls=xr(function(e){var t=xs(e);return ba(t)&&(t=o),Vr(Zt(e,ba),Io(t,2))}),Is=xr(function(e){var t=xs(e);return t="function"==typeof t?t:o,Vr(Zt(e,ba),o,t)}),Fs=xr(Rs);var Hs=xr(function(e){var t=e.length,n=t>1?e[t-1]:o;return Ps(e,n="function"==typeof n?(e.pop(),n):o)});function Ns(e){var t=di(e);return t.__chain__=!0,t}function js(e,t){return t(e)}var Bs=Mo(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return Oi(t,e)};return!(t>1||this.__actions__.length)&&i instanceof vi&&Yo(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:js,args:[r],thisArg:o}),new gi(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(o),e})):this.thru(r)});var Vs=io(function(e,t,n){ut.call(e,n)?++e[n]:Pi(e,n,1)});var Ws=co(gs),zs=co(vs);function Us(e,t){return(va(e)?$t:Ni)(e,Io(t,3))}function Ys(e,t){return(va(e)?Kt:ji)(e,Io(t,3))}var Gs=io(function(e,t,n){ut.call(e,n)?e[n].push(t):Pi(e,n,[t])});var $s=xr(function(e,t,i){var r=-1,o="function"==typeof t,s=ya(e)?n(e.length):[];return Ni(e,function(e){s[++r]=o?Yt(t,e,i):nr(e,t,i)}),s}),Ks=io(function(e,t,n){Pi(e,n,t)});function qs(e,t){return(va(e)?Xt:hr)(e,Io(t,3))}var Zs=io(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});var Qs=xr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Go(e,t[0],t[1])?t=[]:n>2&&Go(t[0],t[1],t[2])&&(t=[t[0]]),vr(e,zi(t,1),[])}),Js=In||function(){return Tt.Date.now()};function Xs(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,ko(e,k,o,o,o,o,t)}function ea(e,t){var n;if("function"!=typeof t)throw new it(l);return e=Ba(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var ta=xr(function(e,t,n){var i=m;if(n.length){var r=An(n,Lo(ta));i|=x}return ko(e,i,t,n,r)}),na=xr(function(e,t,n){var i=m|y;if(n.length){var r=An(n,Lo(na));i|=x}return ko(t,i,e,n,r)});function ia(e,t,n){var i,r,s,a,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new it(l);function g(t){var n=i,s=r;return i=r=o,h=t,a=e.apply(s,n)}function v(e){var n=e-c;return c===o||n>=t||n<0||f&&e-h>=s}function m(){var e=Js();if(v(e))return y(e);u=is(m,function(e){var n=t-(e-c);return f?Yn(n,s-(e-h)):n}(e))}function y(e){return u=o,p&&i?g(e):(i=r=o,a)}function b(){var e=Js(),n=v(e);if(i=arguments,r=this,c=e,n){if(u===o)return function(e){return h=e,u=is(m,t),d?g(e):a}(c);if(f)return u=is(m,t),g(c)}return u===o&&(u=is(m,t)),a}return t=Wa(t)||0,Da(n)&&(d=!!n.leading,s=(f="maxWait"in n)?Un(Wa(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==o&&Kr(u),h=0,i=c=r=u=o},b.flush=function(){return u===o?a:y(Js())},b}var ra=xr(function(e,t){return Fi(e,1,t)}),oa=xr(function(e,t,n){return Fi(e,Wa(t)||0,n)});function sa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(l);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(sa.Cache||bi),n}function aa(e){if("function"!=typeof e)throw new it(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}sa.Cache=bi;var la=Gr(function(e,t){var n=(t=1==t.length&&va(t[0])?Xt(t[0],mn(Io())):Xt(zi(t,1),mn(Io()))).length;return xr(function(i){for(var r=-1,o=Yn(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return Yt(e,this,i)})}),ua=xr(function(e,t){var n=An(t,Lo(ua));return ko(e,x,o,t,n)}),ca=xr(function(e,t){var n=An(t,Lo(ca));return ko(e,S,o,t,n)}),ha=Mo(function(e,t){return ko(e,_,o,o,o,t)});function da(e,t){return e===t||e!=e&&t!=t}var fa=bo(Ji),pa=bo(function(e,t){return e>=t}),ga=ir(function(){return arguments}())?ir:function(e){return Ea(e)&&ut.call(e,"callee")&&!Ot.call(e,"callee")},va=n.isArray,ma=jt?mn(jt):function(e){return Ea(e)&&Qi(e)==le};function ya(e){return null!=e&&_a(e.length)&&!Sa(e)}function ba(e){return Ea(e)&&ya(e)}var wa=Bn||Wl,Ca=Bt?mn(Bt):function(e){return Ea(e)&&Qi(e)==Y};function xa(e){if(!Ea(e))return!1;var t=Qi(e);return t==$||t==G||"string"==typeof e.message&&"string"==typeof e.name&&!Ra(e)}function Sa(e){if(!Da(e))return!1;var t=Qi(e);return t==K||t==q||t==z||t==ee}function ka(e){return"number"==typeof e&&e==Ba(e)}function _a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=L}function Da(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ea(e){return null!=e&&"object"==typeof e}var Aa=Vt?mn(Vt):function(e){return Ea(e)&&Vo(e)==Z};function Ma(e){return"number"==typeof e||Ea(e)&&Qi(e)==Q}function Ra(e){if(!Ea(e)||Qi(e)!=X)return!1;var t=At(e);if(null===t)return!0;var n=ut.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&lt.call(n)==ft}var Pa=Wt?mn(Wt):function(e){return Ea(e)&&Qi(e)==te};var Oa=zt?mn(zt):function(e){return Ea(e)&&Vo(e)==ne};function Ta(e){return"string"==typeof e||!va(e)&&Ea(e)&&Qi(e)==ie}function La(e){return"symbol"==typeof e||Ea(e)&&Qi(e)==re}var Ia=Ut?mn(Ut):function(e){return Ea(e)&&_a(e.length)&&!!Dt[Qi(e)]};var Fa=bo(cr),Ha=bo(function(e,t){return e<=t});function Na(e){if(!e)return[];if(ya(e))return Ta(e)?On(e):to(e);if(Ht&&e[Ht])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ht]());var t=Vo(e);return(t==Z?Dn:t==ne?Mn:dl)(e)}function ja(e){return e?(e=Wa(e))===T||e===-T?(e<0?-1:1)*I:e==e?e:0:0===e?e:0}function Ba(e){var t=ja(e),n=t%1;return t==t?n?t-n:t:0}function Va(e){return e?Ti(Ba(e),0,H):0}function Wa(e){if("number"==typeof e)return e;if(La(e))return F;if(Da(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Da(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Le,"");var n=Ye.test(e);return n||$e.test(e)?Rt(e.slice(2),n?2:8):Ue.test(e)?F:+e}function za(e){return no(e,rl(e))}function Ua(e){return null==e?"":Ir(e)}var Ya=ro(function(e,t){if(Zo(t)||ya(t))no(t,il(t),e);else for(var n in t)ut.call(t,n)&&Ei(e,n,t[n])}),Ga=ro(function(e,t){no(t,rl(t),e)}),$a=ro(function(e,t,n,i){no(t,rl(t),e,i)}),Ka=ro(function(e,t,n,i){no(t,il(t),e,i)}),qa=Mo(Oi);var Za=xr(function(e,t){e=et(e);var n=-1,i=t.length,r=i>2?t[2]:o;for(r&&Go(t[0],t[1],r)&&(i=1);++n<i;)for(var s=t[n],a=rl(s),l=-1,u=a.length;++l<u;){var c=a[l],h=e[c];(h===o||da(h,st[c])&&!ut.call(e,c))&&(e[c]=s[c])}return e}),Qa=xr(function(e){return e.push(o,Do),Yt(sl,o,e)});function Ja(e,t,n){var i=null==e?o:qi(e,t);return i===o?n:i}function Xa(e,t){return null!=e&&Wo(e,t,er)}var el=po(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),e[t]=n},Dl(Ml)),tl=po(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=dt.call(t)),ut.call(e,t)?e[t].push(n):e[t]=[n]},Io),nl=xr(nr);function il(e){return ya(e)?xi(e):lr(e)}function rl(e){return ya(e)?xi(e,!0):ur(e)}var ol=ro(function(e,t,n){pr(e,t,n)}),sl=ro(function(e,t,n,i){pr(e,t,n,i)}),al=Mo(function(e,t){var n={};if(null==e)return n;var i=!1;t=Xt(t,function(t){return t=Yr(t,e),i||(i=t.length>1),t}),no(e,Po(e),n),i&&(n=Li(n,d|f|p,Eo));for(var r=t.length;r--;)Hr(n,t[r]);return n});var ll=Mo(function(e,t){return null==e?{}:function(e,t){return mr(e,t,function(t,n){return Xa(e,n)})}(e,t)});function ul(e,t){if(null==e)return{};var n=Xt(Po(e),function(e){return[e]});return t=Io(t),mr(e,n,function(e,n){return t(e,n[0])})}var cl=So(il),hl=So(rl);function dl(e){return null==e?[]:yn(e,il(e))}var fl=lo(function(e,t,n){return t=t.toLowerCase(),e+(n?pl(t):t)});function pl(e){return xl(Ua(e).toLowerCase())}function gl(e){return(e=Ua(e))&&e.replace(qe,xn).replace(bt,"")}var vl=lo(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ml=lo(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),yl=ao("toLowerCase");var bl=lo(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});var wl=lo(function(e,t,n){return e+(n?" ":"")+xl(t)});var Cl=lo(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),xl=ao("toUpperCase");function Sl(e,t,n){return e=Ua(e),(t=n?o:t)===o?function(e){return St.test(e)}(e)?function(e){return e.match(Ct)||[]}(e):function(e){return e.match(Be)||[]}(e):e.match(t)||[]}var kl=xr(function(e,t){try{return Yt(e,o,t)}catch(e){return xa(e)?e:new r(e)}}),_l=Mo(function(e,t){return $t(t,function(t){t=us(t),Pi(e,t,ta(e[t],e))}),e});function Dl(e){return function(){return e}}var El=ho(),Al=ho(!0);function Ml(e){return e}function Rl(e){return ar("function"==typeof e?e:Li(e,d))}var Pl=xr(function(e,t){return function(n){return nr(n,e,t)}}),Ol=xr(function(e,t){return function(n){return nr(e,n,t)}});function Tl(e,t,n){var i=il(t),r=Ki(t,i);null!=n||Da(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=Ki(t,il(t)));var o=!(Da(n)&&"chain"in n&&!n.chain),s=Sa(e);return $t(r,function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=to(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,en([this.value()],arguments))})}),e}function Ll(){}var Il=vo(Xt),Fl=vo(qt),Hl=vo(rn);function Nl(e){return $o(e)?dn(us(e)):function(e){return function(t){return qi(t,e)}}(e)}var jl=yo(),Bl=yo(!0);function Vl(){return[]}function Wl(){return!1}var zl=go(function(e,t){return e+t},0),Ul=Co("ceil"),Yl=go(function(e,t){return e/t},1),Gl=Co("floor");var $l=go(function(e,t){return e*t},1),Kl=Co("round"),ql=go(function(e,t){return e-t},0);return di.after=function(e,t){if("function"!=typeof t)throw new it(l);return e=Ba(e),function(){if(--e<1)return t.apply(this,arguments)}},di.ary=Xs,di.assign=Ya,di.assignIn=Ga,di.assignInWith=$a,di.assignWith=Ka,di.at=qa,di.before=ea,di.bind=ta,di.bindAll=_l,di.bindKey=na,di.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return va(e)?e:[e]},di.chain=Ns,di.chunk=function(e,t,i){t=(i?Go(e,t,i):t===o)?1:Un(Ba(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var s=0,a=0,l=n(Hn(r/t));s<r;)l[a++]=Mr(e,s,s+=t);return l},di.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},di.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return en(va(i)?to(i):[i],zi(t,1))},di.cond=function(e){var t=null==e?0:e.length,n=Io();return e=t?Xt(e,function(e){if("function"!=typeof e[1])throw new it(l);return[n(e[0]),e[1]]}):[],xr(function(n){for(var i=-1;++i<t;){var r=e[i];if(Yt(r[0],this,n))return Yt(r[1],this,n)}})},di.conforms=function(e){return function(e){var t=il(e);return function(n){return Ii(n,e,t)}}(Li(e,d))},di.constant=Dl,di.countBy=Vs,di.create=function(e,t){var n=fi(e);return null==t?n:Ri(n,t)},di.curry=function e(t,n,i){var r=ko(t,w,o,o,o,o,o,n=i?o:n);return r.placeholder=e.placeholder,r},di.curryRight=function e(t,n,i){var r=ko(t,C,o,o,o,o,o,n=i?o:n);return r.placeholder=e.placeholder,r},di.debounce=ia,di.defaults=Za,di.defaultsDeep=Qa,di.defer=ra,di.delay=oa,di.difference=ds,di.differenceBy=fs,di.differenceWith=ps,di.drop=function(e,t,n){var i=null==e?0:e.length;return i?Mr(e,(t=n||t===o?1:Ba(t))<0?0:t,i):[]},di.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Mr(e,0,(t=i-(t=n||t===o?1:Ba(t)))<0?0:t):[]},di.dropRightWhile=function(e,t){return e&&e.length?jr(e,Io(t,3),!0,!0):[]},di.dropWhile=function(e,t){return e&&e.length?jr(e,Io(t,3),!0):[]},di.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Go(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=Ba(n))<0&&(n=-n>r?0:r+n),(i=i===o||i>r?r:Ba(i))<0&&(i+=r),i=n>i?0:Va(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},di.filter=function(e,t){return(va(e)?Zt:Wi)(e,Io(t,3))},di.flatMap=function(e,t){return zi(qs(e,t),1)},di.flatMapDeep=function(e,t){return zi(qs(e,t),T)},di.flatMapDepth=function(e,t,n){return n=n===o?1:Ba(n),zi(qs(e,t),n)},di.flatten=ms,di.flattenDeep=function(e){return null!=e&&e.length?zi(e,T):[]},di.flattenDepth=function(e,t){return null!=e&&e.length?zi(e,t=t===o?1:Ba(t)):[]},di.flip=function(e){return ko(e,D)},di.flow=El,di.flowRight=Al,di.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},di.functions=function(e){return null==e?[]:Ki(e,il(e))},di.functionsIn=function(e){return null==e?[]:Ki(e,rl(e))},di.groupBy=Gs,di.initial=function(e){return null!=e&&e.length?Mr(e,0,-1):[]},di.intersection=bs,di.intersectionBy=ws,di.intersectionWith=Cs,di.invert=el,di.invertBy=tl,di.invokeMap=$s,di.iteratee=Rl,di.keyBy=Ks,di.keys=il,di.keysIn=rl,di.map=qs,di.mapKeys=function(e,t){var n={};return t=Io(t,3),Gi(e,function(e,i,r){Pi(n,t(e,i,r),e)}),n},di.mapValues=function(e,t){var n={};return t=Io(t,3),Gi(e,function(e,i,r){Pi(n,i,t(e,i,r))}),n},di.matches=function(e){return dr(Li(e,d))},di.matchesProperty=function(e,t){return fr(e,Li(t,d))},di.memoize=sa,di.merge=ol,di.mergeWith=sl,di.method=Pl,di.methodOf=Ol,di.mixin=Tl,di.negate=aa,di.nthArg=function(e){return e=Ba(e),xr(function(t){return gr(t,e)})},di.omit=al,di.omitBy=function(e,t){return ul(e,aa(Io(t)))},di.once=function(e){return ea(2,e)},di.orderBy=function(e,t,n,i){return null==e?[]:(va(t)||(t=null==t?[]:[t]),va(n=i?o:n)||(n=null==n?[]:[n]),vr(e,t,n))},di.over=Il,di.overArgs=la,di.overEvery=Fl,di.overSome=Hl,di.partial=ua,di.partialRight=ca,di.partition=Zs,di.pick=ll,di.pickBy=ul,di.property=Nl,di.propertyOf=function(e){return function(t){return null==e?o:qi(e,t)}},di.pull=Ss,di.pullAll=ks,di.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?yr(e,t,Io(n,2)):e},di.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?yr(e,t,o,n):e},di.pullAt=_s,di.range=jl,di.rangeRight=Bl,di.rearg=ha,di.reject=function(e,t){return(va(e)?Zt:Wi)(e,aa(Io(t,3)))},di.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Io(t,3);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return br(e,r),n},di.rest=function(e,t){if("function"!=typeof e)throw new it(l);return xr(e,t=t===o?t:Ba(t))},di.reverse=Ds,di.sampleSize=function(e,t,n){return t=(n?Go(e,t,n):t===o)?1:Ba(t),(va(e)?ki:kr)(e,t)},di.set=function(e,t,n){return null==e?e:_r(e,t,n)},di.setWith=function(e,t,n,i){return i="function"==typeof i?i:o,null==e?e:_r(e,t,n,i)},di.shuffle=function(e){return(va(e)?_i:Ar)(e)},di.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Go(e,t,n)?(t=0,n=i):(t=null==t?0:Ba(t),n=n===o?i:Ba(n)),Mr(e,t,n)):[]},di.sortBy=Qs,di.sortedUniq=function(e){return e&&e.length?Tr(e):[]},di.sortedUniqBy=function(e,t){return e&&e.length?Tr(e,Io(t,2)):[]},di.split=function(e,t,n){return n&&"number"!=typeof n&&Go(e,t,n)&&(t=n=o),(n=n===o?H:n>>>0)?(e=Ua(e))&&("string"==typeof t||null!=t&&!Pa(t))&&!(t=Ir(t))&&_n(e)?$r(On(e),0,n):e.split(t,n):[]},di.spread=function(e,t){if("function"!=typeof e)throw new it(l);return t=null==t?0:Un(Ba(t),0),xr(function(n){var i=n[t],r=$r(n,0,t);return i&&en(r,i),Yt(e,this,r)})},di.tail=function(e){var t=null==e?0:e.length;return t?Mr(e,1,t):[]},di.take=function(e,t,n){return e&&e.length?Mr(e,0,(t=n||t===o?1:Ba(t))<0?0:t):[]},di.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Mr(e,(t=i-(t=n||t===o?1:Ba(t)))<0?0:t,i):[]},di.takeRightWhile=function(e,t){return e&&e.length?jr(e,Io(t,3),!1,!0):[]},di.takeWhile=function(e,t){return e&&e.length?jr(e,Io(t,3)):[]},di.tap=function(e,t){return t(e),e},di.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new it(l);return Da(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),ia(e,t,{leading:i,maxWait:t,trailing:r})},di.thru=js,di.toArray=Na,di.toPairs=cl,di.toPairsIn=hl,di.toPath=function(e){return va(e)?Xt(e,us):La(e)?[e]:to(ls(Ua(e)))},di.toPlainObject=za,di.transform=function(e,t,n){var i=va(e),r=i||wa(e)||Ia(e);if(t=Io(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:Da(e)&&Sa(o)?fi(At(e)):{}}return(r?$t:Gi)(e,function(e,i,r){return t(n,e,i,r)}),n},di.unary=function(e){return Xs(e,1)},di.union=Es,di.unionBy=As,di.unionWith=Ms,di.uniq=function(e){return e&&e.length?Fr(e):[]},di.uniqBy=function(e,t){return e&&e.length?Fr(e,Io(t,2)):[]},di.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?Fr(e,o,t):[]},di.unset=function(e,t){return null==e||Hr(e,t)},di.unzip=Rs,di.unzipWith=Ps,di.update=function(e,t,n){return null==e?e:Nr(e,t,Ur(n))},di.updateWith=function(e,t,n,i){return i="function"==typeof i?i:o,null==e?e:Nr(e,t,Ur(n),i)},di.values=dl,di.valuesIn=function(e){return null==e?[]:yn(e,rl(e))},di.without=Os,di.words=Sl,di.wrap=function(e,t){return ua(Ur(t),e)},di.xor=Ts,di.xorBy=Ls,di.xorWith=Is,di.zip=Fs,di.zipObject=function(e,t){return Wr(e||[],t||[],Ei)},di.zipObjectDeep=function(e,t){return Wr(e||[],t||[],_r)},di.zipWith=Hs,di.entries=cl,di.entriesIn=hl,di.extend=Ga,di.extendWith=$a,Tl(di,di),di.add=zl,di.attempt=kl,di.camelCase=fl,di.capitalize=pl,di.ceil=Ul,di.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=Wa(n))==n?n:0),t!==o&&(t=(t=Wa(t))==t?t:0),Ti(Wa(e),t,n)},di.clone=function(e){return Li(e,p)},di.cloneDeep=function(e){return Li(e,d|p)},di.cloneDeepWith=function(e,t){return Li(e,d|p,t="function"==typeof t?t:o)},di.cloneWith=function(e,t){return Li(e,p,t="function"==typeof t?t:o)},di.conformsTo=function(e,t){return null==t||Ii(e,t,il(t))},di.deburr=gl,di.defaultTo=function(e,t){return null==e||e!=e?t:e},di.divide=Yl,di.endsWith=function(e,t,n){e=Ua(e),t=Ir(t);var i=e.length,r=n=n===o?i:Ti(Ba(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},di.eq=da,di.escape=function(e){return(e=Ua(e))&&_e.test(e)?e.replace(Se,Sn):e},di.escapeRegExp=function(e){return(e=Ua(e))&&Te.test(e)?e.replace(Oe,"\\$&"):e},di.every=function(e,t,n){var i=va(e)?qt:Bi;return n&&Go(e,t,n)&&(t=o),i(e,Io(t,3))},di.find=Ws,di.findIndex=gs,di.findKey=function(e,t){return sn(e,Io(t,3),Gi)},di.findLast=zs,di.findLastIndex=vs,di.findLastKey=function(e,t){return sn(e,Io(t,3),$i)},di.floor=Gl,di.forEach=Us,di.forEachRight=Ys,di.forIn=function(e,t){return null==e?e:Ui(e,Io(t,3),rl)},di.forInRight=function(e,t){return null==e?e:Yi(e,Io(t,3),rl)},di.forOwn=function(e,t){return e&&Gi(e,Io(t,3))},di.forOwnRight=function(e,t){return e&&$i(e,Io(t,3))},di.get=Ja,di.gt=fa,di.gte=pa,di.has=function(e,t){return null!=e&&Wo(e,t,Xi)},di.hasIn=Xa,di.head=ys,di.identity=Ml,di.includes=function(e,t,n,i){e=ya(e)?e:dl(e),n=n&&!i?Ba(n):0;var r=e.length;return n<0&&(n=Un(r+n,0)),Ta(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&ln(e,t,n)>-1},di.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:Ba(n);return r<0&&(r=Un(i+r,0)),ln(e,t,r)},di.inRange=function(e,t,n){return t=ja(t),n===o?(n=t,t=0):n=ja(n),function(e,t,n){return e>=Yn(t,n)&&e<Un(t,n)}(e=Wa(e),t,n)},di.invoke=nl,di.isArguments=ga,di.isArray=va,di.isArrayBuffer=ma,di.isArrayLike=ya,di.isArrayLikeObject=ba,di.isBoolean=function(e){return!0===e||!1===e||Ea(e)&&Qi(e)==U},di.isBuffer=wa,di.isDate=Ca,di.isElement=function(e){return Ea(e)&&1===e.nodeType&&!Ra(e)},di.isEmpty=function(e){if(null==e)return!0;if(ya(e)&&(va(e)||"string"==typeof e||"function"==typeof e.splice||wa(e)||Ia(e)||ga(e)))return!e.length;var t=Vo(e);if(t==Z||t==ne)return!e.size;if(Zo(e))return!lr(e).length;for(var n in e)if(ut.call(e,n))return!1;return!0},di.isEqual=function(e,t){return rr(e,t)},di.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:o)?n(e,t):o;return i===o?rr(e,t,o,n):!!i},di.isError=xa,di.isFinite=function(e){return"number"==typeof e&&Vn(e)},di.isFunction=Sa,di.isInteger=ka,di.isLength=_a,di.isMap=Aa,di.isMatch=function(e,t){return e===t||or(e,t,Ho(t))},di.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,or(e,t,Ho(t),n)},di.isNaN=function(e){return Ma(e)&&e!=+e},di.isNative=function(e){if(qo(e))throw new r(a);return sr(e)},di.isNil=function(e){return null==e},di.isNull=function(e){return null===e},di.isNumber=Ma,di.isObject=Da,di.isObjectLike=Ea,di.isPlainObject=Ra,di.isRegExp=Pa,di.isSafeInteger=function(e){return ka(e)&&e>=-L&&e<=L},di.isSet=Oa,di.isString=Ta,di.isSymbol=La,di.isTypedArray=Ia,di.isUndefined=function(e){return e===o},di.isWeakMap=function(e){return Ea(e)&&Vo(e)==se},di.isWeakSet=function(e){return Ea(e)&&Qi(e)==ae},di.join=function(e,t){return null==e?"":Wn.call(e,t)},di.kebabCase=vl,di.last=xs,di.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==o&&(r=(r=Ba(n))<0?Un(i+r,0):Yn(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):an(e,cn,r,!0)},di.lowerCase=ml,di.lowerFirst=yl,di.lt=Fa,di.lte=Ha,di.max=function(e){return e&&e.length?Vi(e,Ml,Ji):o},di.maxBy=function(e,t){return e&&e.length?Vi(e,Io(t,2),Ji):o},di.mean=function(e){return hn(e,Ml)},di.meanBy=function(e,t){return hn(e,Io(t,2))},di.min=function(e){return e&&e.length?Vi(e,Ml,cr):o},di.minBy=function(e,t){return e&&e.length?Vi(e,Io(t,2),cr):o},di.stubArray=Vl,di.stubFalse=Wl,di.stubObject=function(){return{}},di.stubString=function(){return""},di.stubTrue=function(){return!0},di.multiply=$l,di.nth=function(e,t){return e&&e.length?gr(e,Ba(t)):o},di.noConflict=function(){return Tt._===this&&(Tt._=pt),this},di.noop=Ll,di.now=Js,di.pad=function(e,t,n){e=Ua(e);var i=(t=Ba(t))?Pn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return mo(Nn(r),n)+e+mo(Hn(r),n)},di.padEnd=function(e,t,n){e=Ua(e);var i=(t=Ba(t))?Pn(e):0;return t&&i<t?e+mo(t-i,n):e},di.padStart=function(e,t,n){e=Ua(e);var i=(t=Ba(t))?Pn(e):0;return t&&i<t?mo(t-i,n)+e:e},di.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),$n(Ua(e).replace(Ie,""),t||0)},di.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Go(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=ja(e),t===o?(t=e,e=0):t=ja(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=Kn();return Yn(e+r*(t-e+Mt("1e-"+((r+"").length-1))),t)}return wr(e,t)},di.reduce=function(e,t,n){var i=va(e)?tn:pn,r=arguments.length<3;return i(e,Io(t,4),n,r,Ni)},di.reduceRight=function(e,t,n){var i=va(e)?nn:pn,r=arguments.length<3;return i(e,Io(t,4),n,r,ji)},di.repeat=function(e,t,n){return t=(n?Go(e,t,n):t===o)?1:Ba(t),Cr(Ua(e),t)},di.replace=function(){var e=arguments,t=Ua(e[0]);return e.length<3?t:t.replace(e[1],e[2])},di.result=function(e,t,n){var i=-1,r=(t=Yr(t,e)).length;for(r||(r=1,e=o);++i<r;){var s=null==e?o:e[us(t[i])];s===o&&(i=r,s=n),e=Sa(s)?s.call(e):s}return e},di.round=Kl,di.runInContext=e,di.sample=function(e){return(va(e)?Si:Sr)(e)},di.size=function(e){if(null==e)return 0;if(ya(e))return Ta(e)?Pn(e):e.length;var t=Vo(e);return t==Z||t==ne?e.size:lr(e).length},di.snakeCase=bl,di.some=function(e,t,n){var i=va(e)?rn:Rr;return n&&Go(e,t,n)&&(t=o),i(e,Io(t,3))},di.sortedIndex=function(e,t){return Pr(e,t)},di.sortedIndexBy=function(e,t,n){return Or(e,t,Io(n,2))},di.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Pr(e,t);if(i<n&&da(e[i],t))return i}return-1},di.sortedLastIndex=function(e,t){return Pr(e,t,!0)},di.sortedLastIndexBy=function(e,t,n){return Or(e,t,Io(n,2),!0)},di.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Pr(e,t,!0)-1;if(da(e[n],t))return n}return-1},di.startCase=wl,di.startsWith=function(e,t,n){return e=Ua(e),n=null==n?0:Ti(Ba(n),0,e.length),t=Ir(t),e.slice(n,n+t.length)==t},di.subtract=ql,di.sum=function(e){return e&&e.length?gn(e,Ml):0},di.sumBy=function(e,t){return e&&e.length?gn(e,Io(t,2)):0},di.template=function(e,t,n){var i=di.templateSettings;n&&Go(e,t,n)&&(t=o),e=Ua(e),t=$a({},t,i,_o);var r,s,a=$a({},t.imports,i.imports,_o),l=il(a),u=yn(a,l),c=0,h=t.interpolate||Ze,d="__p += '",f=tt((t.escape||Ze).source+"|"+h.source+"|"+(h===Ae?We:Ze).source+"|"+(t.evaluate||Ze).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++_t+"]")+"\n";e.replace(f,function(t,n,i,o,a,l){return i||(i=o),d+=e.slice(c,l).replace(Qe,kn),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var g=t.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(be,""):d).replace(we,"$1").replace(Ce,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=kl(function(){return Je(l,p+"return "+d).apply(o,u)});if(v.source=d,xa(v))throw v;return v},di.times=function(e,t){if((e=Ba(e))<1||e>L)return[];var n=H,i=Yn(e,H);t=Io(t),e-=H;for(var r=vn(i,t);++n<e;)t(n);return r},di.toFinite=ja,di.toInteger=Ba,di.toLength=Va,di.toLower=function(e){return Ua(e).toLowerCase()},di.toNumber=Wa,di.toSafeInteger=function(e){return e?Ti(Ba(e),-L,L):0===e?e:0},di.toString=Ua,di.toUpper=function(e){return Ua(e).toUpperCase()},di.trim=function(e,t,n){if((e=Ua(e))&&(n||t===o))return e.replace(Le,"");if(!e||!(t=Ir(t)))return e;var i=On(e),r=On(t);return $r(i,wn(i,r),Cn(i,r)+1).join("")},di.trimEnd=function(e,t,n){if((e=Ua(e))&&(n||t===o))return e.replace(Fe,"");if(!e||!(t=Ir(t)))return e;var i=On(e);return $r(i,0,Cn(i,On(t))+1).join("")},di.trimStart=function(e,t,n){if((e=Ua(e))&&(n||t===o))return e.replace(Ie,"");if(!e||!(t=Ir(t)))return e;var i=On(e);return $r(i,wn(i,On(t))).join("")},di.truncate=function(e,t){var n=E,i=A;if(Da(t)){var r="separator"in t?t.separator:r;n="length"in t?Ba(t.length):n,i="omission"in t?Ir(t.omission):i}var s=(e=Ua(e)).length;if(_n(e)){var a=On(e);s=a.length}if(n>=s)return e;var l=n-Pn(i);if(l<1)return i;var u=a?$r(a,0,l).join(""):e.slice(0,l);if(r===o)return u+i;if(a&&(l+=u.length-l),Pa(r)){if(e.slice(l).search(r)){var c,h=u;for(r.global||(r=tt(r.source,Ua(ze.exec(r))+"g")),r.lastIndex=0;c=r.exec(h);)var d=c.index;u=u.slice(0,d===o?l:d)}}else if(e.indexOf(Ir(r),l)!=l){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i},di.unescape=function(e){return(e=Ua(e))&&ke.test(e)?e.replace(xe,Tn):e},di.uniqueId=function(e){var t=++ct;return Ua(e)+t},di.upperCase=Cl,di.upperFirst=xl,di.each=Us,di.eachRight=Ys,di.first=ys,Tl(di,function(){var e={};return Gi(di,function(t,n){ut.call(di.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),di.VERSION="4.17.11",$t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){di[e].placeholder=di}),$t(["drop","take"],function(e,t){vi.prototype[e]=function(n){n=n===o?1:Un(Ba(n),0);var i=this.__filtered__&&!t?new vi(this):this.clone();return i.__filtered__?i.__takeCount__=Yn(n,i.__takeCount__):i.__views__.push({size:Yn(n,H),type:e+(i.__dir__<0?"Right":"")}),i},vi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),$t(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==P||3==n;vi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Io(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),$t(["head","last"],function(e,t){var n="take"+(t?"Right":"");vi.prototype[e]=function(){return this[n](1).value()[0]}}),$t(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");vi.prototype[e]=function(){return this.__filtered__?new vi(this):this[n](1)}}),vi.prototype.compact=function(){return this.filter(Ml)},vi.prototype.find=function(e){return this.filter(e).head()},vi.prototype.findLast=function(e){return this.reverse().find(e)},vi.prototype.invokeMap=xr(function(e,t){return"function"==typeof e?new vi(this):this.map(function(n){return nr(n,e,t)})}),vi.prototype.reject=function(e){return this.filter(aa(Io(e)))},vi.prototype.slice=function(e,t){e=Ba(e);var n=this;return n.__filtered__&&(e>0||t<0)?new vi(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=Ba(t))<0?n.dropRight(-t):n.take(t-e)),n)},vi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},vi.prototype.toArray=function(){return this.take(H)},Gi(vi.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=di[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);r&&(di.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,l=t instanceof vi,u=a[0],c=l||va(t),h=function(e){var t=r.apply(di,en([e],a));return i&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,g=l&&!f;if(!s&&c){t=g?t:new vi(this);var v=e.apply(t,a);return v.__actions__.push({func:js,args:[h],thisArg:o}),new gi(v,d)}return p&&g?e.apply(this,a):(v=this.thru(h),p?i?v.value()[0]:v.value():v)})}),$t(["pop","push","shift","sort","splice","unshift"],function(e){var t=rt[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);di.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(va(r)?r:[],e)}return this[n](function(n){return t.apply(va(n)?n:[],e)})}}),Gi(vi.prototype,function(e,t){var n=di[t];if(n){var i=n.name+"";(ii[i]||(ii[i]=[])).push({name:t,func:n})}}),ii[fo(o,y).name]=[{name:"wrapper",func:o}],vi.prototype.clone=function(){var e=new vi(this.__wrapped__);return e.__actions__=to(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=to(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=to(this.__views__),e},vi.prototype.reverse=function(){if(this.__filtered__){var e=new vi(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},vi.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=va(e),i=t<0,r=n?e.length:0,o=function(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Yn(t,e+s);break;case"takeRight":e=Un(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=i?a:s-1,c=this.__iteratees__,h=c.length,d=0,f=Yn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return Br(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var g=-1,v=e[u+=t];++g<h;){var m=c[g],y=m.iteratee,b=m.type,w=y(v);if(b==O)v=w;else if(!w){if(b==P)continue e;break e}}p[d++]=v}return p},di.prototype.at=Bs,di.prototype.chain=function(){return Ns(this)},di.prototype.commit=function(){return new gi(this.value(),this.__chain__)},di.prototype.next=function(){this.__values__===o&&(this.__values__=Na(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},di.prototype.plant=function(e){for(var t,n=this;n instanceof pi;){var i=hs(n);i.__index__=0,i.__values__=o,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},di.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof vi){var t=e;return this.__actions__.length&&(t=new vi(this)),(t=t.reverse()).__actions__.push({func:js,args:[Ds],thisArg:o}),new gi(t,this.__chain__)}return this.thru(Ds)},di.prototype.toJSON=di.prototype.valueOf=di.prototype.value=function(){return Br(this.__wrapped__,this.__actions__)},di.prototype.first=di.prototype.head,Ht&&(di.prototype[Ht]=function(){return this}),di}();Tt._=Ln,(r=function(){return Ln}.call(t,n,t,i))===o||(i.exports=r)}).call(this)}).call(this,n(37),n(28)(e))},function(e,t,n){
/* flatpickr v4.5.2, @license MIT */
e.exports=function(){"use strict";var e=function(e){return("0"+e).slice(-2)},t=function(e){return!0===e?1:0};function n(e,t,n){var i;return void 0===n&&(n=!1),function(){var r=this,o=arguments;null!==i&&clearTimeout(i),i=window.setTimeout(function(){i=null,n||e.apply(r,o)},t),n&&!i&&e.apply(r,o)}}var i=function(e){return e instanceof Array?e:[e]},r=function(){},o=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},s={D:r,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,n,i){e.setHours(e.getHours()%12+12*t(new RegExp(i.amPM[1],"i").test(n)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:r,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:r,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},a={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},l={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[l.w(e,t,n)]},F:function(e,t,n){return o(l.n(e,t,n)-1,!1,t)},G:function(t,n,i){return e(l.h(t,n,i))},H:function(t){return e(t.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[t(e.getHours()>11)]},M:function(e,t){return o(e.getMonth(),!0,t)},S:function(t){return e(t.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(t){return e(t.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(t){return e(t.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(t){return e(t.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},u={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},c=function(e){var t=e.config,n=void 0===t?v:t,i=e.l10n,r=void 0===i?u:i;return function(e,t,i){var o=i||r;return void 0!==n.formatDate?n.formatDate(e,t,o):t.split("").map(function(t,i,r){return l[t]&&"\\"!==r[i-1]?l[t](e,o,n):"\\"!==t?t:""}).join("")}},h=function(e){var t=e.config,n=void 0===t?v:t,i=e.l10n,r=void 0===i?u:i;return function(e,t,i,o){if(0===e||e){var l,u=o||r,c=e;if(e instanceof Date)l=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)l=new Date(e);else if("string"==typeof e){var h=t||(n||v).dateFormat,d=String(e).trim();if("today"===d)l=new Date,i=!0;else if(/Z$/.test(d)||/GMT$/.test(d))l=new Date(e);else if(n&&n.parseDate)l=n.parseDate(e,h);else{l=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var f,p=[],g=0,m=0,y="";g<h.length;g++){var b=h[g],w="\\"===b,C="\\"===h[g-1]||w;if(a[b]&&!C){y+=a[b];var x=new RegExp(y).exec(e);x&&(f=!0)&&p["Y"!==b?"push":"unshift"]({fn:s[b],val:x[++m]})}else w||(y+=".");p.forEach(function(e){var t=e.fn,n=e.val;return l=t(l,n,u)||l})}l=f?l:void 0}}if(l instanceof Date&&!isNaN(l.getTime()))return!0===i&&l.setHours(0,0,0,0),l;n.errorHandler(new Error("Invalid date provided: "+c))}}};function d(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var f=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},p={DAY:864e5},g=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],v={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};function m(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function y(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function b(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function w(e,t){var n=y("div","numInputWrapper"),i=y("input","numInput "+e),r=y("span","arrowUp"),o=y("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var s in t)i.setAttribute(s,t[s]);return n.appendChild(i),n.appendChild(r),n.appendChild(o),n}"function"!=typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=function(){var t=n[o];t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},o=0;o<n.length;o++)r();return e});var C=300;function x(r,s){var l={config:Object.assign({},k.defaultConfig),l10n:u};function v(e){return e.bind(l)}function x(){var e=l.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame(function(){if(l.calendarContainer.style.visibility="hidden",l.calendarContainer.style.display="block",void 0!==l.daysContainer){var t=(l.days.offsetWidth+1)*e.showMonths;l.daysContainer.style.width=t+"px",l.calendarContainer.style.width=t+(void 0!==l.weekWrapper?l.weekWrapper.offsetWidth:0)+"px",l.calendarContainer.style.removeProperty("visibility"),l.calendarContainer.style.removeProperty("display")}})}function S(n){if(0!==l.selectedDates.length){void 0!==n&&"blur"!==n.type&&function(n){n.preventDefault();var i="keydown"===n.type,r=n.target;void 0!==l.amPM&&n.target===l.amPM&&(l.amPM.textContent=l.l10n.amPM[t(l.amPM.textContent===l.l10n.amPM[0])]);var o=parseFloat(r.getAttribute("data-min")),s=parseFloat(r.getAttribute("data-max")),a=parseFloat(r.getAttribute("data-step")),u=parseInt(r.value,10),c=n.delta||(i?38===n.which?1:-1:0),h=u+a*c;if(void 0!==r.value&&2===r.value.length){var d=r===l.hourElement,f=r===l.minuteElement;h<o?(h=s+h+t(!d)+(t(d)&&t(!l.amPM)),f&&F(void 0,-1,l.hourElement)):h>s&&(h=r===l.hourElement?h-s-t(!l.amPM):o,f&&F(void 0,1,l.hourElement)),l.amPM&&d&&(1===a?h+u===23:Math.abs(h-u)>a)&&(l.amPM.textContent=l.l10n.amPM[t(l.amPM.textContent===l.l10n.amPM[0])]),r.value=e(h)}}(n);var i=l._input.value;_(),me(),l._input.value!==i&&l._debouncedChange()}}function _(){if(void 0!==l.hourElement&&void 0!==l.minuteElement){var e=(parseInt(l.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(l.minuteElement.value,10)||0)%60,i=void 0!==l.secondElement?(parseInt(l.secondElement.value,10)||0)%60:0;void 0!==l.amPM&&(e=function(e,n){return e%12+12*t(n===l.l10n.amPM[1])}(e,l.amPM.textContent));var r=void 0!==l.config.minTime||l.config.minDate&&l.minDateHasTime&&l.latestSelectedDateObj&&0===d(l.latestSelectedDateObj,l.config.minDate,!0),o=void 0!==l.config.maxTime||l.config.maxDate&&l.maxDateHasTime&&l.latestSelectedDateObj&&0===d(l.latestSelectedDateObj,l.config.maxDate,!0);if(o){var s=void 0!==l.config.maxTime?l.config.maxTime:l.config.maxDate;(e=Math.min(e,s.getHours()))===s.getHours()&&(n=Math.min(n,s.getMinutes())),n===s.getMinutes()&&(i=Math.min(i,s.getSeconds()))}if(r){var a=void 0!==l.config.minTime?l.config.minTime:l.config.minDate;(e=Math.max(e,a.getHours()))===a.getHours()&&(n=Math.max(n,a.getMinutes())),n===a.getMinutes()&&(i=Math.max(i,a.getSeconds()))}A(e,n,i)}}function D(e){var t=e||l.latestSelectedDateObj;t&&A(t.getHours(),t.getMinutes(),t.getSeconds())}function E(){var e=l.config.defaultHour,t=l.config.defaultMinute,n=l.config.defaultSeconds;if(void 0!==l.config.minDate){var i=l.config.minDate.getHours(),r=l.config.minDate.getMinutes();(e=Math.max(e,i))===i&&(t=Math.max(r,t)),e===i&&t===r&&(n=l.config.minDate.getSeconds())}if(void 0!==l.config.maxDate){var o=l.config.maxDate.getHours(),s=l.config.maxDate.getMinutes();(e=Math.min(e,o))===o&&(t=Math.min(s,t)),e===o&&t===s&&(n=l.config.maxDate.getSeconds())}A(e,t,n)}function A(n,i,r){void 0!==l.latestSelectedDateObj&&l.latestSelectedDateObj.setHours(n%24,i,r||0,0),l.hourElement&&l.minuteElement&&!l.isMobile&&(l.hourElement.value=e(l.config.time_24hr?n:(12+n)%12+12*t(n%12==0)),l.minuteElement.value=e(i),void 0!==l.amPM&&(l.amPM.textContent=l.l10n.amPM[t(n>=12)]),void 0!==l.secondElement&&(l.secondElement.value=e(r)))}function M(e){var t=parseInt(e.target.value)+(e.delta||0);(t/1e3>1||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&Q(t)}function R(e,t,n,i){return t instanceof Array?t.forEach(function(t){return R(e,t,n,i)}):e instanceof Array?e.forEach(function(e){return R(e,t,n,i)}):(e.addEventListener(t,n,i),void l._handlers.push({element:e,event:t,handler:n,options:i}))}function P(e){return function(t){1===t.which&&e(t)}}function O(){de("onChange")}function T(){if(l.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(l.element.querySelectorAll("[data-"+e+"]"),function(t){return R(t,"click",l[e])})}),l.isMobile)!function(){var e=l.config.enableTime?l.config.noCalendar?"time":"datetime-local":"date";l.mobileInput=y("input",l.input.className+" flatpickr-mobile"),l.mobileInput.step=l.input.getAttribute("step")||"any",l.mobileInput.tabIndex=1,l.mobileInput.type=e,l.mobileInput.disabled=l.input.disabled,l.mobileInput.required=l.input.required,l.mobileInput.placeholder=l.input.placeholder,l.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",l.selectedDates.length>0&&(l.mobileInput.defaultValue=l.mobileInput.value=l.formatDate(l.selectedDates[0],l.mobileFormatStr)),l.config.minDate&&(l.mobileInput.min=l.formatDate(l.config.minDate,"Y-m-d")),l.config.maxDate&&(l.mobileInput.max=l.formatDate(l.config.maxDate,"Y-m-d")),l.input.type="hidden",void 0!==l.altInput&&(l.altInput.type="hidden");try{l.input.parentNode&&l.input.parentNode.insertBefore(l.mobileInput,l.input.nextSibling)}catch(e){}R(l.mobileInput,"change",function(e){l.setDate(e.target.value,!1,l.mobileFormatStr),de("onChange"),de("onClose")})}();else{var e=n(ne,50);l._debouncedChange=n(O,C),l.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&R(l.daysContainer,"mouseover",function(e){"range"===l.config.mode&&te(e.target)}),R(window.document.body,"keydown",ee),l.config.static||R(l._input,"keydown",ee),l.config.inline||l.config.static||R(window,"resize",e),void 0!==window.ontouchstart?R(window.document,"click",Z):R(window.document,"mousedown",P(Z)),R(window.document,"focus",Z,{capture:!0}),!0===l.config.clickOpens&&(R(l._input,"focus",l.open),R(l._input,"mousedown",P(l.open))),void 0!==l.daysContainer&&(R(l.monthNav,"mousedown",P(ye)),R(l.monthNav,["keyup","increment"],M),R(l.daysContainer,"mousedown",P(le))),void 0!==l.timeContainer&&void 0!==l.minuteElement&&void 0!==l.hourElement&&(R(l.timeContainer,["increment"],S),R(l.timeContainer,"blur",S,{capture:!0}),R(l.timeContainer,"mousedown",P(I)),R([l.hourElement,l.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==l.secondElement&&R(l.secondElement,"focus",function(){return l.secondElement&&l.secondElement.select()}),void 0!==l.amPM&&R(l.amPM,"mousedown",P(function(e){S(e),O()})))}}function L(e){var t=void 0!==e?l.parseDate(e):l.latestSelectedDateObj||(l.config.minDate&&l.config.minDate>l.now?l.config.minDate:l.config.maxDate&&l.config.maxDate<l.now?l.config.maxDate:l.now);try{void 0!==t&&(l.currentYear=t.getFullYear(),l.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,l.config.errorHandler(e)}l.redraw()}function I(e){~e.target.className.indexOf("arrow")&&F(e,e.target.classList.contains("arrowUp")?1:-1)}function F(e,t,n){var i=e&&e.target,r=n||i&&i.parentNode&&i.parentNode.firstChild,o=fe("increment");o.delta=t,r&&r.dispatchEvent(o)}function H(){var n=window.document.createDocumentFragment();if(l.calendarContainer=y("div","flatpickr-calendar"),l.calendarContainer.tabIndex=-1,!l.config.noCalendar){if(n.appendChild((l.monthNav=y("div","flatpickr-months"),l.yearElements=[],l.monthElements=[],l.prevMonthNav=y("span","flatpickr-prev-month"),l.prevMonthNav.innerHTML=l.config.prevArrow,l.nextMonthNav=y("span","flatpickr-next-month"),l.nextMonthNav.innerHTML=l.config.nextArrow,Y(),Object.defineProperty(l,"_hidePrevMonthArrow",{get:function(){return l.__hidePrevMonthArrow},set:function(e){l.__hidePrevMonthArrow!==e&&(m(l.prevMonthNav,"disabled",e),l.__hidePrevMonthArrow=e)}}),Object.defineProperty(l,"_hideNextMonthArrow",{get:function(){return l.__hideNextMonthArrow},set:function(e){l.__hideNextMonthArrow!==e&&(m(l.nextMonthNav,"disabled",e),l.__hideNextMonthArrow=e)}}),l.currentYearElement=l.yearElements[0],ge(),l.monthNav)),l.innerContainer=y("div","flatpickr-innerContainer"),l.config.weekNumbers){var i=function(){l.calendarContainer.classList.add("hasWeeks");var e=y("div","flatpickr-weekwrapper");e.appendChild(y("span","flatpickr-weekday",l.l10n.weekAbbreviation));var t=y("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),r=i.weekWrapper,o=i.weekNumbers;l.innerContainer.appendChild(r),l.weekNumbers=o,l.weekWrapper=r}l.rContainer=y("div","flatpickr-rContainer"),l.rContainer.appendChild(G()),l.daysContainer||(l.daysContainer=y("div","flatpickr-days"),l.daysContainer.tabIndex=-1),z(),l.rContainer.appendChild(l.daysContainer),l.innerContainer.appendChild(l.rContainer),n.appendChild(l.innerContainer)}l.config.enableTime&&n.appendChild(function(){l.calendarContainer.classList.add("hasTime"),l.config.noCalendar&&l.calendarContainer.classList.add("noCalendar"),l.timeContainer=y("div","flatpickr-time"),l.timeContainer.tabIndex=-1;var n=y("span","flatpickr-time-separator",":"),i=w("flatpickr-hour");l.hourElement=i.getElementsByTagName("input")[0];var r=w("flatpickr-minute");if(l.minuteElement=r.getElementsByTagName("input")[0],l.hourElement.tabIndex=l.minuteElement.tabIndex=-1,l.hourElement.value=e(l.latestSelectedDateObj?l.latestSelectedDateObj.getHours():l.config.time_24hr?l.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(l.config.defaultHour)),l.minuteElement.value=e(l.latestSelectedDateObj?l.latestSelectedDateObj.getMinutes():l.config.defaultMinute),l.hourElement.setAttribute("data-step",l.config.hourIncrement.toString()),l.minuteElement.setAttribute("data-step",l.config.minuteIncrement.toString()),l.hourElement.setAttribute("data-min",l.config.time_24hr?"0":"1"),l.hourElement.setAttribute("data-max",l.config.time_24hr?"23":"12"),l.minuteElement.setAttribute("data-min","0"),l.minuteElement.setAttribute("data-max","59"),l.timeContainer.appendChild(i),l.timeContainer.appendChild(n),l.timeContainer.appendChild(r),l.config.time_24hr&&l.timeContainer.classList.add("time24hr"),l.config.enableSeconds){l.timeContainer.classList.add("hasSeconds");var o=w("flatpickr-second");l.secondElement=o.getElementsByTagName("input")[0],l.secondElement.value=e(l.latestSelectedDateObj?l.latestSelectedDateObj.getSeconds():l.config.defaultSeconds),l.secondElement.setAttribute("data-step",l.minuteElement.getAttribute("data-step")),l.secondElement.setAttribute("data-min",l.minuteElement.getAttribute("data-min")),l.secondElement.setAttribute("data-max",l.minuteElement.getAttribute("data-max")),l.timeContainer.appendChild(y("span","flatpickr-time-separator",":")),l.timeContainer.appendChild(o)}return l.config.time_24hr||(l.amPM=y("span","flatpickr-am-pm",l.l10n.amPM[t((l.latestSelectedDateObj?l.hourElement.value:l.config.defaultHour)>11)]),l.amPM.title=l.l10n.toggleTitle,l.amPM.tabIndex=-1,l.timeContainer.appendChild(l.amPM)),l.timeContainer}()),m(l.calendarContainer,"rangeMode","range"===l.config.mode),m(l.calendarContainer,"animate",!0===l.config.animate),m(l.calendarContainer,"multiMonth",l.config.showMonths>1),l.calendarContainer.appendChild(n);var s=void 0!==l.config.appendTo&&void 0!==l.config.appendTo.nodeType;if((l.config.inline||l.config.static)&&(l.calendarContainer.classList.add(l.config.inline?"inline":"static"),l.config.inline&&(!s&&l.element.parentNode?l.element.parentNode.insertBefore(l.calendarContainer,l._input.nextSibling):void 0!==l.config.appendTo&&l.config.appendTo.appendChild(l.calendarContainer)),l.config.static)){var a=y("div","flatpickr-wrapper");l.element.parentNode&&l.element.parentNode.insertBefore(a,l.element),a.appendChild(l.element),l.altInput&&a.appendChild(l.altInput),a.appendChild(l.calendarContainer)}l.config.static||l.config.inline||(void 0!==l.config.appendTo?l.config.appendTo:window.document.body).appendChild(l.calendarContainer)}function N(e,t,n,i){var r=J(t,!0),o=y("span","flatpickr-day "+e,t.getDate().toString());return o.dateObj=t,o.$i=i,o.setAttribute("aria-label",l.formatDate(t,l.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===d(t,l.now)&&(l.todayDateElem=o,o.classList.add("today"),o.setAttribute("aria-current","date")),r?(o.tabIndex=-1,pe(t)&&(o.classList.add("selected"),l.selectedDateElem=o,"range"===l.config.mode&&(m(o,"startRange",l.selectedDates[0]&&0===d(t,l.selectedDates[0],!0)),m(o,"endRange",l.selectedDates[1]&&0===d(t,l.selectedDates[1],!0)),"nextMonthDay"===e&&o.classList.add("inRange")))):o.classList.add("disabled"),"range"===l.config.mode&&function(e){return!("range"!==l.config.mode||l.selectedDates.length<2)&&d(e,l.selectedDates[0])>=0&&d(e,l.selectedDates[1])<=0}(t)&&!pe(t)&&o.classList.add("inRange"),l.weekNumbers&&1===l.config.showMonths&&"prevMonthDay"!==e&&n%7==1&&l.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+l.config.getWeek(t)+"</span>"),de("onDayCreate",o),o}function j(e){e.focus(),"range"===l.config.mode&&te(e)}function B(e){for(var t=e>0?0:l.config.showMonths-1,n=e>0?l.config.showMonths:-1,i=t;i!=n;i+=e)for(var r=l.daysContainer.children[i],o=e>0?0:r.children.length-1,s=e>0?r.children.length:-1,a=o;a!=s;a+=e){var u=r.children[a];if(-1===u.className.indexOf("hidden")&&J(u.dateObj))return u}}function V(e,t){var n=X(document.activeElement||document.body),i=void 0!==e?e:n?document.activeElement:void 0!==l.selectedDateElem&&X(l.selectedDateElem)?l.selectedDateElem:void 0!==l.todayDateElem&&X(l.todayDateElem)?l.todayDateElem:B(t>0?1:-1);return void 0===i?l._input.focus():n?void function(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():l.currentMonth,i=t>0?l.config.showMonths:-1,r=t>0?1:-1,o=n-l.currentMonth;o!=i;o+=r)for(var s=l.daysContainer.children[o],a=n-l.currentMonth===o?e.$i+t:t<0?s.children.length-1:0,u=s.children.length,c=a;c>=0&&c<u&&c!=(t>0?u:-1);c+=r){var h=s.children[c];if(-1===h.className.indexOf("hidden")&&J(h.dateObj)&&Math.abs(e.$i-c)>=Math.abs(t))return j(h)}l.changeMonth(r),V(B(r),0)}(i,t):j(i)}function W(e,t){for(var n=(new Date(e,t,1).getDay()-l.l10n.firstDayOfWeek+7)%7,i=l.utils.getDaysInMonth((t-1+12)%12),r=l.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),s=l.config.showMonths>1,a=s?"prevMonthDay hidden":"prevMonthDay",u=s?"nextMonthDay hidden":"nextMonthDay",c=i+1-n,h=0;c<=i;c++,h++)o.appendChild(N(a,new Date(e,t-1,c),c,h));for(c=1;c<=r;c++,h++)o.appendChild(N("",new Date(e,t,c),c,h));for(var d=r+1;d<=42-n&&(1===l.config.showMonths||h%7!=0);d++,h++)o.appendChild(N(u,new Date(e,t+1,d%r),d,h));var f=y("div","dayContainer");return f.appendChild(o),f}function z(){if(void 0!==l.daysContainer){b(l.daysContainer),l.weekNumbers&&b(l.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<l.config.showMonths;t++){var n=new Date(l.currentYear,l.currentMonth,1);n.setMonth(l.currentMonth+t),e.appendChild(W(n.getFullYear(),n.getMonth()))}l.daysContainer.appendChild(e),l.days=l.daysContainer.firstChild,"range"===l.config.mode&&1===l.selectedDates.length&&te()}}function U(){var e=y("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=y("span","cur-month"),i=w("cur-year",{tabindex:"-1"}),r=i.getElementsByTagName("input")[0];r.setAttribute("aria-label",l.l10n.yearAriaLabel),l.config.minDate&&r.setAttribute("data-min",l.config.minDate.getFullYear().toString()),l.config.maxDate&&(r.setAttribute("data-max",l.config.maxDate.getFullYear().toString()),r.disabled=!!l.config.minDate&&l.config.minDate.getFullYear()===l.config.maxDate.getFullYear());var o=y("div","flatpickr-current-month");return o.appendChild(n),o.appendChild(i),t.appendChild(o),e.appendChild(t),{container:e,yearElement:r,monthElement:n}}function Y(){b(l.monthNav),l.monthNav.appendChild(l.prevMonthNav);for(var e=l.config.showMonths;e--;){var t=U();l.yearElements.push(t.yearElement),l.monthElements.push(t.monthElement),l.monthNav.appendChild(t.container)}l.monthNav.appendChild(l.nextMonthNav)}function G(){l.weekdayContainer?b(l.weekdayContainer):l.weekdayContainer=y("div","flatpickr-weekdays");for(var e=l.config.showMonths;e--;){var t=y("div","flatpickr-weekdaycontainer");l.weekdayContainer.appendChild(t)}return $(),l.weekdayContainer}function $(){var e=l.l10n.firstDayOfWeek,t=l.l10n.weekdays.shorthand.concat();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=l.config.showMonths;n--;)l.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function K(e,t){void 0===t&&(t=!0);var n=t?e:e-l.currentMonth;n<0&&!0===l._hidePrevMonthArrow||n>0&&!0===l._hideNextMonthArrow||(l.currentMonth+=n,(l.currentMonth<0||l.currentMonth>11)&&(l.currentYear+=l.currentMonth>11?1:-1,l.currentMonth=(l.currentMonth+12)%12,de("onYearChange")),z(),de("onMonthChange"),ge())}function q(e){return!(!l.config.appendTo||!l.config.appendTo.contains(e))||l.calendarContainer.contains(e)}function Z(e){if(l.isOpen&&!l.config.inline){var t=q(e.target),n=e.target===l.input||e.target===l.altInput||l.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(l.input)||~e.path.indexOf(l.altInput)),i="blur"===e.type?n&&e.relatedTarget&&!q(e.relatedTarget):!n&&!t,r=!l.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});i&&r&&(l.close(),"range"===l.config.mode&&1===l.selectedDates.length&&(l.clear(!1),l.redraw()))}}function Q(e){if(!(!e||l.config.minDate&&e<l.config.minDate.getFullYear()||l.config.maxDate&&e>l.config.maxDate.getFullYear())){var t=e,n=l.currentYear!==t;l.currentYear=t||l.currentYear,l.config.maxDate&&l.currentYear===l.config.maxDate.getFullYear()?l.currentMonth=Math.min(l.config.maxDate.getMonth(),l.currentMonth):l.config.minDate&&l.currentYear===l.config.minDate.getFullYear()&&(l.currentMonth=Math.max(l.config.minDate.getMonth(),l.currentMonth)),n&&(l.redraw(),de("onYearChange"))}}function J(e,t){void 0===t&&(t=!0);var n=l.parseDate(e,void 0,t);if(l.config.minDate&&n&&d(n,l.config.minDate,void 0!==t?t:!l.minDateHasTime)<0||l.config.maxDate&&n&&d(n,l.config.maxDate,void 0!==t?t:!l.maxDateHasTime)>0)return!1;if(0===l.config.enable.length&&0===l.config.disable.length)return!0;if(void 0===n)return!1;for(var i,r=l.config.enable.length>0,o=r?l.config.enable:l.config.disable,s=0;s<o.length;s++){if("function"==typeof(i=o[s])&&i(n))return r;if(i instanceof Date&&void 0!==n&&i.getTime()===n.getTime())return r;if("string"==typeof i&&void 0!==n){var a=l.parseDate(i,void 0,!0);return a&&a.getTime()===n.getTime()?r:!r}if("object"==typeof i&&void 0!==n&&i.from&&i.to&&n.getTime()>=i.from.getTime()&&n.getTime()<=i.to.getTime())return r}return!r}function X(e){return void 0!==l.daysContainer&&-1===e.className.indexOf("hidden")&&l.daysContainer.contains(e)}function ee(e){var t=e.target===l._input,n=l.config.allowInput,i=l.isOpen&&(!n||!t),r=l.config.inline&&t&&!n;if(13===e.keyCode&&t){if(n)return l.setDate(l._input.value,!0,e.target===l.altInput?l.config.altFormat:l.config.dateFormat),e.target.blur();l.open()}else if(q(e.target)||i||r){var o=!!l.timeContainer&&l.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?S():le(e);break;case 27:e.preventDefault(),ae();break;case 8:case 46:t&&!l.config.allowInput&&(e.preventDefault(),l.clear());break;case 37:case 39:if(o)l.hourElement&&l.hourElement.focus();else if(e.preventDefault(),void 0!==l.daysContainer&&(!1===n||X(document.activeElement))){var s=39===e.keyCode?1:-1;e.ctrlKey?(K(s),V(B(1),0)):V(void 0,s)}break;case 38:case 40:e.preventDefault();var a=40===e.keyCode?1:-1;l.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(Q(l.currentYear-a),V(B(1),0)):o||V(void 0,7*a):l.config.enableTime&&(!o&&l.hourElement&&l.hourElement.focus(),S(e),l._debouncedChange());break;case 9:if(!o){l.element.focus();break}var u=[l.hourElement,l.minuteElement,l.secondElement,l.amPM].filter(function(e){return e}),c=u.indexOf(e.target);if(-1!==c){var h=u[c+(e.shiftKey?-1:1)];void 0!==h?(e.preventDefault(),h.focus()):l.element.focus()}}}if(void 0!==l.amPM&&e.target===l.amPM)switch(e.key){case l.l10n.amPM[0].charAt(0):case l.l10n.amPM[0].charAt(0).toLowerCase():l.amPM.textContent=l.l10n.amPM[0],_(),me();break;case l.l10n.amPM[1].charAt(0):case l.l10n.amPM[1].charAt(0).toLowerCase():l.amPM.textContent=l.l10n.amPM[1],_(),me()}de("onKeyDown",e)}function te(e){if(1===l.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled"))){for(var t=e?e.dateObj.getTime():l.days.firstElementChild.dateObj.getTime(),n=l.parseDate(l.selectedDates[0],void 0,!0).getTime(),i=Math.min(t,l.selectedDates[0].getTime()),r=Math.max(t,l.selectedDates[0].getTime()),o=l.daysContainer.lastChild.lastChild.dateObj.getTime(),s=!1,a=0,u=0,c=i;c<o;c+=p.DAY)J(new Date(c),!0)||(s=s||c>i&&c<r,c<n&&(!a||c>a)?a=c:c>n&&(!u||c<u)&&(u=c));for(var h=0;h<l.config.showMonths;h++)for(var d=l.daysContainer.children[h],g=l.daysContainer.children[h-1],v=function(i,r){var o=d.children[i],c=o.dateObj,p=c.getTime(),v=a>0&&p<a||u>0&&p>u;return v?(o.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){o.classList.remove(e)}),"continue"):s&&!v?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){o.classList.remove(e)}),void(void 0!==e&&(e.classList.add(t<l.selectedDates[0].getTime()?"startRange":"endRange"),!d.contains(e)&&h>0&&g&&g.lastChild.dateObj.getTime()>=p||(n<t&&p===n?o.classList.add("startRange"):n>t&&p===n&&o.classList.add("endRange"),p>=a&&(0===u||p<=u)&&f(p,n,t)&&o.classList.add("inRange")))))},m=0,y=d.children.length;m<y;m++)v(m)}}function ne(){!l.isOpen||l.config.static||l.config.inline||oe()}function ie(e){return function(t){var n=l.config["_"+e+"Date"]=l.parseDate(t,l.config.dateFormat),i=l.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(l["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),l.selectedDates&&(l.selectedDates=l.selectedDates.filter(function(e){return J(e)}),l.selectedDates.length||"min"!==e||D(n),me()),l.daysContainer&&(se(),void 0!==n?l.currentYearElement[e]=n.getFullYear().toString():l.currentYearElement.removeAttribute(e),l.currentYearElement.disabled=!!i&&void 0!==n&&i.getFullYear()===n.getFullYear())}}function re(){"object"!=typeof l.config.locale&&void 0===k.l10ns[l.config.locale]&&l.config.errorHandler(new Error("flatpickr: invalid locale "+l.config.locale)),l.l10n=Object.assign({},k.l10ns.default,"object"==typeof l.config.locale?l.config.locale:"default"!==l.config.locale?k.l10ns[l.config.locale]:void 0),a.K="("+l.l10n.amPM[0]+"|"+l.l10n.amPM[1]+"|"+l.l10n.amPM[0].toLowerCase()+"|"+l.l10n.amPM[1].toLowerCase()+")",l.formatDate=c(l),l.parseDate=h({config:l.config,l10n:l.l10n})}function oe(e){if(void 0!==l.calendarContainer){de("onPreCalendarPosition");var t=e||l._positionElement,n=Array.prototype.reduce.call(l.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=l.calendarContainer.offsetWidth,r=l.config.position.split(" "),o=r[0],s=r.length>1?r[1]:null,a=t.getBoundingClientRect(),u=window.innerHeight-a.bottom,c="above"===o||"below"!==o&&u<n&&a.top>n,h=window.pageYOffset+a.top+(c?-n-2:t.offsetHeight+2);if(m(l.calendarContainer,"arrowTop",!c),m(l.calendarContainer,"arrowBottom",c),!l.config.inline){var d=window.pageXOffset+a.left-(null!=s&&"center"===s?(i-a.width)/2:0),f=window.document.body.offsetWidth-a.right,p=d+i>window.document.body.offsetWidth;m(l.calendarContainer,"rightMost",p),l.config.static||(l.calendarContainer.style.top=h+"px",p?(l.calendarContainer.style.left="auto",l.calendarContainer.style.right=f+"px"):(l.calendarContainer.style.left=d+"px",l.calendarContainer.style.right="auto"))}}}function se(){l.config.noCalendar||l.isMobile||(ge(),z())}function ae(){l._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(l.close,0):l.close()}function le(e){e.preventDefault(),e.stopPropagation();var t=function e(t,n){return n(t)?t:t.parentNode?e(t.parentNode,n):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")});if(void 0!==t){var n=t,i=l.latestSelectedDateObj=new Date(n.dateObj.getTime()),r=(i.getMonth()<l.currentMonth||i.getMonth()>l.currentMonth+l.config.showMonths-1)&&"range"!==l.config.mode;if(l.selectedDateElem=n,"single"===l.config.mode)l.selectedDates=[i];else if("multiple"===l.config.mode){var o=pe(i);o?l.selectedDates.splice(parseInt(o),1):l.selectedDates.push(i)}else"range"===l.config.mode&&(2===l.selectedDates.length&&l.clear(!1),l.selectedDates.push(i),0!==d(i,l.selectedDates[0],!0)&&l.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(_(),r){var s=l.currentYear!==i.getFullYear();l.currentYear=i.getFullYear(),l.currentMonth=i.getMonth(),s&&de("onYearChange"),de("onMonthChange")}if(ge(),z(),me(),l.config.enableTime&&setTimeout(function(){return l.showTimeInput=!0},50),r||"range"===l.config.mode||1!==l.config.showMonths?l.selectedDateElem&&l.selectedDateElem.focus():j(n),void 0!==l.hourElement&&setTimeout(function(){return void 0!==l.hourElement&&l.hourElement.select()},451),l.config.closeOnSelect){var a="single"===l.config.mode&&!l.config.enableTime,u="range"===l.config.mode&&2===l.selectedDates.length&&!l.config.enableTime;(a||u)&&ae()}O()}}l.parseDate=h({config:l.config,l10n:l.l10n}),l._handlers=[],l._bind=R,l._setHoursFromDate=D,l._positionCalendar=oe,l.changeMonth=K,l.changeYear=Q,l.clear=function(e){void 0===e&&(e=!0),l.input.value="",void 0!==l.altInput&&(l.altInput.value=""),void 0!==l.mobileInput&&(l.mobileInput.value=""),l.selectedDates=[],l.latestSelectedDateObj=void 0,l.showTimeInput=!1,!0===l.config.enableTime&&E(),l.redraw(),e&&de("onChange")},l.close=function(){l.isOpen=!1,l.isMobile||(l.calendarContainer.classList.remove("open"),l._input.classList.remove("active")),de("onClose")},l._createElement=y,l.destroy=function(){void 0!==l.config&&de("onDestroy");for(var e=l._handlers.length;e--;){var t=l._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(l._handlers=[],l.mobileInput)l.mobileInput.parentNode&&l.mobileInput.parentNode.removeChild(l.mobileInput),l.mobileInput=void 0;else if(l.calendarContainer&&l.calendarContainer.parentNode)if(l.config.static&&l.calendarContainer.parentNode){var n=l.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else l.calendarContainer.parentNode.removeChild(l.calendarContainer);l.altInput&&(l.input.type="text",l.altInput.parentNode&&l.altInput.parentNode.removeChild(l.altInput),delete l.altInput),l.input&&(l.input.type=l.input._type,l.input.classList.remove("flatpickr-input"),l.input.removeAttribute("readonly"),l.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete l[e]}catch(e){}})},l.isEnabled=J,l.jumpToDate=L,l.open=function(e,t){if(void 0===t&&(t=l._positionElement),!0===l.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==l.mobileInput&&(l.mobileInput.focus(),l.mobileInput.click()),void de("onOpen");if(!l._input.disabled&&!l.config.inline){var n=l.isOpen;l.isOpen=!0,n||(l.calendarContainer.classList.add("open"),l._input.classList.add("active"),de("onOpen"),oe(t)),!0===l.config.enableTime&&!0===l.config.noCalendar&&(0===l.selectedDates.length&&(l.setDate(void 0!==l.config.minDate?new Date(l.config.minDate.getTime()):new Date,!1),E(),me()),!1!==l.config.allowInput||void 0!==e&&l.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return l.hourElement.select()},50))}},l.redraw=se,l.set=function(e,t){null!==e&&"object"==typeof e?Object.assign(l.config,e):(l.config[e]=t,void 0!==ue[e]?ue[e].forEach(function(e){return e()}):g.indexOf(e)>-1&&(l.config[e]=i(t))),l.redraw(),L(),me(!1)},l.setDate=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=l.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return l.clear(t);ce(e,n),l.showTimeInput=l.selectedDates.length>0,l.latestSelectedDateObj=l.selectedDates[0],l.redraw(),L(),D(),me(t),t&&de("onChange")},l.toggle=function(e){if(!0===l.isOpen)return l.close();l.open(e)};var ue={locale:[re,$],showMonths:[Y,x,G]};function ce(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return l.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[l.parseDate(e,t)];else if("string"==typeof e)switch(l.config.mode){case"single":case"time":n=[l.parseDate(e,t)];break;case"multiple":n=e.split(l.config.conjunction).map(function(e){return l.parseDate(e,t)});break;case"range":n=e.split(l.l10n.rangeSeparator).map(function(e){return l.parseDate(e,t)})}else l.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));l.selectedDates=n.filter(function(e){return e instanceof Date&&J(e,!1)}),"range"===l.config.mode&&l.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function he(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?l.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:l.parseDate(e.from,void 0),to:l.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function de(e,t){if(void 0!==l.config){var n=l.config[e];if(void 0!==n&&n.length>0)for(var i=0;n[i]&&i<n.length;i++)n[i](l.selectedDates,l.input.value,l,t);"onChange"===e&&(l.input.dispatchEvent(fe("change")),l.input.dispatchEvent(fe("input")))}}function fe(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function pe(e){for(var t=0;t<l.selectedDates.length;t++)if(0===d(l.selectedDates[t],e))return""+t;return!1}function ge(){l.config.noCalendar||l.isMobile||!l.monthNav||(l.yearElements.forEach(function(e,t){var n=new Date(l.currentYear,l.currentMonth,1);n.setMonth(l.currentMonth+t),l.monthElements[t].textContent=o(n.getMonth(),l.config.shorthandCurrentMonth,l.l10n)+" ",e.value=n.getFullYear().toString()}),l._hidePrevMonthArrow=void 0!==l.config.minDate&&(l.currentYear===l.config.minDate.getFullYear()?l.currentMonth<=l.config.minDate.getMonth():l.currentYear<l.config.minDate.getFullYear()),l._hideNextMonthArrow=void 0!==l.config.maxDate&&(l.currentYear===l.config.maxDate.getFullYear()?l.currentMonth+1>l.config.maxDate.getMonth():l.currentYear>l.config.maxDate.getFullYear()))}function ve(e){return l.selectedDates.map(function(t){return l.formatDate(t,e)}).filter(function(e,t,n){return"range"!==l.config.mode||l.config.enableTime||n.indexOf(e)===t}).join("range"!==l.config.mode?l.config.conjunction:l.l10n.rangeSeparator)}function me(e){if(void 0===e&&(e=!0),0===l.selectedDates.length)return l.clear(e);void 0!==l.mobileInput&&l.mobileFormatStr&&(l.mobileInput.value=void 0!==l.latestSelectedDateObj?l.formatDate(l.latestSelectedDateObj,l.mobileFormatStr):""),l.input.value=ve(l.config.dateFormat),void 0!==l.altInput&&(l.altInput.value=ve(l.config.altFormat)),!1!==e&&de("onValueUpdate")}function ye(e){e.preventDefault();var t=l.prevMonthNav.contains(e.target),n=l.nextMonthNav.contains(e.target);t||n?K(t?-1:1):l.yearElements.indexOf(e.target)>=0?e.target.select():e.target.classList.contains("arrowUp")?l.changeYear(l.currentYear+1):e.target.classList.contains("arrowDown")&&l.changeYear(l.currentYear-1)}return function(){l.element=l.input=r,l.isOpen=!1,function(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=Object.assign({},s,JSON.parse(JSON.stringify(r.dataset||{}))),n={};l.config.parseDate=t.parseDate,l.config.formatDate=t.formatDate,Object.defineProperty(l.config,"enable",{get:function(){return l.config._enable},set:function(e){l.config._enable=he(e)}}),Object.defineProperty(l.config,"disable",{get:function(){return l.config._disable},set:function(e){l.config._disable=he(e)}});var o="time"===t.mode;t.dateFormat||!t.enableTime&&!o||(n.dateFormat=t.noCalendar||o?"H:i"+(t.enableSeconds?":S":""):k.defaultConfig.dateFormat+" H:i"+(t.enableSeconds?":S":"")),t.altInput&&(t.enableTime||o)&&!t.altFormat&&(n.altFormat=t.noCalendar||o?"h:i"+(t.enableSeconds?":S K":" K"):k.defaultConfig.altFormat+" h:i"+(t.enableSeconds?":S":"")+" K"),Object.defineProperty(l.config,"minDate",{get:function(){return l.config._minDate},set:ie("min")}),Object.defineProperty(l.config,"maxDate",{get:function(){return l.config._maxDate},set:ie("max")});var a=function(e){return function(t){l.config["min"===e?"_minTime":"_maxTime"]=l.parseDate(t,"H:i")}};Object.defineProperty(l.config,"minTime",{get:function(){return l.config._minTime},set:a("min")}),Object.defineProperty(l.config,"maxTime",{get:function(){return l.config._maxTime},set:a("max")}),"time"===t.mode&&(l.config.noCalendar=!0,l.config.enableTime=!0),Object.assign(l.config,n,t);for(var u=0;u<e.length;u++)l.config[e[u]]=!0===l.config[e[u]]||"true"===l.config[e[u]];g.filter(function(e){return void 0!==l.config[e]}).forEach(function(e){l.config[e]=i(l.config[e]||[]).map(v)}),l.isMobile=!l.config.disableMobile&&!l.config.inline&&"single"===l.config.mode&&!l.config.disable.length&&!l.config.enable.length&&!l.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var c=0;c<l.config.plugins.length;c++){var h=l.config.plugins[c](l)||{};for(var d in h)g.indexOf(d)>-1?l.config[d]=i(h[d]).map(v).concat(l.config[d]):void 0===t[d]&&(l.config[d]=h[d])}de("onParseConfig")}(),re(),l.input=l.config.wrap?r.querySelector("[data-input]"):r,l.input?(l.input._type=l.input.type,l.input.type="text",l.input.classList.add("flatpickr-input"),l._input=l.input,l.config.altInput&&(l.altInput=y(l.input.nodeName,l.input.className+" "+l.config.altInputClass),l._input=l.altInput,l.altInput.placeholder=l.input.placeholder,l.altInput.disabled=l.input.disabled,l.altInput.required=l.input.required,l.altInput.tabIndex=l.input.tabIndex,l.altInput.type="text",l.input.setAttribute("type","hidden"),!l.config.static&&l.input.parentNode&&l.input.parentNode.insertBefore(l.altInput,l.input.nextSibling)),l.config.allowInput||l._input.setAttribute("readonly","readonly"),l._positionElement=l.config.positionElement||l._input):l.config.errorHandler(new Error("Invalid input element specified")),function(){l.selectedDates=[],l.now=l.parseDate(l.config.now)||new Date;var e=l.config.defaultDate||("INPUT"!==l.input.nodeName&&"TEXTAREA"!==l.input.nodeName||!l.input.placeholder||l.input.value!==l.input.placeholder?l.input.value:null);e&&ce(e,l.config.dateFormat);var t=l.selectedDates.length>0?l.selectedDates[0]:l.config.minDate&&l.config.minDate.getTime()>l.now.getTime()?l.config.minDate:l.config.maxDate&&l.config.maxDate.getTime()<l.now.getTime()?l.config.maxDate:l.now;l.currentYear=t.getFullYear(),l.currentMonth=t.getMonth(),l.selectedDates.length>0&&(l.latestSelectedDateObj=l.selectedDates[0]),void 0!==l.config.minTime&&(l.config.minTime=l.parseDate(l.config.minTime,"H:i")),void 0!==l.config.maxTime&&(l.config.maxTime=l.parseDate(l.config.maxTime,"H:i")),l.minDateHasTime=!!l.config.minDate&&(l.config.minDate.getHours()>0||l.config.minDate.getMinutes()>0||l.config.minDate.getSeconds()>0),l.maxDateHasTime=!!l.config.maxDate&&(l.config.maxDate.getHours()>0||l.config.maxDate.getMinutes()>0||l.config.maxDate.getSeconds()>0),Object.defineProperty(l,"showTimeInput",{get:function(){return l._showTimeInput},set:function(e){l._showTimeInput=e,l.calendarContainer&&m(l.calendarContainer,"showTimeInput",e),l.isOpen&&oe()}})}(),l.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=l.currentMonth),void 0===t&&(t=l.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:l.l10n.daysInMonth[e]}},l.isMobile||H(),T(),(l.selectedDates.length||l.config.noCalendar)&&(l.config.enableTime&&D(l.config.noCalendar?l.latestSelectedDateObj||l.config.minDate:void 0),me(!1)),x(),l.showTimeInput=l.selectedDates.length>0||l.config.noCalendar;var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!l.isMobile&&e&&oe(),de("onReady")}(),l}function S(e,t){for(var n=Array.prototype.slice.call(e),i=[],r=0;r<n.length;r++){var o=n[r];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=x(o,t||{}),i.push(o._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return S(this,e)},HTMLElement.prototype.flatpickr=function(e){return S([this],e)});var k=function(e,t){return e instanceof NodeList?S(e,t):S("string"==typeof e?window.document.querySelectorAll(e):[e],t)};return k.defaultConfig=v,k.l10ns={en:Object.assign({},u),default:Object.assign({},u)},k.localize=function(e){k.l10ns.default=Object.assign({},k.l10ns.default,e)},k.setDefaults=function(e){k.defaultConfig=Object.assign({},k.defaultConfig,e)},k.parseDate=h({}),k.formatDate=c({}),k.compareDates=d,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return S(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=k),k}()},function(e,t,n){
/* Inspire Tree DOM
 * @version 4.0.6
 * https://github.com/helion3/inspire-tree-dom
 * @copyright Copyright 2015 Helion3, and other contributors
 * @license Licensed under MIT
 *          see https://github.com/helion3/inspire-tree-dom/blob/master/LICENSE
 */
e.exports=function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var n="$NO_OP",i="a runtime error occured! Use Inferno in development environment to find the error.",r=!("undefined"==typeof window||!window.document),o=Array.isArray;function s(e){var t=typeof e;return"string"===t||"number"===t}function a(e){return f(e)||d(e)}function l(e){return d(e)||!1===e||function(e){return!0===e}(e)||f(e)}function u(e){return"function"==typeof e}function c(e){return"string"==typeof e}function h(e){return"number"==typeof e}function d(e){return null===e}function f(e){return void 0===e}function p(e,t){var n={};if(e)for(var i in e)n[i]=e[i];if(t)for(var r in t)n[r]=t[r];return n}var g="$";function v(e,t,n,i,r,o,s,a){return{childFlags:e,children:t,className:n,dom:null,flags:i,key:void 0===r?null:r,parentVNode:null,props:void 0===o?null:o,ref:void 0===s?null:s,type:a}}function m(e,t,n,i,r,o,s,a){var l=void 0===r?1:r,u=v(l,i,n,e,s,o,a,t);return 0===l&&k(u,u.children),u}function y(e,t,n,i,r){(2&e)>0&&(e=t.prototype&&u(t.prototype.render)?4:8);var o=t.defaultProps;if(!a(o))for(var s in n||(n={}),o)f(n[s])&&(n[s]=o[s]);if((8&e)>0){var l=t.defaultHooks;if(!a(l))if(r)for(var c in l)f(r[c])&&(r[c]=l[c]);else r=l}var h=v(1,null,null,e,i,n,r,t),d=_.createVNode;return u(d)&&d(h),h}function b(e,t){return v(1,a(e)?"":e,null,16,t,null,null,null)}function w(e){var t=e.props;if(t){var n=e.flags;481&n&&(void 0!==t.children&&a(e.children)&&k(e,t.children),void 0!==t.className&&(e.className=t.className||null,t.className=void 0)),void 0!==t.key&&(e.key=t.key,t.key=void 0),void 0!==t.ref&&(e.ref=8&n?p(e.ref,t.ref):t.ref,t.ref=void 0)}return e}function C(e){var t,n=e.flags;if(14&n){var i,r=e.props;if(!d(r))for(var o in i={},r)i[o]=r[o];t=y(n,e.type,i,e.key,e.ref)}else 481&n?t=m(n,e.type,e.className,e.children,e.childFlags,e.props,e.key,e.ref):16&n?t=b(e.children,e.key):1024&n&&(t=e);return t}function x(){return b("",null)}function S(e,t,n,i){for(var r=e.length;n<r;n++){var a=e[n];if(!l(a)){var u=i+g+n;if(o(a))S(a,t,0,u);else{if(s(a))a=b(a,u);else{var h=a.key,f=c(h)&&h[0]===g;d(a.dom)&&!f||(a=C(a)),d(h)||f?a.key=u:a.key=i+h}t.push(a)}}}}function k(e,t){var n,i=1;if(l(t))n=t;else if(c(t))i=2,n=b(t);else if(h(t))i=2,n=b(t+"");else if(o(t)){var r=t.length;if(0===r)n=null,i=1;else{(Object.isFrozen(t)||!0===t.$)&&(t=t.slice()),i=8;for(var a=0;a<r;a++){var u=t[a];if(l(u)||o(u)){n=n||t.slice(0,a),S(t,n,a,"");break}if(s(u))(n=n||t.slice(0,a)).push(b(u,g+a));else{var f=u.key,p=d(u.dom),v=d(f),m=!v&&f[0]===g;!p||v||m?(n=n||t.slice(0,a),p&&!m||(u=C(u)),(v||m)&&(u.key=g+a),n.push(u)):n&&n.push(u)}}(n=n||t).$=!0}}else n=t,d(t.dom)||(n=C(t)),i=2;return e.children=n,e.childFlags=i,e}var _={afterRender:null,beforeRender:null,createVNode:null,renderComplete:null},D="http://www.w3.org/1999/xlink",E="http://www.w3.org/XML/1998/namespace",A="http://www.w3.org/2000/svg",M={"xlink:actuate":D,"xlink:arcrole":D,"xlink:href":D,"xlink:role":D,"xlink:show":D,"xlink:title":D,"xlink:type":D,"xml:base":E,"xml:lang":E,"xml:space":E},R={},P=[];function O(e,t){e.appendChild(t)}function T(e,t,n){a(n)?O(e,t):e.insertBefore(t,n)}function L(e,t,n){e.replaceChild(t,n)}function I(e){for(var t;void 0!==(t=e.shift());)t()}var F={},H={};function N(e,t,n){var i=F[e],r=n.$EV;t?(i||(H[e]=function(e){var t=function(t){var n=t.type,i="click"===n||"dblclick"===n;if(i&&0!==t.button)return t.stopPropagation(),!1;t.stopPropagation=B;var r={dom:document};Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return r.dom}}),function(e,t,n,i,r){for(var o=t;!d(o);){if(n&&o.disabled)return;var s=o.$EV;if(s){var a=s[i];if(a&&(r.dom=o,a.event?a.event(a.data,e):a(e),e.cancelBubble))return}o=o.parentNode}}(t,t.target,i,e,r)};return document.addEventListener(j(e),t),t}(e),F[e]=0),r||(r=n.$EV={}),r[e]||F[e]++,r[e]=t):r&&r[e]&&(F[e]--,1===i&&(document.removeEventListener(j(e),H[e]),H[e]=null),r[e]=t)}function j(e){return e.substr(2).toLowerCase()}function B(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function V(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}function W(e,t,n){if(e[t]){var i=e[t];i.event?i.event(i.data,n):i(n)}else{var r=t.toLowerCase();e[r]&&e[r](n)}}function z(e,t){var n=function(n){n.stopPropagation();var i=this.$V;if(i){var r=i.props||R,o=i.dom;if(c(e))W(r,e,n);else for(var s=0;s<e.length;s++)W(r,e[s],n);if(u(t)){var a=this.$V,l=a.props||R;t(l,o,!1,a)}}};return Object.defineProperty(n,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),n}function U(e){return"checkbox"===e||"radio"===e}var Y=z("onInput",K),G=z(["onClick","onChange"],K);function $(e){e.stopPropagation()}function K(e,t){var n=e.type,i=e.value,r=e.checked,o=e.multiple,s=e.defaultValue,l=!a(i);n&&n!==t.type&&t.setAttribute("type",n),a(o)||o===t.multiple||(t.multiple=o),a(s)||l||(t.defaultValue=s+""),U(n)?(l&&(t.value=i),a(r)||(t.checked=r)):l&&t.value!==i?(t.defaultValue=i,t.value=i):a(r)||(t.checked=r)}function q(e,t){var n=e.type;if("optgroup"===n){var i=e.children,r=e.childFlags;if(12&r)for(var o=0,s=i.length;o<s;o++)Z(i[o],t);else 2===r&&Z(i,t)}else Z(e,t)}function Z(e,t){var n=e.props||R,i=e.dom;i.value=n.value,o(t)&&-1!==t.indexOf(n.value)||n.value===t?i.selected=!0:a(t)&&a(n.selected)||(i.selected=n.selected||!1)}$.wrapped=!0;var Q=z("onChange",J);function J(e,t,n,i){var r=Boolean(e.multiple);a(e.multiple)||r===t.multiple||(t.multiple=r);var o=i.childFlags;if(0==(1&o)){var s=i.children,l=e.value;if(n&&a(l)&&(l=e.defaultValue),12&o)for(var u=0,c=s.length;u<c;u++)q(s[u],l);else 2===o&&q(s,l)}}var X=z("onInput",te),ee=z("onChange");function te(e,t,n){var i=e.value,r=t.value;if(a(i)){if(n){var o=e.defaultValue;a(o)||o===r||(t.defaultValue=o,t.value=o)}}else r!==i&&(t.defaultValue=i,t.value=i)}function ne(e,t,n,i,r,o){64&e?K(i,n):256&e?J(i,n,r,t):128&e&&te(i,n,r),o&&(n.$V=t)}function ie(e,t,n){64&e?function(e,t){U(t.type)?(e.onchange=G,e.onclick=$):e.oninput=Y}(t,n):256&e?function(e){e.onchange=Q}(t):128&e&&function(e,t){e.oninput=X,t.onChange&&(e.onchange=ee)}(t,n)}function re(e){return e.type&&U(e.type)?!a(e.checked):!a(e.value)}function oe(e,t){se(e),t&&e.dom&&(function(e,t){e.removeChild(t)}(t,e.dom),e.dom=null)}function se(e){var t=e.flags;if(481&t){var n=e.ref,i=e.props;u(n)&&n(null);var r=e.children,o=e.childFlags;if(12&o?ae(r):2===o&&se(r),!d(i))for(var s in i)switch(s){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":N(s,null,e.dom)}}else{var l=e.children;if(l)if(14&t){var c=e.ref;4&t?(u(l.componentWillUnmount)&&l.componentWillUnmount(),u(c)&&c(null),l.$UN=!0,l.$LI&&se(l.$LI)):(!a(c)&&u(c.onComponentWillUnmount)&&c.onComponentWillUnmount(e.dom,e.props||R),se(l))}else 1024&t&&oe(l,e.type)}}function ae(e){for(var t=0,n=e.length;t<n;t++)se(e[t])}function le(e,t){ae(t),e.textContent=""}function ue(e,t){switch(e){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return t;default:return t+"px"}}function ce(e,t,n,i,r,o,s){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":N(e,n,i);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":break;case"autoFocus":i.autofocus=!!n;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[e]=!!n;break;case"defaultChecked":case"value":case"volume":if(o&&"value"===e)return;var l=a(n)?"":n;i[e]!==l&&(i[e]=l);break;case"dangerouslySetInnerHTML":var f=t&&t.__html||"",p=n&&n.__html||"";f!==p&&(a(p)||V(i,p)||(d(s)||(12&s.childFlags?ae(s.children):2===s.childFlags&&se(s.children),s.children=null,s.childFlags=1),i.innerHTML=p));break;default:"o"===e[0]&&"n"===e[1]?function(e,t,n,i){var r=e.toLowerCase();if(u(n)||a(n)){var o=i[r];o&&o.wrapped||(i[r]=n)}else{var s=n.event;s&&u(s)&&(i[r]=function(e,t){return function(n){e(t.data,n)}}(s,n))}}(e,0,n,i):a(n)?i.removeAttribute(e):"style"===e?function(e,t,n){var i,r,o=n.style;if(c(t))o.cssText=t;else if(a(e)||c(e))for(i in t)r=t[i],o[i]=h(r)?ue(i,r):r;else{for(i in t)(r=t[i])!==e[i]&&(o[i]=h(r)?ue(i,r):r);for(i in e)a(t[i])&&(o[i]="")}}(t,n,i):r&&M[e]?i.setAttributeNS(M[e],e,n):i.setAttribute(e,n)}}function he(e,t,n,i,r){var o=!1,s=(448&t)>0;for(var a in s&&(o=re(n))&&ie(t,i,n),n)ce(a,null,n[a],i,r,o,null);s&&ne(t,e,i,n,!0,o)}function de(e,t,n,i){var r=new t(n,i);if(e.children=r,r.$V=e,r.$BS=!1,r.context=i,r.props===R&&(r.props=n),r.$UN=!1,u(r.componentWillMount)){if(r.$BR=!0,r.componentWillMount(),r.$PSS){var o=r.state,s=r.$PS;if(d(o))r.state=s;else for(var l in s)o[l]=s[l];r.$PSS=!1,r.$PS=null}r.$BR=!1}u(_.beforeRender)&&_.beforeRender(r);var c,h=fe(r.render(n,r.state,i),e);return u(r.getChildContext)&&(c=r.getChildContext()),a(c)?r.$CX=i:r.$CX=p(i,c),u(_.afterRender)&&_.afterRender(r),r.$LI=h,r}function fe(e,t){return l(e)?e=x():s(e)?e=b(e,null):(e.dom&&(e=C(e)),14&e.flags&&(e.parentVNode=t)),e}function pe(e,t,n,i){var r=e.flags;return 481&r?ve(e,t,n,i):14&r?function(e,t,n,i,r){var o,s=e.type,a=e.props||R,l=e.ref;if(r){var u=de(e,s,a,n);e.dom=o=pe(u.$LI,null,u.$CX,i),ye(0,l,u),u.$UPD=!1}else{var c=fe(s(a,n),e);e.children=c,e.dom=o=pe(c,null,n,i),be(a,l,o)}return d(t)||O(t,o),o}(e,t,n,i,(4&r)>0):512&r||16&r?ge(e,t):1024&r?(pe(e.children,e.type,n,!1),e.dom=ge(x(),t)):void 0}function ge(e,t){var n=e.dom=document.createTextNode(e.children);return d(t)||O(t,n),n}function ve(e,t,n,i){var r=e.flags,o=e.children,s=e.props,l=e.className,c=e.ref,h=e.childFlags;i=i||(32&r)>0;var f=function(e,t){return!0===t?document.createElementNS(A,e):document.createElement(e)}(e.type,i);if(e.dom=f,a(l)||""===l||(i?f.setAttribute("class",l):f.className=l),d(t)||O(t,f),0==(1&h)){var p=!0===i&&"foreignObject"!==e.type;2===h?pe(o,f,n,p):12&h&&me(o,f,n,p)}return d(s)||he(e,r,s,f,i),u(c)&&we(f,c),f}function me(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var s=e[r];d(s.dom)||(e[r]=s=C(s)),pe(s,t,n,i)}}function ye(e,t,n){u(t)&&t(n),u(n.componentDidMount)&&P.push(function(e){return function(){e.componentDidMount()}}(n))}function be(e,t,n){a(t)||(u(t.onComponentWillMount)&&t.onComponentWillMount(e),u(t.onComponentDidMount)&&P.push(function(e,t,n){return function(){return e.onComponentDidMount(t,n)}}(t,n,e)))}function we(e,t){P.push(function(){return t(e)})}function Ce(e,t,n,i){var r=e.children,o=e.props,s=e.className,l=e.flags,c=e.ref;if(i=i||(32&l)>0,1!==t.nodeType||t.tagName.toLowerCase()!==e.type){var h=ve(e,null,n,i);e.dom=h,L(t.parentNode,h,t)}else{e.dom=t;var f=t.firstChild,p=e.childFlags;if(0==(1&p)){for(var g=null;f;)g=f.nextSibling,8===f.nodeType&&("!"===f.data?t.replaceChild(document.createTextNode(""),f):t.removeChild(f)),f=g;if(f=t.firstChild,2===p)d(f)?pe(r,t,n,i):(g=f.nextSibling,xe(r,f,n,i),f=g);else if(12&p)for(var v=0,m=r.length;v<m;v++){var y=r[v];d(f)?pe(y,t,n,i):(g=f.nextSibling,xe(y,f,n,i),f=g)}for(;f;)g=f.nextSibling,t.removeChild(f),f=g}else d(t.firstChild)||function(e,t){return Boolean(t&&t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html&&V(e,t.dangerouslySetInnerHTML.__html))}(t,o)||(t.textContent="",448&l&&(t.defaultValue=""));d(o)||he(e,l,o,t,i),a(s)?""!==t.className&&t.removeAttribute("class"):i?t.setAttribute("class",s):t.className=s,u(c)&&we(t,c)}}function xe(e,t,n,r){var o=e.flags;14&o?function(e,t,n,i,r){var o=e.type,s=e.ref,a=e.props||R;if(r){var l=de(e,o,a,n),u=l.$LI;xe(u,t,l.$CX,i),e.dom=u.dom,ye(0,s,l),l.$UPD=!1}else{var c=fe(o(a,n),e);xe(c,t,n,i),e.children=c,e.dom=c.dom,be(a,s,t)}}(e,t,n,r,(4&o)>0):481&o?Ce(e,t,n,r):16&o?function(e,t){if(3!==t.nodeType){var n=ge(e,null);e.dom=n,L(t.parentNode,n,t)}else{var i=e.children;t.nodeValue!==i&&(t.nodeValue=i),e.dom=t}}(e,t):512&o?e.dom=t:function(e){throw e||(e=i),new Error("Inferno Error: "+e)}()}function Se(e,t,n,i,r){se(e),L(n,pe(t,null,i,r),e.dom)}function ke(e,t,i,r,o){if(e!==t){var s=0|t.flags;e.flags!==s||2048&s?Se(e,t,i,r,o):481&s?function(e,t,n,i,r){var o=t.type;if(e.type!==o)Se(e,t,n,i,r);else{var s,l=e.dom,c=t.flags,h=e.props,d=t.props,f=!1,p=!1;if(t.dom=l,r=r||(32&c)>0,h!==d){var g=h||R;if((s=d||R)!==R)for(var v in(f=(448&c)>0)&&(p=re(s)),s){var m=g[v],y=s[v];m!==y&&ce(v,m,y,l,r,p,e)}if(g!==R)for(var b in g)s.hasOwnProperty(b)||a(g[b])||ce(b,g[b],null,l,r,p,e)}var w=e.children,C=t.children,x=t.ref,S=e.className,k=t.className;w!==C&&_e(e.childFlags,t.childFlags,w,C,l,i,r&&"foreignObject"!==o),f&&ne(c,t,l,s,!1,p),S!==k&&(a(k)?l.removeAttribute("class"):r?l.setAttribute("class",k):l.className=k),u(x)&&e.ref!==x&&we(l,x)}}(e,t,i,r,o):14&s?function(e,t,i,r,o,s){var l=t.type,c=e.key,h=t.key;if(e.type!==l||c!==h)Se(e,t,i,r,o);else{var d=t.props||R;if(s){var f=e.children;f.$UPD=!0,f.$V=t,De(f,f.state,t,d,i,r,o,!1,!1),f.$UPD=!1}else{var p=!0,g=e.props,v=t.ref,m=!a(v),y=e.children;if(t.dom=e.dom,t.children=y,m&&u(v.onComponentShouldUpdate)&&(p=v.onComponentShouldUpdate(g,d)),!1!==p){m&&u(v.onComponentWillUpdate)&&v.onComponentWillUpdate(g,d);var b=l(d,r);b!==n&&(b=fe(b,t),ke(y,b,i,r,o),t.children=b,t.dom=b.dom,m&&u(v.onComponentDidUpdate)&&v.onComponentDidUpdate(g,d))}else 14&y.flags&&(y.parentVNode=t)}}}(e,t,i,r,o,(4&s)>0):16&s?function(e,t,n){var i,r=t.children;d(n.firstChild)?(n.textContent=r,i=n.firstChild):(i=e.dom,r!==e.children&&(i.nodeValue=r)),t.dom=i}(e,t,i):512&s?t.dom=e.dom:function(e,t,n){var i=e.type,r=t.type,o=t.children;if(_e(e.childFlags,t.childFlags,e.children,o,i,n,!1),t.dom=e.dom,i!==r&&!l(o)){var s=o.dom;i.removeChild(s),r.appendChild(s)}}(e,t,r)}}function _e(e,t,n,i,r,o,s){switch(e){case 2:switch(t){case 2:ke(n,i,r,o,s);break;case 1:oe(n,r);break;default:oe(n,r),me(i,r,o,s)}break;case 1:switch(t){case 2:pe(i,r,o,s);break;case 1:break;default:me(i,r,o,s)}break;default:if(12&t){var a=n.length,l=i.length;0===a?l>0&&me(i,r,o,s):0===l?le(r,n):8===t&&8===e?function(e,t,n,i,r,o,s){var a,l,u=o-1,c=s-1,h=0,d=e[h],f=t[h];e:{for(;d.key===f.key;){if(f.dom&&(t[h]=f=C(f)),ke(d,f,n,i,r),e[h]=f,++h>u||h>c)break e;d=e[h],f=t[h]}for(d=e[u],f=t[c];d.key===f.key;){if(f.dom&&(t[c]=f=C(f)),ke(d,f,n,i,r),e[u]=f,c--,h>--u||h>c)break e;d=e[u],f=t[c]}}if(h>u){if(h<=c)for(var p=(l=c+1)<s?t[l].dom:null;h<=c;)(f=t[h]).dom&&(t[h]=f=C(f)),h++,T(n,pe(f,null,i,r),p)}else if(h>c)for(;h<=u;)oe(e[h++],n);else{var g=h,v=h,m=u-h+1,y=c-h+1,b=[];for(a=0;a<y;a++)b.push(0);var w=m===o,x=!1,S=0,k=0;if(s<4||(m|y)<32)for(a=g;a<=u;a++)if(d=e[a],k<y){for(h=v;h<=c;h++)if(f=t[h],d.key===f.key){if(b[h-v]=a+1,w)for(w=!1;a>g;)oe(e[g++],n);S>h?x=!0:S=h,f.dom&&(t[h]=f=C(f)),ke(d,f,n,i,r),k++;break}!w&&h>c&&oe(d,n)}else w||oe(d,n);else{var _={};for(a=v;a<=c;a++)_[t[a].key]=a;for(a=g;a<=u;a++)if(d=e[a],k<y)if(void 0!==(h=_[d.key])){if(w)for(w=!1;a>g;)oe(e[g++],n);f=t[h],b[h-v]=a+1,S>h?x=!0:S=h,f.dom&&(t[h]=f=C(f)),ke(d,f,n,i,r),k++}else w||oe(d,n);else w||oe(d,n)}if(w)le(n,e),me(t,n,i,r);else if(x){var D=function(e){var t,n,i,r,o,s=e.slice(),a=[0],l=e.length;for(t=0;t<l;t++){var u=e[t];if(0!==u){if(n=a[a.length-1],e[n]<u){s[t]=n,a.push(t);continue}for(i=0,r=a.length-1;i<r;)e[a[o=(i+r)/2|0]]<u?i=o+1:r=o;u<e[a[i]]&&(i>0&&(s[t]=a[i-1]),a[i]=t)}}for(i=a.length,r=a[i-1];i-- >0;)a[i]=r,r=s[r];return a}(b);for(h=D.length-1,a=y-1;a>=0;a--)0===b[a]?((f=t[S=a+v]).dom&&(t[S]=f=C(f)),l=S+1,T(n,pe(f,null,i,r),l<s?t[l].dom:null)):h<0||a!==D[h]?(f=t[S=a+v],l=S+1,T(n,f.dom,l<s?t[l].dom:null)):h--}else if(k!==y)for(a=y-1;a>=0;a--)0===b[a]&&((f=t[S=a+v]).dom&&(t[S]=f=C(f)),l=S+1,T(n,pe(f,null,i,r),l<s?t[l].dom:null))}}(n,i,r,o,s,a,l):function(e,t,n,i,r,o,s){for(var a,l,u=o>s?s:o,c=0;c<u;c++)a=t[c],l=e[c],a.dom&&(a=t[c]=C(a)),ke(l,a,n,i,r),e[c]=a;if(o<s)for(c=u;c<s;c++)(a=t[c]).dom&&(a=t[c]=C(a)),pe(a,n,i,r);else if(o>s)for(c=u;c<o;c++)oe(e[c],n)}(n,i,r,o,s,a,l)}else 1===t?le(r,n):(le(r,n),pe(i,r,o,s))}}function De(e,t,i,r,o,s,l,c,h){var d,f=e.state,g=e.props;if(i.children=e,!e.$UN){if(g!==r||r===R){if(!h&&u(e.componentWillReceiveProps)){if(e.$BR=!0,e.componentWillReceiveProps(r,s),e.$UN)return;e.$BR=!1}e.$PSS&&(t=p(t,e.$PS),e.$PSS=!1,e.$PS=null)}var v=Boolean(e.shouldComponentUpdate);if(c||!v||v&&e.shouldComponentUpdate(r,t,s)){u(e.componentWillUpdate)&&(e.$BS=!0,e.componentWillUpdate(r,t,s),e.$BS=!1),e.props=r,e.state=t,e.context=s,u(_.beforeRender)&&_.beforeRender(e),d=e.render(r,t,s),u(_.afterRender)&&_.afterRender(e);var m,y=d!==n;if(u(e.getChildContext)&&(m=e.getChildContext()),m=a(m)?s:p(s,m),e.$CX=m,y){var b=e.$LI,w=e.$LI=fe(d,i);ke(b,w,o,m,l),u(e.componentDidUpdate)&&e.componentDidUpdate(g,f)}}else e.props=r,e.state=t,e.context=s;i.dom=e.$LI.dom}}function Ee(e,t,i){if(e!==n){var r=t.$V;return a(r)?l(e)||(e.dom&&(e=C(e)),d(t.firstChild)?(pe(e,t,R,!1),t.$V=e):function(e,t,n){var i=t.firstChild;if(!d(i))for(l(e)||xe(e,i,R,!1),i=t.firstChild;i=i.nextSibling;)t.removeChild(i);P.length>0&&I(P),t.$V=e,u(n)&&n()}(e,t),r=e):a(e)?(oe(r,t),t.$V=null):(e.dom&&(e=C(e)),ke(r,e,t,R,!1),r=t.$V=e),P.length>0&&I(P),u(i)&&i(),u(_.renderComplete)&&_.renderComplete(r),r&&14&r.flags?r.children:void 0}}r&&document.body;var Ae="undefined"==typeof Promise?null:Promise.resolve(),Me="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window);function Re(e,t,n,i){u(t)&&(t=t(e.state,e.props,e.context));var r=e.$PS;if(a(r))e.$PS=t;else for(var o in t)r[o]=t[o];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&u(n)&&P.push(n.bind(e));else if(e.$UPD){var s=e.$QU;d(s)&&(s=e.$QU=[],function(e){if(Ae)return Ae.then(e);Me(e)}(function(e,t){return function(){e.$QU=null,e.$UPD=!0,Pe(e,!1,function(){for(var n=0,i=t.length;n<i;n++)t[n].call(e)}),e.$UPD=!1}}(e,s))),u(n)&&s.push(n)}else e.$PSS=!0,e.$UPD=!0,Pe(e,i,n),e.$UPD=!1}function Pe(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var i=e.$PS,r=e.state,o=p(r,i),s=e.props,a=e.context;e.$PS=null;var l=e.$V,c=e.$LI,h=c.dom&&c.dom.parentNode;if(De(e,o,l,s,h,a,(32&l.flags)>0,t,!0),e.$UN)return;if(0==(1024&e.$LI.flags))for(var f=e.$LI.dom;!d(l=l.parentVNode);)(14&l.flags)>0&&(l.dom=f);P.length>0&&I(P)}else e.state=e.$PS,e.$PS=null;u(n)&&n.call(e)}}var Oe=function(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||R,this.context=t||R};Oe.prototype.forceUpdate=function(e){this.$UN||Re(this,{},e,!0)},Oe.prototype.setState=function(e,t){this.$UN||this.$BS||Re(this,e,t,!1)},Oe.prototype.render=function(e,t,n){},Object.freeze({});var Te=12,Le=37,Ie=38,Fe=39,He=40,Ne=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},je=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ve=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},We=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ze=function(e){function t(){return Ne(this,t),We(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ve(t,e),je(t,[{key:"click",value:function(e){var t=this,n=function(){t.props.node.toggleCheck()};this.props.dom._tree.emit("node.click",e,this.props.node,n),e.treeDefaultPrevented||n()}},{key:"render",value:function(){return m(64,"input",null,null,1,{checked:this.props.checked,indeterminate:this.props.indeterminate,onClick:this.click.bind(this),type:"checkbox"})}}]),t}(Oe),Ue=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"li",i=t.itree[n].attributes,r=[],o=i.class||i.className;return e.isFunction(o)&&(o=o(t)),e.isEmpty(o)||(e.isString(o)?r=r.concat(o.split(/[\s\.]+/)):e.isArray(o)&&(r=r.concat(o))),r},Ye=function(e){function t(){return Ne(this,t),We(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ve(t,e),je(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"add",value:function(e){e.stopPropagation(),this.props.node.addChild({text:"New Node",itree:{state:{editing:!0,focused:!0}}}),this.props.node.expand()}},{key:"edit",value:function(e){e.stopPropagation(),this.props.node.toggleEditing()}},{key:"remove",value:function(e){e.stopPropagation(),this.props.node.remove()}},{key:"render",value:function(){var e=[];return this.props.dom._tree.config.editing.edit&&e.push(m(1,"a","btn icon icon-pencil",null,1,{onclick:this.edit.bind(this),title:"Edit this node"})),this.props.dom._tree.config.editing.add&&e.push(m(1,"a","btn icon icon-plus",null,1,{onclick:this.add.bind(this),title:"Add a child node"})),this.props.dom._tree.config.editing.remove&&e.push(m(1,"a","btn icon icon-minus",null,1,{onclick:this.remove.bind(this),title:"Remove this node"})),m(1,"span","btn-group",e,0)}}]),t}(Oe),Ge=function(e){function t(){return Ne(this,t),We(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ve(t,e),je(t,[{key:"render",value:function(){return m(1,"ol",null,m(1,"li","leaf",m(1,"span","title icon icon-file-empty empty",this.props.text,0),2),2)}}]),t}(Oe);function $e(t,n){var i=n.dirty||!1;return i||e.each(Object.keys(n),function(e){if("dirty"!==e&&n[e]!==t[e])return i=!0,!1}),i}var Ke=function(e){function t(e){Ne(this,t);var n=We(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStateFromNodes(e.node),n}return Ve(t,e),je(t,[{key:"getStateFromNodes",value:function(e){return{text:e.text}}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.getStateFromNodes(e.node))}},{key:"shouldComponentUpdate",value:function(e,t){return $e(this.state,t)}},{key:"click",value:function(e){var t=this,n=function(){t.props.node.toggleCheck()};this.props.dom._tree.emit("node.click",e,this.props.node,n),e.treeDefaultPrevented||n()}},{key:"keypress",value:function(e){if(e.which===Te)return this.save()}},{key:"input",value:function(e){this.setState({text:e.target.value})}},{key:"cancel",value:function(e){e&&e.stopPropagation(),this.props.node.toggleEditing()}},{key:"save",value:function(e){e&&e.stopPropagation();var t=this.props.node.text,n=this.ref.value;this.props.node.set("text",n),this.props.node.state("editing",!1),this.props.node.markDirty(),this.props.dom._tree.applyChanges(),t!==n&&this.props.dom._tree.emit("node.edited",this.props.node,t,n)}},{key:"render",value:function(){var e=this;return m(1,"form",null,[m(64,"input",null,null,1,{onClick:function(e){return e.stopPropagation},onInput:this.input.bind(this),onKeyPress:this.keypress.bind(this),value:this.state.text},null,function(t){return e.ref=t}),m(1,"span","btn-group",[m(1,"button","btn icon icon-check",null,1,{onClick:this.save.bind(this),title:"Save",type:"button"}),m(1,"button","btn icon icon-cross",null,1,{onClick:this.cancel.bind(this),title:"Cancel",type:"button"})],4)],4,{onsubmit:function(e){return e.preventDefault}})}}]),t}(Oe),qe=function(t){function n(){return Ne(this,n),We(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Ve(n,t),je(n,[{key:"blur",value:function(){this.props.node.blur()}},{key:"click",value:function(e){var t=this,n=this.props,i=n.node,r=n.dom,o=function(){if(e.preventDefault(),!t.props.editing){if((e.metaKey||e.ctrlKey||e.shiftKey)&&r._tree.disableDeselection(),e.shiftKey){r.clearSelection();var n=r._tree.lastSelectedNode();n&&r._tree.selectBetween.apply(r._tree,r._tree.boundingNodes(n,i))}i.selected()?r._tree.config.selection.disableDirectDeselection||i.deselect():i.select(),r._tree.enableDeselection()}};r._tree.emit("node.click",e,i,o),e.treeDefaultPrevented||o()}},{key:"contextMenu",value:function(e){var t=this.props,n=t.node,i=t.dom;i._tree.emit("node.contextmenu",e,n)}},{key:"dblclick",value:function(e){var t=this.props,n=t.node,i=t.dom,r=function(){i.clearSelection(),n.toggleCollapse()};i._tree.emit("node.dblclick",e,n,r),e.treeDefaultPrevented||r()}},{key:"focus",value:function(e){this.props.node.focus(e)}},{key:"mousedown",value:function(){this.props.dom.isDragDropEnabled&&(this.props.dom.isMouseHeld=!0)}},{key:"render",value:function(){var t=this.props.node,n=e.clone(t.itree.a.attributes)||{};n.tabindex=1,n.unselectable="on";var i=Ue(t,"a").concat(["title","icon"]);if(!this.props.dom.config.showCheckboxes){var r=this.props.expanded?"icon-folder-open":"icon-folder";i.push(t.itree.icon||(this.props.hasOrWillHaveChildren?r:"icon-file-empty"))}n.class=n.className=i.join(" ");var o=t.text;return t.editing()&&(o=y(2,Ke,{dom:this.props.dom,node:this.props.node})),w(m(1,"a",null,o,0,Be({"data-uid":t.id,onBlur:this.blur.bind(this),onClick:this.click.bind(this),onContextMenu:this.contextMenu.bind(this),onDblClick:this.dblclick.bind(this),onFocus:this.focus.bind(this),onMouseDown:this.mousedown.bind(this)},n)))}}]),n}(Oe),Ze=function(e){function t(){return Ne(this,t),We(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ve(t,e),je(t,[{key:"className",value:function(){return"toggle icon "+(this.props.collapsed?"icon-expand":"icon-collapse")}},{key:"render",value:function(){return m(1,"a",this.className(),null,1,{onClick:this.props.node.toggleCollapse.bind(this.props.node)})}}]),t}(Oe),Qe=function(n){function i(e){Ne(this,i);var t=We(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state=t.stateFromNode(e.node),t}return Ve(i,n),je(i,[{key:"stateFromNode",value:function(e){return{dirty:e.itree.dirty}}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.stateFromNode(e.node))}},{key:"shouldComponentUpdate",value:function(e,t){return t.dirty}},{key:"getAttributes",value:function(){var t=this.props.node,n=e.clone(t.itree.li.attributes)||{};return n.class=n.className=this.getClassNames(),n["data-uid"]=t.id,this.props.dom.config.dragAndDrop.enabled&&(n.draggable=t.state("draggable"),n.onDragEnd=this.onDragEnd.bind(this),n.onDragEnter=this.onDragEnter.bind(this),n.onDragLeave=this.onDragLeave.bind(this),n.onDragStart=this.onDragStart.bind(this),t.state("drop-target")?(n.onDragOver=this.onDragOver.bind(this),n.onDrop=this.onDrop.bind(this)):(n.onDragOver=null,n.onDrop=null)),n}},{key:"getClassNames",value:function(){var t=this.props.node,n=t.itree.state,i=Ue(t);return e.each(Object.keys(n),function(e){n[e]&&i.push(e)}),!t.hidden()&&t.removed()&&i.push("hidden"),t.expanded()&&i.push("expanded"),i.push(t.hasOrWillHaveChildren()?"folder":"leaf"),i.join(" ")}},{key:"getTargetDirection",value:function(e,t){var n=e.clientY,i=t.getBoundingClientRect(),r=i.top+i.height/3,o=i.bottom-i.height/3,s=0;return n<=r?s=-1:n>=o&&(s=1),s}},{key:"onDragStart",value:function(n){n.stopPropagation(),n.dataTransfer.effectAllowed="move",n.dataTransfer.dropEffect="move";var i=this.props.node;if(this.props.dom._activeDragNode=i,n.dataTransfer.setData("treeId",i.tree().id),n.dataTransfer.setData("nodeId",i.id),i.state("drop-target",!1),i.hasChildren()&&i.children.stateDeep("drop-target",!1),"dragstart"===this.props.dom.config.dragAndDrop.validateOn){var r=this.props.dom.config.dragAndDrop.validate,o=e.isFunction(r);this.props.dom._tree.batch(),function n(i,r){t.isTreeNodes(i)?e.each(i,function(e){n(e,r)}):t.isTreeNode(i)&&!1!==r(i)&&i.hasChildren()&&n(i.children,r)}(this.props.dom._tree.model,function(e){var t=e.id!==i.id;return t&&(t=!e.hasAncestor(i)),t&&o&&(t=r(i,e)),e.state("drop-target",t),t}),this.props.dom._tree.end()}this.props.dom._tree.emit("node.dragstart",n)}},{key:"onDragEnd",value:function(e){e.preventDefault(),e.stopPropagation(),this.unhighlightTarget(),this.props.dom._tree.emit("node.dragend",e)}},{key:"onDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.node.recurseUp(this.unhighlightTarget),this.props.node.state("drag-targeting",!0),this.props.dom._tree.emit("node.dragenter",e)}},{key:"onDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.unhighlightTarget(),this.props.dom._tree.emit("node.dragleave",e)}},{key:"onDragOver",value:function(t){t.preventDefault(),t.stopPropagation();var n=this.props.dom._activeDragNode,i=this.props.node,r=this.getTargetDirection(t,i.itree.ref.querySelector("a"));if("dragover"===this.props.dom.config.dragAndDrop.validateOn){var o=this.props.dom.config.dragAndDrop.validate,s=e.isFunction(o),a=n.id!==i.id;if(a&&(a=!i.hasAncestor(n)),a&&s&&(a=o(n,i,r)),i.state("drop-target",a),this.props.dom._tree.applyChanges(),!a)return}this.props.dom._tree.batch(),i.state("drag-targeting",!0),i.state("drag-targeting-above",-1===r),i.state("drag-targeting-below",1===r),i.state("drag-targeting-insert",0===r),this.props.dom._tree.end(),this.props.dom._tree.emit("node.dragover",t,r)}},{key:"onDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.unhighlightTarget();var t=e.dataTransfer.getData("treeId"),n=e.dataTransfer.getData("nodeId"),i=this.props.node;this.props.dom._activeDragNode=null;var r=this.getTargetDirection(e,e.target),o=void 0;t===this.props.dom._tree.id?o=this.props.dom._tree:t&&(o=document.querySelector('[data-uid="'+t+'"]').inspireTree);var s=void 0,a=void 0;if(o){var l=o.node(n);l.state("drop-target",!0);var u=l.remove(!0),c=i.context().indexOf(i);0===r?(s=i.addChild(u),a=i.children.indexOf(s),i.expand()):(a=1===r?++c:c,s=i.context().insertAt(a,u))}this.props.dom._tree.emit("node.drop",e,s,i,a)}},{key:"unhighlightTarget",value:function(e){(e||this.props.node).states(["drag-targeting","drag-targeting-above","drag-targeting-below","drag-targeting-insert"],!1)}},{key:"renderCheckbox",value:function(){var e=this.props.node;if(this.props.dom.config.showCheckboxes)return y(2,ze,{checked:e.checked(),dom:this.props.dom,indeterminate:e.indeterminate(),node:e})}},{key:"renderChildren",value:function(){var e=this.props,t=e.node,n=e.dom;if(t.hasChildren()){var i=t.children,r=n.loading,o=i.pagination();return y(2,Je,{context:t,dom:n,limit:o.limit,loading:r,nodes:i,total:o.total})}if(this.props.dom.isDynamic&&t.children)return t.hasLoadedChildren()?y(2,Ge,{text:"No Results"}):y(2,Ge,{text:"Loading..."})}},{key:"renderEditToolbar",value:function(){if(this.props.dom._tree.config.editing.edit&&!this.props.node.editing())return y(2,Ye,{dom:this.props.dom,node:this.props.node})}},{key:"renderToggle",value:function(){var e=this.props.node,t=this.props.dom.isDynamic?Boolean(e.children):e.hasVisibleChildren();if(t)return y(2,Ze,{collapsed:e.collapsed(),node:e})}},{key:"render",value:function(){var e=this,t=this.props.node,n=w(m(1,"li",null,[this.renderEditToolbar(),m(1,"div","title-wrap",[this.renderToggle(),this.renderCheckbox(),y(2,qe,{dom:this.props.dom,editing:t.editing(),expanded:t.expanded(),hasOrWillHaveChildren:t.hasOrWillHaveChildren(),node:t,text:t.text})],0),m(1,"div","wholerow"),this.renderChildren()],0,Be({},this.getAttributes()),null,function(t){return e.node=e.props.node.itree.ref=t}));return this.props.node.state("rendered",!0),this.props.node.itree.dirty=!1,n}}]),i}(Oe),Je=function(t){function n(){return Ne(this,n),We(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return Ve(n,t),je(n,[{key:"shouldComponentUpdate",value:function(t){return e.find(t.nodes,"itree.dirty")||$e(this.props,t)}},{key:"isDeferred",value:function(){return this.props.dom.config.deferredRendering||this.props.dom._tree.config.deferredLoading}},{key:"loadMore",value:function(e){e.preventDefault(),this.props.context?this.props.context.loadMore(e):this.props.dom._tree.loadMore(e)}},{key:"renderLoadMoreNode",value:function(){return m(1,"li","leaf detached",m(1,"a","title icon icon-more load-more",b("Load More"),2,{onClick:this.loadMore.bind(this)}),2)}},{key:"renderLoadingTextNode",value:function(){return m(1,"li","leaf",m(1,"span","title icon icon-more",b("Loading..."),2),2)}},{key:"render",value:function(){var t=this,n=this.props.nodes,i=n.pagination();if(this.props.dom.config.deferredRendering){var r=0;n=this.props.nodes.filter(function(e){var t=!(e.hidden()||e.removed());return t&&r++,r<=i.limit&&t})}var o=e.map(n,function(e){return y(2,Qe,{dom:t.props.dom,node:e},e.id)});return this.isDeferred()&&i.limit<i.total&&(this.props.loading?o.push(this.renderLoadingTextNode()):o.push(this.renderLoadMoreNode())),m(1,"ol",null,[o,this.props.children],0)}}]),n}(Oe),Xe=function(e){function t(){return Ne(this,t),We(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ve(t,e),je(t,[{key:"add",value:function(){this.props.dom._tree.focused().blur(),this.props.dom._tree.addNode({text:"New Node",itree:{state:{editing:!0,focused:!0}}})}},{key:"renderAddLink",value:function(){if(this.props.dom._tree.config.editing.add)return m(1,"li",null,m(1,"a","btn icon icon-plus",null,1,{onClick:this.add.bind(this),title:"Add a new root node"}),2)}},{key:"render",value:function(){var e=this.props,t=e.dom,n=e.nodes,i=t.loading,r=n.pagination();return y(2,Je,{dom:t,limit:r.limit,loading:i,nodes:n,total:r.total,children:this.renderAddLink()})}}]),t}(Oe);return function(){function n(i,r){var o=this;if(Ne(this,n),!(i instanceof t))throw new TypeError("Tree argument is not an InspireTree instance.");if(this._tree=i,this.batching=0,this.dropTargets=[],this.$scrollLayer,!r.target)throw new TypeError("Invalid `target` property - must be a selector, HTMLElement, or jQuery element.");i.usesNativeDOM=!0;var s={enabled:!1,validateOn:"dragstart",validate:null};this.config=e.defaultsDeep({},r,{autoLoadMore:!0,deferredRendering:!1,dragAndDrop:s,nodeHeight:25,showCheckboxes:!1,tabindex:-1,target:!1}),!0===r.dragAndDrop&&(this.config.dragAndDrop=s,this.config.dragAndDrop.enabled=!0),"checkbox"!==i.config.selection.mode||e.isBoolean(e.get(r,"showCheckboxes"))||(this.config.showCheckboxes=!0),this.isDynamic=e.isFunction(this._tree.config.data),this.attach(this.config.target);var a=!0;i.on("changes.applied",function(){o.renderNodes(),a&&(o.scrollSelectedIntoView(),a=!1)}),this.renderNodes()}return je(n,[{key:"attach",value:function(t){if(this.$target=this.getElement(t),this.$scrollLayer=this.getScrollableAncestor(this.$target),!this.$target)throw new Error("No valid element to attach to.");this.$target.setAttribute("data-uid",this._tree.id);var n=this.$target.className.split(" ");if(n.push("inspire-tree"),this._tree.config.editable&&(n.push("editable"),e.each(e.pickBy(this._tree.config.editing,e.identity),function(e,t){n.push("editable-"+t)})),this.$target.className=n.join(" "),this.$target.setAttribute("tabindex",this.config.tabindex||0),this.$target.addEventListener("keydown",this.keyboardListener.bind(this)),this.config.dragAndDrop.enabled&&(this.$target.addEventListener("dragenter",this.onDragEnter.bind(this),!1),this.$target.addEventListener("dragleave",this.onDragLeave.bind(this),!1),this.$target.addEventListener("dragover",this.onDragOver.bind(this),!1),this.$target.addEventListener("drop",this.onDrop.bind(this),!1),this.$target.classList.add("drag-and-drop")),this._tree.on("node.focused",function(e){var t=e.itree.ref.querySelector(".title");t!==document.activeElement&&t.focus()}),this.config.deferredRendering||this._tree.config.deferredLoading){var i=this._tree.config.pagination.limit;this._tree.config.pagination.limit=i>0?i:e.ceil(this.$scrollLayer.clientHeight/this.config.nodeHeight),this.config.autoLoadMore&&this.$target.addEventListener("scroll",e.throttle(this.scrollListener.bind(this),20))}this.$target.inspireTree=this._tree}},{key:"clearSelection",value:function(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}},{key:"getElement",value:function(t){var n=void 0;if(t instanceof HTMLElement)n=t;else if(e.isObject(t)&&e.isObject(t[0]))n=t[0];else if(e.isString(t)){var i=document.querySelector(t);i&&(n=i)}return n}},{key:"getScrollableAncestor",value:function(e){if(e instanceof Element){var t=getComputedStyle(e);"auto"!==t.overflow&&e.parentNode&&(e=this.getScrollableAncestor(e.parentNode))}return e}},{key:"keyboardListener",value:function(e){if(e.stopPropagation(),!([He,Te,Le,Fe,Ie].indexOf(e.which)<0)){var t=this._tree.focused();if(t.length)switch(e.preventDefault(),e.which){case He:this.moveFocusDownFrom(t[0]);break;case Te:t[0].toggleSelect();break;case Le:t[0].collapse();break;case Fe:t[0].expand();break;case Ie:this.moveFocusUpFrom(t[0])}}}},{key:"moveFocusDownFrom",value:function(e){var t=e.nextVisibleNode();t&&t.focus()}},{key:"moveFocusUpFrom",value:function(e){var t=e.previousVisibleNode();t&&t.focus()}},{key:"nodeFromTitleDOMElement",value:function(e){var t=e.parentNode.parentNode.getAttribute("data-uid");return this._tree.node(t)}},{key:"onDragEnter",value:function(e){e.preventDefault(),e.target.classList.add("drag-targeting","drag-targeting-insert")}},{key:"onDragLeave",value:function(e){e.preventDefault(),this.unhighlightTarget(e.target)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDrop",value:function(e){e.preventDefault(),this.unhighlightTarget(e.target);var t=e.dataTransfer.getData("treeId"),i=e.dataTransfer.getData("nodeId"),r=n.getTreeById(t),o=r.node(i);o.state("drop-target",!0);var s=o.remove(!0),a=this._tree.addNode(s),l=this._tree.indexOf(a);this._tree.emit("node.drop",e,a,null,l)}},{key:"renderNodes",value:function(e){Ee(y(2,Xe,{dom:this,nodes:e||this._tree.nodes()}),this.$target)}},{key:"scrollListener",value:function(t){var n=this;if(!this.rendering&&!this.loading){var i=this.$scrollLayer.getBoundingClientRect(),r=document.querySelectorAll(".load-more");e.each(r,function(e){var r=e.getBoundingClientRect(),o=!(i.right<r.left||i.left>r.right||i.bottom<r.top||i.top>r.bottom);if(o){var s=void 0,a=e.parentNode.parentNode.parentNode;"LI"===a.tagName&&(s=n._tree.node(a.getAttribute("data-uid"))),n._tree.loadMore(s,t)}})}}},{key:"scrollSelectedIntoView",value:function(){var e=this.$target.querySelector(".selected");e&&this.$scrollLayer&&(this.$scrollLayer.scrollTop=e.offsetTop)}},{key:"unhighlightTarget",value:function(e){e&&e.classList.remove("drag-targeting","drag-targeting-insert")}}],[{key:"getTreeById",value:function(e){var t=document.querySelector('[data-uid="'+e+'"]');if(t)return t.inspireTree}}]),n}()}(n(38),n(21))},function(e,t,n){"use strict";Math.sign=Math.sign=function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},"function"!=typeof Array.prototype.findIndex&&(Array.prototype.findIndex=function(e){for(var t=arguments[1],n=0,i=this.length;n<i;n++)if(e.call(t,this[n],n,this))return n;return-1}),"function"!=typeof Array.prototype.fill&&(Array.prototype.fill=function(e,t,n){t=void 0===t?0:t<0?this.length+t:t,n=void 0===n?this.length:n<0?this.length+n:n;for(var i=t||0;i<n;++i)this[i]=e;return this}),"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}),"function"!=typeof Object.getOwnPropertyDescriptors&&(Object.getOwnPropertyDescriptors=function(e){return Object.getOwnPropertyNames(e).reduce(function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t},{})})},function(e,t,n){"use strict";var i=n(43);function r(e,t){var n,o,s,a,l,u,c=r.prefix;if("boolean"==typeof e?n=2:(t=e,e=r.before,n=1),!(o=document.getElementById(c+t))){if(s=document.querySelector("head"),e&&(a=Array.prototype.slice.call(s.children).find(function(e){var t=e.getAttribute("id");return"STYLE"===e.tagName&&(!t||t.indexOf(c)!==c)||"LINK"===e.tagName&&"stylesheet"===e.getAttribute("rel")})),!(l=this[t]))throw"Expected to find member `"+t+"` in calling context.";u=["<style>\n"+l+"\n</style>\n",s,a||null],arguments.length>1&&(u=u.concat(Array.prototype.slice.call(arguments,n))),(o=i.append.apply(null,u)[0]).id=c+t}return o}r.before=!0,r.prefix="injected-stylesheet-",e.exports=r},function(e,t,n){"use strict";function i(e,t){var n=arguments.length>1;if("function"==typeof e&&(e=e.call(this)),n){var r=arguments;e=(e=e.replace(i.replacersRegex,function(e,t){return t-=-1,r.length>t?r[t]:""})).replace(i.encodersRegex,function(e,t){if(t-=-1,r.length>t){var n=document.createElement("DIV");return n.textContent=r[t],n.innerHTML}return""})}return e}function r(e,t,n){var r="object"!=typeof t,o=Array.prototype.slice.call(arguments,1);return r?(t=document.createElement("DIV"),o.unshift(e)):o[0]=e,t.innerHTML=i.apply(null,o),t}i.encodersRegex=/%\{(\d+)\}/g,i.replacersRegex=/\$\{(.*?)\}/g,i.format=i,i.replace=r,i.append=function(e,t,n,i){var o=3;"object"!=typeof n&&(n=null,o=2),i=Array.prototype.slice.call(arguments,o);for(var s=[],a=r.apply(null,[e].concat(i));a.childNodes.length;)s.push(a.firstChild),t.insertBefore(a.firstChild,n);return s},i.firstChild=function(e,t){return r.apply(null,arguments).firstChild},i.firstElement=function(e,t){return r.apply(null,arguments).firstElementChild},e.exports=i},function(e,t,n){"use strict";t.grid=[".hypergrid-container {","\tposition: relative;","\theight: 500px;","}",".hypergrid-container > div:first-child {","\tposition: absolute;","\tleft: 0;","\ttop: 0;","\tright: 0;","\tbottom: 0;","}",".hypergrid-container > div:first-child > div.info {","\tposition: absolute;","\tdisplay: none; /* initially hidden */","\tmargin-top: 150px; /* to place below headers */","\tcolor: #eee;","\ttext-shadow: 1px 1px #ccc;","\tfont-size: 36pt;","\tfont-weight: bold;","\ttext-align: center;","\ttop: 0; right: 0; bottom: 0; left: 0;","}",".hypergrid-textfield {","\tposition: absolute;","\tfont-size: 12px;","\tcolor: black;","\tbackground-color: ivory;","\tbox-sizing: border-box;","\tmargin: 0;","\tpadding: 0 5px;","\tborder: 0; /*border: 1px solid #777;*/","\toutline: 0;","}","",""].join("\n")},function(e,t,n){"use strict";console.warn||(console.warn=function(){console.log.apply(console,["WARNING:"].concat(Array.prototype.slice.call(arguments)))});var i=/^[\w\.]+\(.*\)$/,r=function(e,t,n,s,a){"string"==typeof s&&(a=s,s=void 0);var l,u,c=t.split("."),h=this.$$DEPRECATION_WARNED=this.$$DEPRECATION_WARNED||{},d=this,f=t.indexOf(" ")>=0,p=i.test(e);if(e in h||(h[e]=r.warnings),!p){if(f)return void(h[e]&&(--h[e],console.warn(t)));throw"Expected method name with parentheses in 1st parameter OR simple warning (containing one or more spaces) in 2nd parameter of deprecated() call."}if(f)throw"Expected replacement method or property in 2nd parameter of deprecated() call.";h[e]&&(--h[e],l=i.test(t)?"method":"property",u="The ."+e+" method has been deprecated as of v"+n+" in favor of the ."+c.join(".")+" "+l+". (Will be removed in a future release.)",a&&(u+=" "+a),console.warn(u));var g=o(e);function v(e){var t=g.indexOf(e);if(-1===t)throw'Actual arg "'+e+'" not found in formal arg list '+g;return s[t]}for(var m=0,y=c.length-1;m<=y;++m){var b=c[m],w=b.match(/\w+/)[0],C=i.test(b),x=C?o(b):void 0,S=[];x?(S=x.map(v),d=d[w].apply(d,S)):d=C?d[w]():d[w]}return d};function o(e){return e.match(/^\w+\((.*)\)$/)[1].match(/(\w+)/g)}r.warnings=1,e.exports=r},function(e,t,n){"use strict";"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype);var i,r,o=n(3),s=200,a=[],l=[],u=function(){for(var e=[],t=["",""],n=0;n<256;n++)e[n]=t;return e[27]=["ESC","ESCSHIFT"],e[192]=["`","~"],e[49]=["1","!"],e[50]=["2","@"],e[51]=["3","#"],e[52]=["4","$"],e[53]=["5","%"],e[54]=["6","^"],e[55]=["7","&"],e[56]=["8","*"],e[57]=["9","("],e[48]=["0",")"],e[189]=["-","_"],e[187]=["=","+"],e[8]=["BACKSPACE","BACKSPACESHIFT"],e[46]=["DELETE","DELETESHIFT"],e[9]=["TAB","TABSHIFT"],e[81]=["q","Q"],e[87]=["w","W"],e[69]=["e","E"],e[82]=["r","R"],e[84]=["t","T"],e[89]=["y","Y"],e[85]=["u","U"],e[73]=["i","I"],e[79]=["o","O"],e[80]=["p","P"],e[219]=["[","{"],e[221]=["]","}"],e[220]=["\\","|"],e[220]=["CAPSLOCK","CAPSLOCKSHIFT"],e[65]=["a","A"],e[83]=["s","S"],e[68]=["d","D"],e[70]=["f","F"],e[71]=["g","G"],e[72]=["h","H"],e[74]=["j","J"],e[75]=["k","K"],e[76]=["l","L"],e[186]=[";",":"],e[222]=["'","|"],e[13]=["RETURN","RETURNSHIFT"],e[16]=["SHIFT","SHIFT"],e[90]=["z","Z"],e[88]=["x","X"],e[67]=["c","C"],e[86]=["v","V"],e[66]=["b","B"],e[78]=["n","N"],e[77]=["m","M"],e[188]=[",","<"],e[190]=[".",">"],e[191]=["/","?"],e[16]=["SHIFT","SHIFT"],e[17]=["CTRL","CTRLSHIFT"],e[18]=["ALT","ALTSHIFT"],e[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"],e[32]=["SPACE","SPACESHIFT"],e[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"],e[18]=["ALT","ALTSHIFT"],e[38]=["UP","UPSHIFT"],e[37]=["LEFT","LEFTSHIFT"],e[40]=["DOWN","DOWNSHIFT"],e[39]=["RIGHT","RIGHTSHIFT"],e[33]=["PAGEUP","PAGEUPSHIFT"],e[34]=["PAGEDOWN","PAGEDOWNSHIFT"],e[35]=["PAGERIGHT","PAGERIGHTSHIFT"],e[36]=["PAGELEFT","PAGELEFTSHIFT"],e[112]=["F1","F1SHIFT"],e[113]=["F2","F2SHIFT"],e[114]=["F3","F3SHIFT"],e[115]=["F4","F4SHIFT"],e[116]=["F5","F5SHIFT"],e[117]=["F6","F6SHIFT"],e[118]=["F7","F7SHIFT"],e[119]=["F8","F8SHIFT"],e[120]=["F9","F9SHIFT"],e[121]=["F10","F10SHIFT"],e[122]=["F11","F11SHIFT"],e[123]=["F12","F12SHIFT"],e}();function c(e,t,n){var i=this;this.div=e,this.component=t,this.dragEndtime=Date.now(),this.infoDiv=document.createElement("div"),this.infoDiv.className="info",this.div.appendChild(this.infoDiv),this.gc=g(this.canvas=document.createElement("canvas"),n),this.bc=g(this.buffer=document.createElement("canvas"),n),this.div.appendChild(this.canvas),this.canvas.style.outline="none",this.mouseLocation=new o.Point(-1,-1),this.dragstart=new o.Point(-1,-1),this.bounds=new o.Rectangle(0,0,0,0),this.hasMouse=!1,document.addEventListener("mousemove",function(e){(i.hasMouse||i.isDragging())&&i.finmousemove(e)}),document.addEventListener("mouseup",function(e){i.finmouseup(e)}),document.addEventListener("wheel",function(e){i.finwheelmoved(e)}),document.addEventListener("keydown",function(e){i.finkeydown(e)}),document.addEventListener("keyup",function(e){i.finkeyup(e)}),this.canvas.onmouseover=function(){i.hasMouse=!0},this.addEventListener("focus",function(e){i.finfocusgained(e)}),this.addEventListener("blur",function(e){i.finfocuslost(e)}),this.addEventListener("mousedown",function(e){i.finmousedown(e)}),this.addEventListener("mouseout",function(e){i.hasMouse=!1,i.finmouseout(e)}),this.addEventListener("click",function(e){i.finclick(e)}),this.addEventListener("dblclick",function(e){i.findblclick(e)}),this.addEventListener("contextmenu",function(e){return i.fincontextmenu(e),e.preventDefault(),!1}),this.canvas.setAttribute("tabindex",0),this.resize(),this.beginResizing(),this.beginPainting()}function h(e){i&&(a.forEach(function(t){try{t.tickPainter(e)}catch(e){console.error(e)}t.component.tickNotification&&t.component.tickNotification()}),i=requestAnimationFrame(h))}function d(){i=i||requestAnimationFrame(h)}function f(e){if(r)for(var t=0;t<l.length;t++)try{l[t].tickResizer(e)}catch(e){console.error(e)}}function p(){r=r||setInterval(f,s)}function g(e,t){var i=e.getContext("2d",t),r={},o={};function s(e){e in r||/^(webkit|moz|ms|o)[A-Z]/.test(e)||"function"==typeof i[e]||Object.defineProperty(r,e,{get:function(){return o[e]=o[e]||i[e]},set:function(t){t!==o[e]&&(i[e]=o[e]=t)}})}return Object.keys(Object.getPrototypeOf(i)).forEach(s),Object.keys(i).forEach(s),i.cache=r,i.cache.save=function(){i.save(),o=Object.create(o)},i.cache.restore=function(){i.restore(),o=Object.getPrototypeOf(o)},i.conditionalsStack=[],Object.getOwnPropertyNames(c.graphicsContextAliases).forEach(function(e){i[e]=i[c.graphicsContextAliases[e]]}),Object.assign(i,n(47))}c.prototype={constructor:c.prototype.constructor,div:null,component:null,canvas:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,dragstart:null,origin:null,bounds:null,dirty:!1,size:null,mousedown:!1,dragging:!1,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:!1,dragEndTime:0,lastRepaintTime:0,currentPaintCount:0,currentFPS:0,lastFPSComputeTime:0,addEventListener:function(e,t){this.canvas.addEventListener(e,t)},removeEventListener:function(e,t){this.canvas.removeEventListener(e,t)},stopPaintLoop:function(){i&&(cancelAnimationFrame(i),i=void 0)},restartPaintLoop:d,stopResizeLoop:function(){r&&(clearInterval(r),r=void 0)},restartResizeLoop:p,detached:function(){this.stopPainting(),this.stopResizing()},getCurrentFPS:function(){return this.currentFPS},tickPaint:function(e){var t=this.component.properties.enableContinuousRepaint,n=this.component.properties.repaintIntervalRate;if(0!==n){var i=1e3/n;e-this.lastRepaintTime>i&&(t||this.dirty)&&(this.paintNow(),this.lastRepaintTime=e,t&&(this.currentPaintCount++,e-this.lastFPSComputeTime>=1e3&&(this.currentFPS=1e3*this.currentPaintCount/(e-this.lastFPSComputeTime),this.currentPaintCount=0,this.lastFPSComputeTime=e)))}},beginPainting:function(){var e=this;this.requestRepaint(),this.tickPainter=function(t){e.tickPaint(t)},a.push(this)},stopPainting:function(){a.splice(a.indexOf(this),1)},beginResizing:function(){var e=this;this.tickResizer=function(){e.checksize()},l.push(this)},stopResizing:function(){l.splice(l.indexOf(this),1)},start:function(){this.beginPainting(),this.beginResizing()},stop:function(){this.stopPainting(),this.stopResizing()},getDivBoundingClientRect:function(){var e=this.div.getBoundingClientRect(),t=Math.floor(e.top),n=Math.floor(e.left),i=Math.ceil(e.width),r=Math.ceil(e.height);return{top:t,right:n+i,bottom:t+r,left:n,width:i,height:r,x:e.x,y:e.y}},checksize:function(){var e=this.getDivBoundingClientRect();e.width===this.size.width&&e.height===this.size.height||this.resize()},resize:function(){var e=this.size=this.getDivBoundingClientRect();this.width=e.width,this.height=e.height;var t=1,n=window.devicePixelRatio&&this.component.properties.useHiDPI;n&&(t=(window.devicePixelRatio||1)/(this.gc.webkitBackingStorePixelRatio||this.gc.mozBackingStorePixelRatio||this.gc.msBackingStorePixelRatio||this.gc.oBackingStorePixelRatio||this.gc.backingStorePixelRatio||1));this.buffer.width=this.canvas.width=this.width*t,this.buffer.height=this.canvas.height=this.height*t,this.canvas.style.width=this.buffer.style.width=this.width+"px",this.canvas.style.height=this.buffer.style.height=this.height+"px",this.bc.scale(t,t),n&&!this.component.properties.useBitBlit&&this.gc.scale(t,t),this.bounds=new o.Rectangle(0,0,this.width,this.height),this.component.setBounds(this.bounds),this.resizeNotification(),this.paintNow()},resizeNotification:function(){this.dispatchNewEvent(void 0,"fin-canvas-resized",{width:this.width,height:this.height})},getBounds:function(){return this.bounds},paintNow:function(){var e=this.component.properties.useBitBlit,t=e?this.bc:this.gc;try{t.cache.save(),this.dirty=!1,this.component.paint(t)}catch(e){console.error(e)}finally{t.cache.restore()}e&&this.flushBuffer()},flushBuffer:function(){this.buffer.width>0&&this.buffer.height>0&&this.gc.drawImage(this.buffer,0,0)},newEvent:function(e,t,n){var i={detail:n||{}};return e&&(i.detail.primitiveEvent=e),new CustomEvent(t,i)},dispatchNewEvent:function(e,t,n){return this.canvas.dispatchEvent(this.newEvent(e,t,n))},dispatchNewMouseKeysEvent:function(e,t,n){return(n=n||{}).mouse=this.mouseLocation,n.keys=this.currentKeys,this.dispatchNewEvent(e,t,n)},finmousemove:function(e){!this.isDragging()&&this.mousedown&&(this.beDragging(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-dragstart",{isRightClick:this.isRightClick(e),dragstart:this.dragstart}),this.dragstart=new o.Point(this.mouseLocation.x,this.mouseLocation.y)),this.mouseLocation=this.getLocal(e),this.isDragging()&&this.dispatchNewMouseKeysEvent(e,"fin-canvas-drag",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}),this.bounds.contains(this.mouseLocation)&&this.dispatchNewMouseKeysEvent(e,"fin-canvas-mousemove")},finmousedown:function(e){this.mouseLocation=this.mouseDownLocation=this.getLocal(e),this.mousedown=!0,this.dispatchNewMouseKeysEvent(e,"fin-canvas-mousedown",{isRightClick:this.isRightClick(e)}),this.takeFocus()},finmouseup:function(e){this.mousedown&&(this.isDragging()&&(this.dispatchNewMouseKeysEvent(e,"fin-canvas-dragend",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}),this.beNotDragging(),this.dragEndtime=Date.now()),this.mousedown=!1,this.dispatchNewMouseKeysEvent(e,"fin-canvas-mouseup",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}))},finmouseout:function(e){this.mousedown||(this.mouseLocation=new o.Point(-1,-1)),this.repaint(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-mouseout",{dragstart:this.dragstart})},finwheelmoved:function(e){!this.isDragging()&&this.hasFocus()&&(e.preventDefault(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-wheelmoved",{isRightClick:this.isRightClick(e)}))},finclick:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-click",{isRightClick:this.isRightClick(e)})},findblclick:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-dblclick",{isRightClick:this.isRightClick(e)})},getCharMap:function(){return u},getKeyChar:function(e){var t=e.keyCode||e.detail.key,n=e.shiftKey||e.detail.shift,i=e.key;return e.legacyKey=u[t]&&u[t][n?1:0],"string"==typeof i&&1===i.length?i:e.legacyKey||i},finkeydown:function(e){if(this.hasFocus()){9===e.keyCode&&e.preventDefault();var t=this.getKeyChar(e);e.repeat?this.repeatKey===t?this.repeatKeyCount++:(this.repeatKey=t,this.repeatKeyStartTime=Date.now()):(this.repeatKey=null,this.repeatKeyCount=0,this.repeatKeyStartTime=0),-1===this.currentKeys.indexOf(t)&&this.currentKeys.push(t),this.dispatchNewEvent(e,"fin-canvas-keydown",{alt:e.altKey,ctrl:e.ctrlKey,char:t,legacyChar:e.legacyKey,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:e.shiftKey,identifier:e.key,currentKeys:this.currentKeys.slice(0)})}},finkeyup:function(e){if(this.hasFocus()){9===e.keyCode&&e.preventDefault();var t=this.getKeyChar(e);this.currentKeys.splice(this.currentKeys.indexOf(t),1),this.repeatKeyCount=0,this.repeatKey=null,this.repeatKeyStartTime=0,this.dispatchNewEvent(e,"fin-canvas-keyup",{alt:e.altKey,ctrl:e.ctrlKey,char:t,legacyChar:e.legacyKey,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeat:e.repeat,shift:e.shiftKey,identifier:e.key,currentKeys:this.currentKeys.slice(0)})}},finfocusgained:function(e){this.dispatchNewEvent(e,"fin-canvas-focus-gained")},finfocuslost:function(e){this.dispatchNewEvent(e,"fin-canvas-focus-lost")},fincontextmenu:function(e){e.ctrlKey&&-1===this.currentKeys.indexOf("CTRL")&&this.currentKeys.push("CTRL"),this.dispatchNewMouseKeysEvent(e,"fin-canvas-context-menu",{isRightClick:this.isRightClick(e)})},paintLoopRunning:function(){return!!i},requestRepaint:function(){this.dirty=!0},repaint:function(){this.requestRepaint(),i&&0!==this.component.properties.repaintIntervalRate||this.paintNow()},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var e=this.canvas.getBoundingClientRect();return new o.Point(e.left,e.top)},getLocal:function(e){var t=this.canvas.getBoundingClientRect();return new o.Point(e.clientX-t.left,e.clientY-t.top)},hasFocus:function(){return document.activeElement===this.canvas},takeFocus:function(){var e=this;this.hasFocus()||setTimeout(function(){e.canvas.focus()},10)},beDragging:function(){this.dragging=!0,this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=!1,this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var e=document.body.style;e.cssText=e.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var e=document.body.style;e.cssText=e.cssText.replace("-webkit-user-select: none","")},setFocusable:function(e){this.focuser.style.display=e?"":"none"},isRightClick:function(e){var t;return"which"in(e=e||window.event)?t=3===e.which:"button"in e&&(t=2===e.button),t},dispatchEvent:function(e){return this.canvas.dispatchEvent(e)},setInfo:function(e,t){e&&(void 0!==t&&(t&&!isNaN(Number(t))&&(t+="px"),this.infoDiv.style.width=t),e.indexOf("<")?this.infoDiv.innerHTML=e:this.infoDiv.innerText=e),this.infoDiv.style.display=e?"block":"none"}},d(),p(),c.graphicsContextAliases={simpleText:"fillText"},e.exports=c},function(e,t,n){"use strict";var i;var r=/^(transparent|((RGB|HSL)A\(.*,\s*([\d\.]+)\)))$/i;function o(e){var t;return e?null===(t=e.match(r))?1:void 0===t[4]?0:Number(t[4]):0}var s={};var a="…";var l={};i={clearFill:function(e,t,n,i,r){var s=o(r);s<1&&this.clearRect(e,t,n,i),s>0&&(this.cache.fillStyle=r,this.fillRect(e,t,n,i))},alpha:o,getTextWidth:function(e){for(var t=s[this.cache.font]=s[this.cache.font]||{},n=0,i=0,r=(e+="").length;n<r;++n){var o=e[n];i+=t[o]=t[o]||this.measureText(o).width}return i},getTextWidthTruncated:function(e,t,n,i){var r,o,l,u=s[this.cache.font],c=void 0!==n;u||((u=s[this.cache.font]={})[a]=this.measureText(a).width),e+="",t+=!1===n?2:-1;for(var h=0,d=0,f=e.length;h<f;++h){var p=e[h],g=u[p]=u[p]||this.measureText(p).width;if(d+=g,!r&&c&&d>t){switch(l=h,n){case!0:for(o=d-g+u[a];l&&o>t;)o-=u[e[--l]];r=o>t?"":r=e.substr(0,l)+a;break;case!1:r=e.substr(0,l);break;default:++l<e.length&&(r=e.substr(0,l))}if(i)break}}return{string:r,width:d}},getTextHeight:function(e){var t=l[e];if(!t){t={};var n=document.createElement("span");n.textContent="Hg",n.style.font=e;var i=document.createElement("div");i.style.display="inline-block",i.style.width="1px",i.style.height="0px";var r=document.createElement("div");r.appendChild(n),r.appendChild(i),r.style.position="absolute",document.body.appendChild(r);try{i.style.verticalAlign="baseline";var o=i.getBoundingClientRect(),s=n.getBoundingClientRect();t.ascent=o.top-s.top,i.style.verticalAlign="bottom",t.height=o.top-s.top,t.descent=t.height-t.ascent}finally{document.body.removeChild(r)}0!==t.height&&(l[e]=t)}return t},clipSave:function(e,t,n,i,r){this.conditionalsStack.push(e),e&&(this.cache.save(),this.beginPath(),this.rect(t,n,i,r),this.clip())},clipRestore:function(e){this.conditionalsStack.pop()&&this.cache.restore()},truncateTextWithEllipsis:!0},e.exports=i},function(e,t,n){"use strict";var i=n(4),r=n(9),o=n(50),s=n(24),a=[],l=i.extend("Renderer",{cell:{x:0,y:0,width:0,height:0},scrollHeight:0,reset:function(){this.bounds={width:0,height:0},this.visibleColumns=this.grid.decorateColumnArray(),this.visibleRows=[],this.insertionBounds=[],this.cellEventPool=[]},initialize:function(e){this.grid=e,this.gridRenderers={},a.forEach(function(e){this.registerGridRenderer(e)},this),this.setGridRenderer(this.properties.gridRenderer||"by-columns-and-rows"),this.reset()},registerGridRenderer:function(e){this.gridRenderers[e.key]={paintCells:e}},setGridRenderer:function(e){var t=this.gridRenderers[e];if(!t)throw new this.HypergridError('Unregistered grid renderer "'+e+'"');t!==this.gridRenderer&&(this.gridRenderer=t,this.gridRenderer.reset=!0)},resetAllGridRenderers:function(e){Object.keys(this.gridRenderers).forEach(function(t){this.gridRenderers[t].reset=!e||e.indexOf(t)<0},this)},rebundleGridRenderers:function(){Object.keys(this.gridRenderers).forEach(function(e){this.gridRenderers[e].paintCells.rebundle&&(this.gridRenderers[e].rebundle=!0)},this)},resetRowHeaderColumnWidth:function(){this.lastKnowRowCount=void 0},computeCellsBounds:function(e){e?(u.call(this),this.needsComputeCellsBounds=!1):this.needsComputeCellsBounds=!0},get properties(){return this.grid.properties},paint:function(e){this.grid.canvas&&(this.renderGrid(e),this.grid.gridRenderedNotification())},tickNotification:function(){this.grid.tickNotification()},getVisibleRowsCount:function(){return this.visibleRows.length-1},getVisibleScrollHeight:function(){var e=this.grid.properties.defaultRowHeight*this.grid.behavior.getFooterRowCount();return this.getBounds().height-e-this.grid.getFixedRowsHeight()},getVisibleColumnsCount:function(){return this.visibleColumns.length-1},getBoundsOfCell:function(e,t){var n=this.visibleColumns[e],i=this.visibleRows[t];return{x:n.left,y:i.top,width:n.width,height:i.height}},getColumnFromPixelX:function(e){for(var t=this.grid.getFixedColumnCount(),n=this.grid.getHScrollValue(),i=this.visibleColumns,r=1;r<i.length-1;r++)if(e<i[r].left-(i[r].left-i[r-1].left)/2)return r>t&&(r+=n),r-1;return r>t&&(r+=n),r-1},getGridCellFromMousePoint:function(e){var t=e.x,n=e.y,i=!1,r=!1,o=this.visibleRows,s=this.visibleColumns,a=s[this.grid.behavior.leftMostColIndex],l=a&&t<a.right?a:s.findWithNeg(function(e){return t<e.right}),u=o.find(function(e){return n<e.bottom}),c={fake:!1};u?i=!1:(u=o[o.length-1],i=!0),l?r=!1:(l=s[s.length-1],r=!0);var h=new this.grid.behavior.CellEvent(l.columnIndex,u.index),d=this.findCell(h);return c.cellEvent=d?Object.create(d):h,c.cellEvent.mousePoint=this.grid.newPoint(t-l.left,n-u.top),(r||i)&&(c.fake=!0,this.grid.beCursor(null)),c},getVisibleCellMatrix:function(){for(var e=Array(this.visibleRows.length),t=this.grid.behavior.hasTreeColumn()?1:0,n=0;n<e.length;++n)e[n]=Array(this.visibleColumns.length);return this.cellEventPool.forEach(function(n){var i=n.gridCell.x+t;i>=0&&(e[n.gridCell.y][i]=n.value)}),e},isColumnVisible:function(e){return!!this.getVisibleColumn(e)},getVisibleColumn:function(e){return this.visibleColumns.findWithNeg(function(t){return t.columnIndex===e})},getMinimumLeftPositionToShowColumn:function(e){var t,n,i,r,o=this.grid.getFixedColumnCount(),s=0,a=0,l=0,u=[],c=null,h=0,d=0,f=0;for(h=0;h<=e;h++)d=f,f+=Math.ceil(this.grid.getColumnWidth(h)),u.push({left:d,right:f});i=u[u.length-1].right,r=u[o-1],this.properties.showRowNumbers&&(s=this.grid.getColumnWidth(this.grid.behavior.rowColumnIndex)),this.grid.hasTreeColumn()&&(a=this.grid.getColumnWidth(this.grid.behavior.treeColumnIndex)),t=r?r.right:0,n=this.getBounds().width-t-s-a,h=e;do{l=h,c=u[h],h--}while(c.left+n>i&&h>=0);return l},isDataColumnVisible:function(e){return!!this.getVisibleDataColumn(e)},getVisibleDataColumn:function(e){return this.visibleColumns.findWithNeg(function(t){return t.column.index===e})},getFinalVisibleColumnBoundary:function(){var e=this.isLastColumnVisible()?2:1,t=this.visibleColumns[this.visibleColumns.length-e].right;return Math.min(t,this.getBounds().width)},isRowVisible:function(e){return!!this.visibleRows[e]},getVisibleRow:function(e){return this.visibleRows[e]},isDataRowVisible:function(e,t){return!!this.getVisibleDataRow(e,t)},getVisibleDataRow:function(e,t){return t=t||this.grid.behavior.dataModel,this.visibleRows.find(function(n){return n.subgrid===t&&n.rowIndex===e})},isSelected:function(e,t){return this.grid.isSelected(e,t)},renderGrid:function(e){var t=this.grid;t.deferredBehaviorChange();var n=t.getRowCount();if(n!==this.lastKnowRowCount){var i=function(e,t){var n=this.grid.behavior.getColumnProperties(this.grid.behavior.rowColumnIndex),i=this.grid.properties,o=2*n.cellPadding;i.rowHeaderCheckboxes&&r.checked&&(o+=r.checked.width);if(i.rowHeaderNumbers){var s=n.rowHeader;e.cache.font=s.foregroundSelectionFont.indexOf("bold ")>=0?s.foregroundSelectionFont:s.font,o+=e.getTextWidth(t)}n.preferredWidth=n.width=o}.call(this,e,n);i!==this.handleColumnWidth&&(this.needsComputeCellsBounds=!0,this.handleColumnWidth=i),this.lastKnowRowCount=n}this.needsComputeCellsBounds&&(u.call(this),this.needsComputeCellsBounds=!1,t.behavior.dataModel.fetchData)?t.behavior.dataModel.fetchData(function(){var e=this.dataWindow;if(!this.grid.properties.fetchSubregions){var t=this.grid.newRectangle(e.left,e.top,e.width,e.height);return[t]}var n=this.visibleColumns.map(function(e){return e.column.index}).sort(c),i=n[0],r=n[n.length-1]-i+1;return[this.grid.newRectangle(i,e.top,r,e.height)]}.call(this),function(e,t){t||(this.gridRenderer.paintCells.call(this,e),this.grid.repaint())}.bind(this,e)):(this.gridRenderer.paintCells.call(this,e),this.renderOverrides(e),this.renderLastSelection(e))},renderLastSelection:function(e){var t,n,i,r,o,a=this.grid,l=a.properties,u=a.selectionModel;switch(u.getLastSelectionType()){case"column":var c=u.columnSelectionModel.selection,h=c[c.length-1];n=h[0],i=0,r=h[1]-n+1,o=a.getRowCount(),t=new s(n,i,r,o);break;case"row":if(!l.collapseCellSelections||"cell"!==u.getLastSelectionType(1)){var d=u.rowSelectionModel.selection,f=d[d.length-1];n=0,i=f[0],r=a.behavior.getActiveColumns().length,o=f[1]-i+1,t=new s(n,i,r,o);break}case"cell":t=u.getLastSelection()}if(t&&-1!==t.origin.x){var p=this.visibleColumnsByIndex,g=this.visibleRowsByDataRowIndex,v=this.visibleColumns[this.visibleColumns.length-1],m=this.visibleRows[this.visibleRows.length-1],y=p[this.dataWindow.origin.x],b=g[this.dataWindow.origin.y],w=l.fixedColumnCount,C=l.fixedRowCount,x=a.getHeaderRowCount();if(!(t.corner.x<this.visibleColumns[0].columnIndex||w&&t.origin.x>this.visibleColumns[w-1].columnIndex&&t.corner.x<y.columnIndex||t.origin.x>v.columnIndex||t.corner.y<this.visibleRows[x].rowIndex||C&&t.origin.y>this.visibleRows[x+C-1].rowIndex&&t.corner.y<b.rowIndex||t.origin.y>m.rowIndex)){var S=p[t.origin.x]||y,k=g[t.origin.y]||b,_=p[t.corner.x]||(t.corner.x>v.columnIndex?v:p[w-1]),D=g[t.corner.y]||(t.corner.y>m.rowIndex?m:g[C-1]),E={bounds:{x:S.left,y:k.top,width:_.right-S.left,height:D.bottom-k.top},selectionRegionOverlayColor:this.gridRenderer.paintCells.partial?"transparent":l.selectionRegionOverlayColor,selectionRegionOutlineColor:l.selectionRegionOutlineColor};a.cellRenderers.get("lastselection").paint(e,E),"by-cells"===this.gridRenderer.paintCells.key&&(this.gridRenderer.reset=!0)}}},renderOverrides:function(e){var t=this.grid.renderOverridesCache;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i&&this.renderOverride(e,i)}},renderOverride:function(e,t){var n=t.hdpiratio,i=t.startX,r=t.width+1,o=t.height,s=t.ctx,a=e.getImageData(i,0,Math.round(r*n),Math.round(o*n));s.putImageData(a,0,0),e.cache.fillStyle=this.properties.backgroundColor2,e.fillRect(Math.round(i/n),0,r,o)},getScrollTop:function(){return this.grid.getVScrollValue()},getScrollLeft:function(){return this.grid.getHScrollValue()},isLastColumnVisible:function(){var e=this.grid.getColumnCount()-1;return!!this.visibleColumns.findWithNeg(function(t){return t.columnIndex===e})},getRenderedWidth:function(e){var t=this.visibleColumns;return e>=t.length?t[t.length-1].right:t[e].left},getRenderedHeight:function(e){var t,n=this.visibleRows;e>=n.length?t=n[n.length-1].bottom:t=n[e].top;return t},isDraggingColumn:function(){return this.grid.isDraggingColumn()},getPageUpRow:function(){for(var e=this.grid,t=this.getVisibleScrollHeight(),n=this.dataWindow.origin.y-this.properties.fixedRowCount-1,i=0;i<t&&n>=0;)i+=e.getRowHeight(n),n--;return n+1},getPageDownRow:function(){return this.dataWindow.corner.y-this.properties.fixedRowCount},renderErrorCell:function(e,t,n,i){var r=e&&(e.message||e)||"Unknown error.",o={x:n.left,y:i.top,width:n.width,height:i.height},s={bounds:o};console.error(r),t.cache.save(),t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip(),this.grid.cellRenderers.get("errorcell").paint(t,s,r),t.cache.restore()},paintGridlines:function(e){var t=this.visibleColumns,n=t.length,i=this.visibleRows,r=i.length;if(n&&r){var o,s,a,l=this.properties,u=n-1,c=r-1,h=t[u].right,d=i[c].bottom,f=l.gridLinesVColor,p=l.gridLinesHColor,g="border-box"===l.boxSizing;if(l.gridLinesV&&(l.gridLinesUserDataArea||l.gridLinesColumnHeader)){var v=l.gridLinesVWidth,m=this.grid.getHeaderRowCount(),y=i[m-1],b=i[m],w=b&&b.top,C=l.gridLinesColumnHeader?0:w,x=l.gridLinesUserDataArea?d:y&&y.bottom;void 0!==C&&void 0!==x&&(e.cache.fillStyle=f,t.forEachWithNeg(function(t,n){if(t&&n<u){var i=t.right,r=Math.max(C,t.top||0),o=Math.min(x,t.bottom||1/0)-r;g&&(i-=v),e.fillRect(i,r,v,o),l.gridLinesUserDataArea&&t.bottom<w&&e.fillRect(i,w,v,x-w)}}))}if(l.gridLinesH&&(l.gridLinesUserDataArea||(o=l.gridLinesRowHeader&&(t[-1]||t[-2])))){var S=l.gridLinesHWidth,k=l.gridLinesRowHeader?0:t[0].left,_=l.gridLinesUserDataArea?h:o.right;e.cache.fillStyle=p,i.forEach(function(t,n){if(n<c){var i=t.bottom;g&&(i-=S),e.fillRect(k,i,_-k,S)}})}void 0!==l.fixedLinesHWidth&&(a=i.gap)&&(e.cache.fillStyle=l.fixedLinesHColor||p,(s=l.fixedLinesHEdge)?(e.fillRect(0,a.top,h,s),e.fillRect(0,a.bottom-s,h,s)):e.fillRect(0,a.top,h,a.bottom-a.top)),void 0!==l.fixedLinesVWidth&&(a=t.gap)&&(e.cache.fillStyle=l.fixedLinesVColor||f,(s=l.fixedLinesVEdge)?(e.fillRect(a.left,0,s,d),e.fillRect(a.right-s,0,s,d)):e.fillRect(a.left,0,a.right-a.left,d))}},_paintCell:function(e,t,n){var i,r,o=this.grid,s=o.selectionModel,a=t.isHandleColumn,l=t.isTreeColumn,u=t.isColumnSelected,c=t.isDataRow,h=t.isRowSelected,d=t.isCellSelected,f=t.isHeaderRow,p=t.isFilterRow,g=a||l,v=!g&&c,m=this.assignProps(t),y=(m.gridCell=t.gridCell).x,b=(m.dataCell=t.dataCell).y;a?(r=h||s.isCellSelectedInRow(b),m.halign="right"):l?(r=h||s.isCellSelectedInRow(b),m.halign="left"):r=c?d||h||u:!p&&(!!u||s.isCellSelectedInColumn(y)),a?c?m.rowHeaderNumbers&&(i=b+1):f&&(m.allRowsSelected=s.areAllRowsSelected()):(m.dataRow=t.dataRow,i=t.value),m.isSelected=r,m.isDataColumn=!g,m.isHandleColumn=a,m.isTreeColumn=l,m.isDataRow=c,m.isHeaderRow=f,m.isFilterRow=p,m.isUserDataArea=v,m.isColumnHovered=t.isColumnHovered,m.isRowHovered=t.isRowHovered,m.isCellHovered=t.isCellHovered,m.bounds=t.bounds,m.isCellSelected=d,m.isRowSelected=h,m.isColumnSelected=u,m.isInCurrentSelectionRectangle=s.isInCurrentSelectionRectangle(y,b),m.prefillColor=n,o.mouseDownState&&(m.mouseDown=o.mouseDownState.gridCell.equals(t.gridCell)),m.subrow=0;var w=v&&i&&i.constructor===Array,C=w&&i.subrows&&i.length;if(C){var x=m.bounds=Object.assign({},m.bounds);x.height/=C,m.subrows=C,m.value=m.exec(i[0])}else C=1,m.value=!w&&v?m.exec(i):i;for(;;){var S=t.subgrid.getCell(m,m.renderer);if(m.formatValue=o.getFormatter(m.format),m.snapshot=t.snapshot[m.subrow],m.minWidth=t.minWidth,S.forEach?S.forEach(function(t){t.paint(e,m)}):S.paint(e,m),t.snapshot[m.subrow]=m.snapshot,(void 0===t.minWidth||m.minWidth>t.minWidth)&&(t.minWidth=m.minWidth),++m.subrow===C)break;x.y+=x.height,m.value=m.exec(i[m.subrow])}return t.clickRect=m.clickRect,t.cellRenderer=S,m.minWidth},assignProps:o,findCell:function(e,t,n){var i,r,o=this.cellEventPool;"object"==typeof e?(n=e.subgrid,t=e.dataCell.y,i=e.dataCell.x):i=e,n=n||this.grid.behavior.dataModel;var s=this.visibleColumns.length;this.grid.properties.showRowNumbers&&s++,this.grid.behavior.hasTreeColumn()&&s++,s*=this.visibleRows.length;for(var a=0;a<s;++a)if((r=o[a]).subgrid===n&&r.dataCell.x===i&&r.dataCell.y===t)return r},resetCellPropertiesCache:function(e,t,n){var i=this.findCell.apply(this,arguments);return i&&(i._cellOwnProperties=void 0),i},resetAllCellPropertiesCaches:function(){this.cellEventPool.forEach(function(e){e._cellOwnProperties=void 0})},getBounds:function(){return this.bounds},setBounds:function(e){return this.bounds=e},setInfo:function(e){var t;this.visibleColumns.length&&(t=this.visibleColumns[this.visibleColumns.length-1].right),this.grid.canvas.setInfo(e,t)}});function u(){var e,t,n,i,r,o,a,l,u,c,h,d,f,p,g,v,m,y,b,w,C,x,S,k,_,D,E,A,M,R,P,O,T,L,I,F,H,N,j,B,V=this.getScrollTop(),W=this.getScrollLeft(),z=this.getBounds(),U=this.grid,Y=U.behavior,G=Y.hasTreeColumn(),$=Y.treeColumnIndex,K=U.cellEditor&&U.cellEditor.event,q=0,Z=0,Q=U.properties,J="border-box"===Q.boxSizing,X=Q.gridLinesVWidth,ee=J?0:X,te=Q.gridLinesHWidth,ne=J?0:te,ie=this.grid.getFixedColumnCount(),re=this.grid.getFixedRowCount(),oe=Y.leftMostColIndex,se=0,ae=-3,le=-1,ue=Y.subgrids;for(K&&(t=K.gridCell.x,i=K.dataCell.y,r=K.subgrid),Q.showRowNumbers&&(ae=G?$:0,se+=1),G&&(ae=0,se+=1),ie&&(ae=ie),re&&(le=re),void 0===Q.fixedLinesVWidth?ae=-3:(b=Math.max(Q.fixedLinesVWidth||X,X),C=(w=J?b-X:b)-b),void 0===Q.fixedLinesHWidth?le=-1:(x=Math.max(Q.fixedLinesHWidth||te,te),k=(S=J?x-te:x)-x),this.scrollHeight=0,this.visibleColumns.length=0,this.visibleColumns.gap=this.visibleColumns[-1]=this.visibleColumns[-2]=void 0,this.visibleRows.length=0,this.visibleRows.gap=void 0,this.visibleColumnsByIndex=[],this.visibleRowsByDataRowIndex={},this.insertionBounds=[],a=0,h=oe,d=U.getColumnCount(),l=z.width||U.canvas.width;h<d&&a<=l;h++)if(G||h!==$){if((B=h===ae)?(this.visibleColumns.gap={left:O.right+C,right:void 0},a+=w):a&&(a+=ee),M=h,h>=ie&&(F=M+=W,void 0===I&&(I=F)),M>=d)break;T=Math.ceil(Y.getColumnWidth(M)),this.visibleColumns[h]=this.visibleColumnsByIndex[M]=O={index:h,columnIndex:M,column:Y.getActiveColumn(M),left:a,width:T,right:a+T},B&&(this.visibleColumns.gap.right=O.left),t===M&&(e=O),a+=T,q+=Math.round(T/2)+Z,this.insertionBounds.push(q),Z=Math.round(T/2)}else this.visibleColumns[h]=void 0;for(A=Q.defaultRowHeight*Y.getFooterRowCount(),y=g=f=u=0,p=ue.length,c=z.height-A;f<p;f++,y+=m){for(m=(_=ue[f]).getRowCount(),E=_.isData,o=r===_,j=g,v=g+m;g<v&&u<c&&((B=E&&g===le)?(this.visibleRows.gap={top:P.bottom+k,bottom:void 0},u+=S):u&&(u+=ne),R=g,!(E&&g>=re&&(N=(R+=V)-y,void 0===H&&(H=N),R>=v)));g++)D=R-y,L=Y.getRowHeight(D,_),this.visibleRows[g]=P={index:g,subgrid:_,rowIndex:D,top:u,height:L,bottom:u+L},B&&(this.visibleRows.gap.bottom=P.top),E&&(this.visibleRowsByDataRowIndex[R-y]=P),o&&i===D&&(n=P),u+=L;E&&(m=g-j)}K&&(K.visibleColumn=e,K.visibleRow=n,K.gridCell.y=n&&n.index,K._bounds=null),this.dataWindow=new s(I,H,Math.min(F-I+1,this.visibleColumns.length),Math.min(N-H+1,this.visibleRows.length));var ce=this.cellEventPool,he=ce.length,de=(this.visibleColumns.length+se)*this.visibleRows.length;de>he&&(ce.length=de);for(var fe=he;fe<de;fe++)ce[fe]=new Y.CellEvent;this.resetAllGridRenderers()}function c(e,t){return e-t}function h(e){a.indexOf(e)<0&&a.push(e)}h(n(51)),h(n(52)),h(n(53)),h(n(25)),h(n(54)),l.registerGridRenderer=h,e.exports=l},function(e,t){e.exports={calendar:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAc0lEQVR4nIXQwQkCMRSE4U9ZLMCT9Xjaq2AfNhfYU5oQLMAOtoN48EWei5iBIRPe/yYQ3qrhf1lFG7iKcEaJxSfukUvMWgdHavt0uWHtg2QwxXnAnJZ2uOLyVZtybzzhgWNmfoFl0/YB87NbzR1cjP9xeQHSDC6mcL1xFQAAAABJRU5ErkJggg=="},checked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDMwMiwgMjAxNy8wMy8wMi0xNjo1OTozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZmM0YjdjYS01N2U3LTRjZTUtYWE3Zi1kYmFjZTU0ODJmZjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzRUM3OEQzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzRUM3OEMzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIEVsZW1lbnRzIDE2LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphZjdjMDA1NS1mMzJlLTQ1NjAtOGQxOS1lYTU1NGVhNDkzMmEiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0YmZiODQwOS03ZWY0LTExN2ItYjI4MS05MDYxODEwMDAwMDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5PI8IaAAAAkFBMVEVOTk5NTU29vb1paWnPz8/AwMC7u7u5ublDQ0NSUlJFRUVfX1/IyMixsbHi4uKFhYXT09PDw8NXV1fKysrMzMxYWFhzc3N7e3ve3t6ioqK+vr7Ly8uhoaHa2tqysrKurq7s7Oyvr6/Jycm2trbt7e3X19fh4eG1tbW/v7+3t7fo6OhERES6urrW1tbd3d0AAADC/hfQAAAAMHRSTlP//////////////////////////////////////////////////////////////wBipdB4AAAAcElEQVR42hTIRRbDMAwAUYVTZoa4ZleyfP/btZrVfwOlq4l66utlge5lrbIqq0cL9JX07Onv8PZr791pvm8H+DBrbhBiTn9f4IzjjcW6Qhw3zNnAxLHChln+iq9xsRUPQNFlyYUjlF0KwZiQDuUnwACjfw8FagWYLwAAAABJRU5ErkJggg=="},"down-rectangle":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAABpJREFUGFdjgIL/eDAKIKgABggqgAE0BQwMAPTlD/Fpi0JfAAAAAElFTkSuQmCC"},"filter-off":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAChSURBVChTzZHBCoUgFET9TqEiskgyWoutQvRLRIr+cR7XQAjiJW/1BgZmMUevXsY5xy9OoDEGMcYiUzeB67qibVuwQjVNA6311V+WBeM4vsLDMEApde/1fY9pmtI453neHEKAlBJd1z0fXtc16PbjODK07zvmeUZVVd8nooc75zJIOX3Gm6i0bVsGKf8xKIRIuyJTLgJJ3nvQzsjW2geIsQ/pr9hMVrSncAAAAABJRU5ErkJggg=="},"filter-on":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAACoSURBVChTY3BqfP2fHAzWmDbj7f8p294RhVOBasEa02e+/e/VBmQQCTxaX/9PnvYGoj5ywpv/Qd2ENft3vv4f1gfVBAP+nW/+h/a+ATtn1q73KHjytvdgg3070DTBgHvL6/8g22fsQGiaDmSHA21xaybgIpDHixa8hWssnA8NDEIApCh3LkIjiD2INYJCL2X6W3B8gdhEaQQBUOCA4gyE8+e9xaKJgQEA/74BNE3cElkAAAAASUVORK5CYII="},unchecked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDMwMiwgMjAxNy8wMy8wMi0xNjo1OTozOCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphNDQ3MTQ0Zi0wYmFmLTQ3YzMtYjBmNi1kODRlNDI0MjU4ZDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkIzRUM3OTEzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkIzRUM3OTAzNkMyMTFFODhEOUJCMzRBRUM0QUQ5QUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIEVsZW1lbnRzIDE2LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OWY2YWVhMC0xZjJkLTRjM2UtYTRiZi02MWYyMDNlMmI4YjciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2Nzk3NWVjNC03ZWY0LTExN2ItYjI4MS05MDYxODEwMDAwMDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ywX99AAAAYFBMVEW5ubm/v7/X19fLy8vp6ene3t69vb2xsbG6urq+vr6urq7a2tq4uLji4uLIyMjBwcHDw8PJycnPz8/V1dW1tbWvr6/t7e23t7e7u7vs7Oy2trbo6Ojh4eHW1tbd3d0AAAAm0pqPAAAAIHRSTlP/////////////////////////////////////////AFxcG+0AAABZSURBVHjaTIqHDoAgEEOLC9wL5RTP+/+/VIIxdCTNSyFjZQwR1YNAtftxhOQLUHjvQ68K+orqW2C7P7FL9okmrjLl5cv1/+lAKuOVmTObQyZ32tdulkeAAQCpggrEM7zMmAAAAABJRU5ErkJggg=="},"up-down-spin":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGJJREFUOE+lkwEKACEIBH2Zb/PnHsoGeaVJDUjGOgRRpKpkiIj+y4MME3eDR7kaKOVNsJyMNjIHzGy9YnW6J7qIcrriQimeCqORNABd0fpRTkt8uVUj7EsxC6vs/q3e/Q6iD2bwnByjPXHNAAAAAElFTkSuQmCC"},"up-down":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGFJREFUOE+lkkEKQCEIRD2ZJ3Ph3iN4WD9GflpYhj0YYowpGgJmbikd3gjMDFokwbuT1iAiurG5nomgqo5QaPo9ERQRI6Jf7sfGjudy2je23+i0Wl2oQ85TOdlfrJQOazF8br+rqTXQKn0AAAAASUVORK5CYII="}}},function(e,t,n){"use strict";var i=n(15),r=i.propClassEnum.COLUMNS,o=i.propClassEnum.CELLS,s=i.propClassEnum.ROWS,a=i.propClassEnum.STRIPES,l=[];l[r]=function(e){return e.columnProperties},l[o]=function(e){return e.cellOwnProperties},l[a]=function(e){var t=e.isDataRow&&e.columnProperties.rowStripes;return t&&t[e.dataCell.y%t.length]},l[s]=function(e){return e.rowOwnProperties},e.exports=function(e){var t,n,i,u=e.properties.propClassLayers;switch(u[0]){case s:t=1,n=e.rowOwnProperties||this.grid.properties;break;case r:u[1]===o?(t=2,n=e.properties):(t=1,n=e.columnProperties);break;case o:u[1]===r?(n=e.cellOwnProperties)?t=1:(t=2,n=e.columnProperties):u[2]===r||u[3]===r?(t=1,n=e.properties):(t=0,n=this.grid.properties);break;case a:t=0,n=this.grid.properties}for(i=[Object.create(n)];t<u.length;++t)i.push(l[u[t]](e));return Object.assign.apply(Object,i)}},function(e,t,n){"use strict";var i=n(25);function r(e){var t,n,r,o,s=this.visibleColumns,a=this.visibleRows,l=s.length,u=l-1,c=a.length,h=0,d=this.cellEventPool,f=c?a[c-1].bottom:0;l&&c&&(this.gridRenderer.reset&&(this.resetAllGridRenderers(),i.call(this,e),this.gridRenderer.reset=!1),this.visibleColumns.forEachWithNeg(function(i,s){for(i=(t=d[h]).visibleColumn,o=i.column.properties.columnClip,e.clipSave(o||null===o&&s===u,0,0,i.right,f),r=n=0;n<c;n++,h++){t=d[h];try{r=Math.max(r,this._paintCell(e,d[h]))}catch(t){this.renderErrorCell(t,e,i,d[h].visibleRow)}}e.clipRestore(o),t.column.properties.preferredWidth=Math.round(r)},this),"border-box"===this.grid.properties.boxSizing&&this.paintGridlines(e))}r.key="by-cells",r.partial=!0,e.exports=r},function(e,t,n){"use strict";var i=n(16);function r(e){var t,n,r,o,s,a,l,u,c=this.grid.properties.backgroundColor,h=this.visibleColumns,d=this.visibleRows,f=h.length,p=f-1,g=d.length,v=this.cellEventPool,m=f?h[p].right:0,y=g?d[g-1].bottom:0;if(e.clearRect(0,0,this.bounds.width,this.bounds.height),f&&g){for(e.alpha(c)>0&&(e.cache.fillStyle=c,e.fillRect(0,0,m,y)),this.gridRenderer.reset?(this.resetAllGridRenderers(["by-columns-discrete"]),this.gridRenderer.reset=!1,i.call(this,!0)):this.gridRenderer.rebundle&&(this.gridRenderer.rebundle=!1,i.call(this)),s=(o=this.columnBundles).length;s--;)r=o[s],e.clearFill(r.left,0,r.right-r.left,y,r.backgroundColor);var b=0;this.visibleColumns.forEachWithNeg(function(i,r){for(i=(n=v[b]).visibleColumn,t=n.column.properties.backgroundColor,u=i.column.properties.columnClip,e.clipSave(u||null===u&&r===p,0,0,i.right,y),l=a=0;a<g;a++,b++){n=v[b];try{l=Math.max(l,this._paintCell(e,n,t))}catch(t){this.renderErrorCell(t,e,i,n.visibleRow)}}e.clipRestore(u),n.column.properties.preferredWidth=Math.round(l)},this),this.paintGridlines(e)}}r.key="by-columns",r.rebundle=!0,e.exports=r},function(e,t,n){"use strict";var i=n(16);function r(e){var t,n,r,o,s,a=this.visibleColumns,l=this.visibleRows,u=a.length,c=u-1,h=l.length,d=this.cellEventPool,f=h?l[h-1].bottom:0;if(e.clearRect(0,0,this.bounds.width,this.bounds.height),u&&h){this.gridRenderer.reset&&(this.resetAllGridRenderers(["by-columns"]),this.gridRenderer.reset=!1,i.call(this,!0));var p=0;this.visibleColumns.forEachWithNeg(function(i,a){for(i=(n=d[p]).visibleColumn,t=n.column.properties.backgroundColor,e.clearFill(i.left,0,i.width,f,t),s=i.column.properties.columnClip,e.clipSave(s||null===s&&a===c,0,0,i.right,f),o=r=0;r<h;r++,p++){n=d[p];try{o=Math.max(o,this._paintCell(e,n,t))}catch(t){this.renderErrorCell(t,e,i,n.visibleRow)}}e.clipRestore(s),n.column.properties.preferredWidth=Math.round(o)},this),this.paintGridlines(e)}}r.key="by-columns-discrete",e.exports=r},function(e,t,n){"use strict";var i=n(26);function r(e){var t,n,r,o,s,a,l,u,c=this.grid.properties,h=c.backgroundColor,d=this.rowBundles,f=this.visibleColumns,p=this.visibleRows,g=f.length,v=g-1,m=p.length,y=this.cellEventPool,b=Array(g-0).fill(0),w=g?f[g-1].right:0,C=m?p[m-1].bottom:0,x=c.gridLinesH,S=c.gridLinesHWidth,k=c.gridLinesHColor;if(e.clearRect(0,0,this.bounds.width,this.bounds.height),g&&m){for(e.alpha(h)>0&&(e.cache.fillStyle=h,e.fillRect(0,0,w,C)),this.gridRenderer.reset&&(this.resetAllGridRenderers(),this.gridRenderer.reset=!1,i.call(this,!0)),n=this.rowPrefillColors,a=d.length;a--;)o=d[a],e.clearFill(0,o.top,w,o.bottom-o.top,o.backgroundColor);for(l=0,a=0;a<m;a++)t=n[a],x&&(e.cache.fillStyle=k,e.fillRect(0,y[l].visibleRow.bottom,w,S)),this.visibleColumns.forEachWithNeg(function(n){n=(r=y[++l]).visibleColumn,u=n.column.properties.columnClip,e.clipSave(u||null===u&&s===v,0,0,n.right,C);try{b[s]=Math.max(b[s],this._paintCell(e,r,t))}catch(t){this.renderErrorCell(t,e,n,void 0)}e.clipRestore(u)},this);this.paintGridlines(e),this.visibleColumns.forEachWithNeg(function(e,t){e.column.properties.preferredWidth=Math.round(b[t])})}}r.key="by-rows",e.exports=r},function(e,t,n){"use strict";var i=n(27),r=n(24);function o(e){this.grid=e,this.reset()}o.prototype={constructor:o.prototype.constructor,allRowsSelected:!1,reset:function(){this.selections=[],this.flattenedX=[],this.flattenedY=[],this.rowSelectionModel=new i,this.columnSelectionModel=new i,this.lastSelectionType=[]},getLastSelection:function(){var e=this.selections;return e[e.length-1]},getLastSelectionType:function(e){return this.lastSelectionType[e||0]||""},setLastSelectionType:function(e,t){var n=this.lastSelectionType.indexOf(e);(0!==n||t)&&(n>=0&&this.lastSelectionType.splice(n,1),t||this.lastSelectionType.unshift(e))},select:function(e,t,n,i,o){var s=new r(e,t,n+1,i+1);s.firstSelectedCell=this.grid.newPoint(e,t),s.lastSelectedCell=s.firstSelectedCell.x===s.origin.x&&s.firstSelectedCell.y===s.origin.y?s.corner:s.origin,this.grid.properties.multipleSelections?(this.selections.push(s),this.flattenedX.push(s.flattenXAt(0)),this.flattenedY.push(s.flattenYAt(0))):(this.selections[0]=s,this.flattenedX[0]=s.flattenXAt(0),this.flattenedY[0]=s.flattenYAt(0)),this.setLastSelectionType("cell"),this.grid.selectionChanged(o)},toggleSelect:function(e,t,n,i){var r=this.selections.findIndex(function(r){return r.origin.x===e&&r.origin.y===t&&r.extent.x===n&&r.extent.y===i});r>=0?(this.selections.splice(r,1),this.flattenedX.splice(r,1),this.flattenedY.splice(r,1),this.setLastSelectionType("cell",!this.selections.length),this.grid.selectionChanged()):this.select(e,t,n,i)},clearMostRecentSelection:function(e){e||this.setAllRowsSelected(!1),this.selections.length&&--this.selections.length,this.flattenedX.length&&--this.flattenedX.length,this.flattenedY.length&&--this.flattenedY.length,this.setLastSelectionType("cell",!this.selections.length)},clearMostRecentColumnSelection:function(){this.columnSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("column",!this.columnSelectionModel.selection.length)},clearMostRecentRowSelection:function(){this.rowSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},clearRowSelection:function(){this.rowSelectionModel.clear(),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},getSelections:function(){return this.selections},hasSelections:function(){return 0!==this.selections.length},hasRowSelections:function(){return!this.rowSelectionModel.isEmpty()},hasColumnSelections:function(){return!this.columnSelectionModel.isEmpty()},isCellSelectedInRow:function(e){return this._isCellSelected(this.flattenedX,0,e)},isCellSelectedInColumn:function(e){return this._isCellSelected(this.flattenedY,e,0)},isSelected:function(e,t){return this.isColumnSelected(e)||this.isRowSelected(t)||this._isCellSelected(this.selections,e,t)},isCellSelected:function(e,t){return this._isCellSelected(this.selections,e,t)},_isCellSelected:function(e,t,n){var i=this;return!!e.find(function(e){return i.rectangleContains(e,t,n)})},clear:function(e){this.selections.length=0,this.flattenedX.length=0,this.flattenedY.length=0,this.columnSelectionModel.clear(),e?this.lastSelectionType.indexOf("row")>=0?this.lastSelectionType=["row"]:this.lastSelectionType.length=0:(this.lastSelectionType.length=0,this.setAllRowsSelected(!1),this.rowSelectionModel.clear())},isRectangleSelected:function(e,t,n,i){return!!this.selections.find(function(r){return r.origin.x===e&&r.origin.y===t&&r.extent.x===n&&r.extent.y===i})},isColumnSelected:function(e){return this.columnSelectionModel.isSelected(e)},isRowSelected:function(e){return this.allRowsSelected||this.rowSelectionModel.isSelected(e)},selectColumn:function(e,t){this.columnSelectionModel.select(e,t),this.setLastSelectionType("column",!this.columnSelectionModel.selection.length)},selectAllRows:function(){this.clear(),this.setAllRowsSelected(!0)},setAllRowsSelected:function(e){this.allRowsSelected=e},areAllRowsSelected:function(){return this.allRowsSelected},selectRow:function(e,t){this.rowSelectionModel.select(e,t),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},deselectColumn:function(e,t){this.columnSelectionModel.deselect(e,t),this.setLastSelectionType("column",!this.columnSelectionModel.selection.length)},deselectRow:function(e,t){this.areAllRowsSelected()&&(this.setAllRowsSelected(!1),this.rowSelectionModel.select(0,this.grid.getRowCount()-1)),this.rowSelectionModel.deselect(e,t),this.setLastSelectionType("row",!this.rowSelectionModel.selection.length)},getSelectedRows:function(){if(this.areAllRowsSelected()){for(var e=this.grid.getHeaderRowCount(),t=this.grid.getRowCount()-e,n=new Array(t),i=0;i<t;i++)n[i]=i+e;return n}return this.rowSelectionModel.getSelections()},getSelectedColumns:function(){return this.columnSelectionModel.getSelections()},isColumnOrRowSelected:function(){return!this.columnSelectionModel.isEmpty()||!this.rowSelectionModel.isEmpty()},getFlattenedYs:function(){var e=[],t={};return this.selections.forEach(function(n){for(var i=n.origin.y,r=n.height,o=0;o<r;o++){var s=o+i;t[s]||(e.push(s),t[s]=!0)}}),e.sort(function(e,t){return e-t}),e},selectRowsFromCells:function(e,t){e=e||0;var n=this.rowSelectionModel;t||(this.setAllRowsSelected(!1),n.clear()),this.selections.forEach(function(t){var i=t.origin.y,r=t.extent.y;i+=e,n.select(i,i+r)})},selectColumnsFromCells:function(e){e=e||0;var t=this.columnSelectionModel;t.clear(),this.selections.forEach(function(n){var i=n.origin.x,r=n.extent.x;i+=e,t.select(i,i+r)})},isInCurrentSelectionRectangle:function(e,t){var n=this.getLastSelection();return n&&this.rectangleContains(n,e,t)},rectangleContains:function(e,t,n){var i=e.origin.x,r=e.origin.y,o=i+e.extent.x,s=r+e.extent.y;return e.extent.x<0&&(i=o,o=e.origin.x),e.extent.y<0&&(r=s,s=e.origin.y),t>=i&&n>=r&&t<=o&&n<=s}},e.exports=o},function(e,t,n){"use strict";var i=n(8),r=n(57),o=n(18),s=n(6),a=n(9),l={};function u(e,t){switch(typeof t){case"number":l.number||(console.warn("Column(behavior: object, index: number) overload has been deprecated as of v2.1.6 in favor of Column(behavior: object, columnSchema: object) overload with defined columnSchema.index. (Will be removed in a future release.)"),l.number=!0),t={index:t};break;case"string":var n,i;if(l.string||(console.warn("Column(behavior:object, name: string) overload (where name is sought in schema) has been deprecated as of v2.1.6 in favor of Column(behavior: object, columnSchema: object) overload with defined columnSchema.index. (Will be removed in a future release.)"),l.string=!0),n=t,(i=e.dataModel.schema.findIndex(function(e){return e.name===n}))<0)throw new this.HypergridError('Column named "'+n+'" not found in schema.');t={name:n,index:i};break;case"object":if(void 0===t.index){if(l.object||(console.warn("Column(behavior:object, columnSchema: object) overload (where columnSchema.index is undefined but columnSchema.name is sought in schema) has been deprecated as of v2.1.6 in favor of defined columnSchema.index. (Will be removed in a future release.)"),l.object=!0),n=t.name,(i=e.dataModel.schema.findIndex(function(e){return e.name===n}))<0)throw new this.HypergridError('Column named "'+n+'" not found in schema.');t.index=i}}if(void 0===t.index)throw new s("Column index required.");switch(this.behavior=e,this.dataModel=e.dataModel,Object.defineProperties(this,{index:{value:t.index},name:{enumerable:!0,value:t.name||t.index.toString()}}),this.properties=this.schema=t,t.index){case this.behavior.treeColumnIndex:var r=a[Object.create(this.properties.treeHeader,{isDataRow:{value:!0}}).leftIcon];this.properties.minimumColumnWidth=r?r.width+3:0;break;case this.behavior.rowColumnIndex:break;default:if(t.index<0)throw new this.HypergridError("New column index "+t.index+" out of range.")}}u.prototype={constructor:u.prototype.constructor,$$CLASS_NAME:"Column",HypergridError:s,mixIn:i.mixIn,set header(e){this.schema.header=e,this.behavior.grid.repaint()},get header(){return this.schema.header},set calculator(e){(e=function(e){if(!e)return;var t=' (for column "'+this.name+'").';if("function"==typeof e)e=e.toString();else if("string"!=typeof e)throw new s("Expected calculator function OR string containing calculator function OR calculator name"+t);var n,i,o=this.behavior.grid.properties.calculators||(this.behavior.grid.properties.calculators={});if(/^\w+$/.test(e)){if(!o[i=e])throw new s('Unknown calculator name "'+i+t)}else if(n=e.match(h))i=n[1];else if(e.test(d))i=e;else if(c.test(e))throw new s("Arrow function not permitted as column calculator "+t);o[i]||(o[i]=e);return o[i]=r(o[i]),o[i]}.call(this,e))!==this.schema.calculator&&(this.schema.calculator=e,this.behavior.grid.reindex())},get calculator(){return this.schema.calculator},set type(e){this.schema.type=e,this.behavior.reindex()},get type(){return this.schema.type},getValue:function(e,t){return this.dataModel.getValue(this.index,e,t)},setValue:function(e,t,n){return this.dataModel.setValue(this.index,e,t,n)},getWidth:function(){return this.properties.width||this.behavior.grid.properties.defaultColumnWidth},setWidth:function(e){(e=Math.max(this.properties.minimumColumnWidth,e))!==this.properties.width&&(this.properties.width=e,this.properties.columnAutosizing=!1)},checkColumnAutosizing:function(e){var t,n,i,r=this.properties;return r.columnAutosizing&&(t=r.width,n=r.preferredWidth||t,e=e||!r.columnAutosized,(t!==n||e&&void 0!==n)&&(r.width=e?n:Math.max(t,n),r.columnAutosizingMax&&r.width>r.columnAutosizingMax&&(r.width=r.columnAutosizingMax),r.columnAutosized=!isNaN(r.width),i=r.width!==t)),i},getCellType:function(e){var t=this.getValue(e);return this.typeOf(t)},getType:function(){var e=this.properties,t=e.type;return t||"unknown"!==(t=this.computeColumnType())&&(e.type=t),t},computeColumnType:function(){var e=this.behavior.getHeaderRowCount(),t=this.behavior.getRowCount(),n=this.getValue(e),i=this.typeOf(n);if(!i)return"unknown";for(var r=this.typeOf(n),o=e;o<t;o++)n=this.getValue(o),i=this.typeOf(n);return r},typeOf:function(e){if(null==e)return null;var t=typeof e;switch(t){case"object":return e.constructor.name.toLowerCase();case"number":return parseInt(e)===e?"int":"float";default:return t}},get properties(){return this._properties},set properties(e){this.addProperties(e,!0)},addProperties:function(e,t){e&&(!t&&this._properties||(this._properties=this.createColumnProperties()),o(this._properties,e))},setBackgroundColor:function(e){this.properties.backgroundColor!==e&&(this.properties.backgroundColor=e,this.behavior.grid.renderer.rebundleGridRenderers())},getCellEditorAt:function(e){var t=this.index,n=e.gridCell.y,i=e.properties.editor,r=Object.create(e,{format:{writable:!0,enumerable:!0,value:e.properties.format}}),o=e.subgrid.getCellEditorAt(t,n,i,r);return o&&!o.grid&&(o=void 0),o},getFormatter:function(){var e=this.properties.format;return this.behavior.grid.localization.get(e).format}};var c=/^(\(.*\)|\w+)\s*=>/,h=/^function\s+(\w+)\(/,d=/^function\s*\(/;u.prototype.mixIn(n(58).mixin),u.prototype.mixIn(n(59).mixin),e.exports=u},function(e,t,n){"use strict";var i=n(6);e.exports=function(e){switch(typeof e){case"undefined":case"function":return e;case"string":break;default:throw new i("Expected string, function, or undefined.")}var t=e.match(/^function\s*\w*\s*\(([^]*?)\)/);if(!t)throw new i("Expected function keyword with formal parameter list.");t=t[1].split(",").map(function(e,t){if(!(e=e.match(/\s*(\w*)\s*/))&&t)throw new i("Expected formal parameter.");return e[1]});var n=e.match(/{\s*([^]*?)\s*}\s*$/);if(!n)throw new i("Expected function body.");return n=n[1],1!==t.length||t[0]?t=t.concat(n):t[0]=n,Function.apply(null,t)}},function(e,t,n){"use strict";var i=n(18);function r(e,t){return this.getCellOwnProperties(e,t)||o.call(this,e,t)}function o(e,t){var n=(t||this.dataModel).getRowMetadata(e,null),i=this.properties;switch(this.index){case this.behavior.treeColumnIndex:i=i.treeHeader;break;case this.behavior.rowColumnIndex:i=i.rowHeader;break;default:t&&"filter"===t.type&&(i=this.properties.filterProperties)}return n[this.name]=Object.create(i)}t.mixin={getCellProperties:function(e,t){return this.getCellOwnProperties(e,t)||this.properties},setCellProperties:function(e,t,n){if(t)return Object.assign(o.call(this,e,n),t)},addCellProperties:function(e,t,n){if(t)return i(r.call(this,e,n),t)},getCellOwnProperties:function(e,t){var n;return(n=(t||this.dataModel).getRowMetadata(e))&&n&&n[this.name]||null},deleteCellOwnProperties:function(e,t){var n=(t=t||this.dataModel).getRowMetadata(e);n&&(delete n[this.name],0===Object.keys(n).length&&t.setRowMetadata(e))},getCellProperty:function(e,t,n){return this.getCellProperties(e,n)[t]},setCellProperty:function(e,t,n,i){var o=r.call(this,e,i);return o[t]=n,o},deleteCellProperty:function(e,t,n){var i=this.getCellOwnProperties(e,n);i&&delete i[t]},clearAllCellProperties:function(){this.behavior.subgrids.forEach(function(e){for(var t=e.getRowCount();t--;)this.deleteCellOwnProperties(t,e)},this)}}},function(e,t,n){"use strict";function i(){var e,t=this,n=t.behavior.grid.properties;switch(e=Object.create(n,{index:{get:function(){return t.index}},name:{get:function(){return t.name}},field:{get:function(){return t.name}},columnName:{get:function(){return t.name}},header:{get:function(){return t.header},set:function(e){this!==t.properties&&(n.header=e),t.header=e}},type:{get:function(){return t.type},set:function(e){this!==t.properties&&(n.type=e),t.type=e}},calculator:{get:function(){return t.calculator},set:function(e){this!==t.properties&&(n.calculator=e),t.calculator=e}},toJSON:{value:function(){return Object.assign({header:this.header,type:this.type,calculator:this.calculator},this)}}}),Object.defineProperties(e,{rowHeader:{value:Object.create(e,i.rowHeaderDescriptors)},treeHeader:{value:Object.create(e,i.treeHeaderDescriptors)},columnHeader:{value:Object.create(e,i.columnHeaderDescriptors)},filterProperties:{value:Object.create(e,i.filterDescriptors)}}),t.index){case t.behavior.treeColumnIndex:e=e.treeHeader;break;case t.behavior.rowColumnIndex:e=e.rowHeader}return e}i.treeHeaderDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderFont},set:function(e){this.treeHeaderFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderColor},set:function(e){this.treeHeaderColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderBackgroundColor},set:function(e){this.treeHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderForegroundSelectionFont},set:function(e){this.treeHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderForegroundSelectionColor},set:function(e){this.treeHeaderForegroundSelectionColor=e}},renderer:{configurable:!0,enumerable:!0,get:function(){return this.isDataRow?this.treeRenderer:this.grid.properties.renderer},set:function(e){this.treeRenderer=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.treeHeaderBackgroundSelectionColor},set:function(e){this.treeHeaderBackgroundSelectionColor=e}},columnAutosizing:{configurable:!0,enumerable:!0,get:function(){return this.treeColumnAutosizing},set:function(e){this.treeColumnAutosizing=e}},columnAutosizingMax:{configurable:!0,enumerable:!0,get:function(){return this.treeColumnAutosizingMax},set:function(e){this.treeColumnAutosizingMax=e}}},i.rowHeaderDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderFont},set:function(e){this.rowHeaderFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderColor},set:function(e){this.rowHeaderColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderBackgroundColor},set:function(e){this.rowHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderForegroundSelectionFont},set:function(e){this.rowHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderForegroundSelectionColor},set:function(e){this.rowHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.rowHeaderBackgroundSelectionColor},set:function(e){this.rowHeaderBackgroundSelectionColor=e}},leftIcon:{configurable:!0,enumerable:!0,get:function(){var e;if(this.grid.properties.rowHeaderCheckboxes)return this.isDataRow?e=this.isRowSelected?"checked":"unchecked":this.isHeaderRow?e=this.allRowsSelected?"checked":"unchecked":this.isFilterRow&&(e="filter-off"),e},set:function(e){Object.defineProperty(this,"leftIcon",{configurable:!0,enumerable:!0,writable:!0,value:e})}},columnAutosizing:{configurable:!0,enumerable:!0,get:function(){return this.rowNumberAutosizing},set:function(e){this.rowNumberAutosizing=e}}},i.filterDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.filterFont},set:function(e){this.filterFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.filterColor},set:function(e){this.filterColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.filterBackgroundColor},set:function(e){this.filterBackgroundColor=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.filterForegroundSelectionColor},set:function(e){this.filterForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.filterBackgroundSelectionColor},set:function(e){this.filterBackgroundSelectionColor=e}},halign:{configurable:!0,enumerable:!0,get:function(){return this.filterHalign},set:function(e){this.filterHalign=e}},renderer:{configurable:!0,enumerable:!0,get:function(){return this.filterRenderer},set:function(e){this.filterRenderer=e}},editor:{configurable:!0,enumerable:!0,get:function(){return this.filterEditor},set:function(e){this.filterEditor=e}},rightIcon:{configurable:!0,enumerable:!0,get:function(){var e;return this.filterable&&(e=this.filter?"filter-on":"filter-off"),e},set:function(e){Object.defineProperty(this,"rightIcon",{configurable:!0,enumerable:!0,writable:!0,value:e})}}},i.columnHeaderDescriptors={font:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderFont},set:function(e){this.columnHeaderFont=e}},color:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderColor},set:function(e){this.columnHeaderColor=e}},backgroundColor:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderBackgroundColor},set:function(e){this.columnHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderForegroundSelectionFont},set:function(e){this.columnHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(e){this.columnHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(e){this.columnHeaderBackgroundSelectionColor=e}},halign:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderHalign},set:function(e){this.columnHeaderHalign=e}},format:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderFormat},set:function(e){this.columnHeaderFormat=e}},renderer:{configurable:!0,enumerable:!0,get:function(){return this.columnHeaderRenderer},set:function(e){this.columnHeaderRenderer=e}},leftIcon:{writable:!0,value:void 0},centerIcon:{writable:!0,value:void 0},rightIcon:{writable:!0,value:void 0}},t.mixin={createColumnProperties:i}},function(e,t,n){"use strict";var i=Object.defineProperties({},{value:{get:function(){return this.subgrid.getValue(this.dataCell.x,this.dataCell.y)},set:function(e){this.subgrid.setValue(this.dataCell.x,this.dataCell.y,e)}},dataRow:{get:function(){return this.subgrid.getRow(this.dataCell.y)}},formattedValue:{get:function(){return this.grid.formatValue(this.properties.format,this.value)}},bounds:{get:function(){return this._bounds||(this._bounds={x:this.visibleColumn.left,y:this.visibleRow.top,width:this.visibleColumn.width,height:this.visibleRow.height})}},columnProperties:{get:function(){var e=this._columnProperties;return e||(e=this.column.properties,this.isDataColumn&&(this.isDataRow||(e=this.isFilterRow?e.filterProperties:e.columnHeader)),this._columnProperties=e),e}},cellOwnProperties:{get:function(){return void 0===this._cellOwnProperties&&(this._cellOwnProperties=this.column.getCellOwnProperties(this.dataCell.y,this.subgrid)),this._cellOwnProperties}},properties:{get:function(){return this.cellOwnProperties||this.columnProperties}},getCellProperty:{value:function(e){return this.properties[e]}},setCellProperty:{value:function(e,t){this._cellOwnProperties=this.column.setCellProperty(this.dataCell.y,e,t,this.subgrid)}},rowOwnProperties:{get:function(){return this.behavior.getRowProperties(this,void 0,this.subgrid)}},rowProperties:{get:function(){return this.behavior.getRowProperties(this,null,this.subgrid)},set:function(e){this.behavior.setRowProperties(this,e,this.subgrid)}},getRowProperty:{value:function(e){var t=this.rowOwnProperties;return t&&t[e]}},setRowProperty:{value:function(e,t){this.rowProperties[e]=t}},reset:{value:function(e,t){this._columnProperties=void 0,this._cellOwnProperties=void 0,this._bounds=void 0,this.snapshot=[],this.minWidth=void 0,this.visibleColumn=e,this.visibleRow=t,this.subgrid=t.subgrid,this.column=e.column,this.gridCell.x=e.columnIndex,this.gridCell.y=t.index,this.dataCell.x=this.column&&this.column.index,this.dataCell.y=t.rowIndex}},resetGridCY:{value:function(e,t){var n,i,r=(i=this.renderer.getVisibleColumn(e))&&(n=this.renderer.getVisibleRow(t));return r&&this.reset(i,n),r}},resetGridXY:{value:function(e,t){var n,i,r=(i=this.renderer.visibleColumns[e])&&(n=this.renderer.getVisibleRow(t));return r&&this.reset(i,n),r}},resetDataXY:{value:function(e,t,n){var i,r,o=(r=this.renderer.getVisibleDataColumn(e))&&(i=this.renderer.getVisibleDataRow(t,n));return o&&this.reset(r,i),o}},resetGridXDataY:{value:function(e,t,n,i){var r,o,s;return i?(o={column:this.behavior.getColumn(e),columnIndex:e},s={subgrid:n||this.behavior.dataModel,rowIndex:t},r=!0):r=(o=this.renderer.getVisibleColumn(e))&&(s=this.renderer.getVisibleDataRow(t,n)),r&&this.reset(o,s),r&&this}},clone:{value:function(e){var t=new this.constructor;return t.resetGridXY(this.visibleColumn.index,this.visibleRow.index),e&&Object.assign(t,this),t}},editPoint:{get:function(){throw"The `.editPoint` property is no longer available as of v1.2.10. Use the following coordinates instead:\n`.gridCell.x` - The active column index. (Adjusted for column scrolling after fixed columns.)\n`.gridCell.y` - The vertical grid coordinate. (Unaffected by row scrolling.)\n`.dataCell.x` - The data model's column index. (Unaffected by column scrolling.)\n`.dataCell.y` - The data model's row index. (Adjusted for data row scrolling after fixed rows.)\n"}},mousePointInClickRect:{get:function(){var e="clickRect"in this?this.clickRect:this.properties.clickRect;return!e||("function"==typeof e.contains?e.contains(this.mousePoint):e.x<=this.mousePoint.x&&this.mousePoint.x<e.x+e.width&&e.y<=this.mousePoint.y&&this.mousePoint.y<e.y+e.height)}},isRowVisible:{get:function(){return!!this.visibleRow}},isColumnVisible:{get:function(){return!!this.visibleColumn}},isCellVisible:{get:function(){return this.isRowVisible&&this.isColumnVisible}},isDataRow:{get:function(){return this.subgrid.isData}},isDataColumn:{get:function(){return this.gridCell.x>=0}},isDataCell:{get:function(){return this.isDataRow&&this.isDataColumn}},isRowSelected:{get:function(){return this.isDataRow&&this.selectionModel.isRowSelected(this.dataCell.y)}},isColumnSelected:{get:function(){return this.isDataColumn&&this.selectionModel.isColumnSelected(this.gridCell.x)}},isCellSelected:{get:function(){return this.selectionModel.isCellSelected(this.gridCell.x,this.dataCell.y)}},isRowHovered:{get:function(){return this.grid.canvas.hasMouse&&this.isDataRow&&this.grid.hoverCell&&this.grid.hoverCell.y===this.gridCell.y}},isColumnHovered:{get:function(){return this.grid.canvas.hasMouse&&this.isDataColumn&&this.grid.hoverCell&&this.grid.hoverCell.x===this.gridCell.x}},isCellHovered:{get:function(){return this.isRowHovered&&this.isColumnHovered}},isRowFixed:{get:function(){return this.isDataRow&&this.dataCell.y<this.grid.properties.fixedRowCount}},isColumnFixed:{get:function(){return this.isDataColumn&&this.gridCell.x<this.grid.properties.fixedColumnCount}},isCellFixed:{get:function(){return this.isRowFixed&&this.isColumnFixed}},isHandleColumn:{get:function(){return this.gridCell.x===this.behavior.rowColumnIndex&&this.grid.properties.showRowNumbers}},isHandleCell:{get:function(){return this.isHandleColumn&&this.isDataRow}},isTreeColumn:{get:function(){return this.gridCell.x===this.behavior.treeColumnIndex}},isHeaderRow:{get:function(){return this.subgrid.isHeader}},isHeaderHandle:{get:function(){return this.isHeaderRow&&this.isHandleColumn}},isHeaderCell:{get:function(){return this.isHeaderRow&&this.isDataColumn}},isFilterRow:{get:function(){return this.subgrid.isFilter}},isFilterHandle:{get:function(){return this.isFilterRow&&this.isHandleColumn}},isFilterCell:{get:function(){return this.isFilterRow&&this.isDataColumn}},isSummaryRow:{get:function(){return this.subgrid.isSummary}},isSummaryHandle:{get:function(){return this.isSummaryRow&&this.isHandleColumn}},isSummaryCell:{get:function(){return this.isSummaryRow&&this.isDataColumn}},isTopTotalsRow:{get:function(){return this.subgrid===this.behavior.subgrids.lookup.topTotals}},isTopTotalsHandle:{get:function(){return this.isTopTotalsRow&&this.isHandleColumn}},isTopTotalsCell:{get:function(){return this.isTopTotalsRow&&this.isDataColumn}},isBottomTotalsRow:{get:function(){return this.subgrid===this.behavior.subgrids.lookup.bottomTotals}},isBottomTotalsHandle:{get:function(){return this.isBottomTotalsRow&&this.isHandleColumn}},isBottomTotalsCell:{get:function(){return this.isBottomTotalsRow&&this.isDataColumn}},$$CLASS_NAME:{value:"CellEvent"}}),r=n(3).Point;function o(e,t){}o.prototype=r.prototype;var s={writable:!0},a={writable:!0,enumerable:!0};e.exports=function(e){function t(e,t){Object.defineProperties(this,{visibleColumn:s,visibleRow:s,subgrid:s,gridCell:{value:new o},dataCell:{value:new o},column:a,_columnProperties:s,_cellOwnProperties:s,_bounds:s,snapshot:s,minWidth:s,disabled:s}),arguments.length&&this.resetGridCY(e,t)}return t.prototype=Object.create(i,{constructor:{value:t},grid:{value:e},renderer:{value:e.renderer},selectionModel:{value:e.selectionModel},behavior:{value:e.behavior},dataModel:{value:e.behavior.dataModel}}),t}},function(e,t,n){"use strict";var i=n(10),r=/^__/,o={decorateSchema:function(e){return(new i).decorateArray(e),e},decorateColumnSchema:function(e,t){var n=new i;return n.transformations={},n.transformations[t]="header",n.decorateArray(e),e},normalizeSchema:function(e){e.forEach(function(t,n){"string"==typeof t&&(e[n]={name:t})});for(var t=e.length;t--;)r.test(e[t].name)&&e.splice(t,1);return e.forEach(function(e,t){e.index=t}),e},getFieldNames:function(e){return Object.keys(e||{}).filter(function(e){return!r.test(e)})},titleize:n(19).toTitle,getSchema:function(e){var t=e&&e[0]||{},n=o.getFieldNames(t);return o.normalizeSchema(n),o.decorateSchema(n),o.decorateColumnSchema(n,"toTitle"),n}};e.exports=o},function(e,t,n){"use strict";var i=n(11).extend("Features",{BaseClass:n(0),initialize:function(){this.add(i.CellClick),this.add(i.CellEditing),this.add(i.CellSelection),this.add(i.ColumnMoving),this.add(i.ColumnResizing),this.add(i.ColumnSelection),this.add(i.ColumnSorting),this.add(i.Filters),this.add(i.KeyPaging),this.add(i.OnHover),this.add(i.RowSelection),this.add(i.ThumbwheelScrolling)}});i.BaseClass=n(0),i.CellClick=n(63),i.CellEditing=n(64),i.CellSelection=n(66),i.ColumnMoving=n(67),i.ColumnResizing=n(68),i.ColumnSelection=n(69),i.ColumnSorting=n(70),i.Filters=n(71),i.KeyPaging=n(72),i.OnHover=n(73),i.RowSelection=n(74),i.ThumbwheelScrolling=n(75),e.exports=new i},function(e,t,n){"use strict";var i=n(0).extend("CellClick",{handleMouseMove:function(e,t){var n=t.properties.link,i=n&&"boolean"!=typeof n;this.cursor=i?"pointer":null,this.next&&this.next.handleMouseMove(e,t)},handleClick:function(e,t){!((t.isDataCell||t.isTreeColumn)&&(void 0!==this.openLink(e,t)||e.cellClicked(t)))&&this.next&&this.next.handleClick(e,t)},openLink:function(e,t){var n,i,r=t.dataRow,o=Object.create(t.properties,{dataRow:{value:r}}),s=o.exec(t.value),a=t.properties.link,l=a instanceof Array,u=l?a[0]:a;switch(typeof u){case"string":"*"===u?i=s:/^\w+$/.test(u)&&(i=r[u]);break;case"function":i=u(t)}return i&&(i=i.toString().replace(/%name/g,o.name).replace(/%value/g,s),l?((a=a.slice())[0]=i,n=e.windowOpen.apply(e,a)):n=e.windowOpen(i,t.properties.linkTarget)),n&&(t.setCellProperty("linkColor",e.properties.linkVisitedColor),e.renderer.resetCellPropertiesCache(t),e.repaint()),n}});e.exports=i},function(e,t,n){"use strict";var i=n(0),r=n(5),o=i.extend("CellEditing",{handleClick:function(e,t){s.call(this,e,t)},handleDoubleClick:function(e,t){s.call(this,e,t,!0)},handleKeyDown:function(e,t){var n,i,o,s,a;(a=e.getGridCellFromLastSelection())&&a.properties.editOnKeydown&&!e.cellEditor&&("F2"===(n=t.detail.char)||(i=1===n.length&&!(t.detail.meta||t.detail.ctrl))||(o="DELETE"===n||"BACKSPACE"===n))?(s=e.onEditorActivate(a))instanceof r&&(i?s.input.value=n:o&&s.setEditorValue(""),t.detail.primitiveEvent.preventDefault()):this.next&&this.next.handleKeyDown(e,t)}});function s(e,t,n){!t.isDataCell||t.getCellProperty("editOnDoubleClick")^n||e.onEditorActivate(t),this.next&&this.next[n?"handleDoubleClick":"handleClick"](e,t)}e.exports=o},function(e,t,n){"use strict";t.shaker=function(e){var t=this,n=(e=e||{}).el||t.el,i=e.duration||"0.065s",r=window.getComputedStyle(n),o=r.transition.split(","),s=r.position,a=parseInt(r.left),l=-3,u=6;function c(i){i&&"left"!==i.propertyName||(n.style.left=a+l+"px",u--||(n.removeEventListener("transitionend",c),o.pop(),n.style.transition=o.join(","),n.style.position=s,e.callback&&e.callback.call(t,e)),l=u?-l:0)}o.push("left "+i),n.style.transition=o.join(","),n.addEventListener("transitionend",c),c()};var i={"background-color":"yellow","box-shadow":"0 0 10px red"};t.glower=function(e){var t=this,n=(e=e||{}).el||t.el,r=e.duration||"0.25s",o=e.styles||i,s=o.length,a=window.getComputedStyle(n),l={},u=a.transition,c=u.split(",");Object.keys(o).forEach(function(e){l[e]={style:a[e],undo:!0},c.push(e+" "+r)}),n.style.transition=c.join(","),n.addEventListener("transitionend",function i(r){var o=l[r.propertyName];o.undo?(n.style[r.propertyName]=o.style,o.undo=!1):--s||(n.removeEventListener("transitionend",i),n.style.transition=u,e.callback&&e.callback.call(t,e))}),Object.keys(o).forEach(function(e){n.style[e]=o[e]})}},function(e,t,n){"use strict";var i=n(0).extend("CellSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(e,t){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(e,t)},handleMouseDown:function(e,t){var n=t.gridCell.x,i=t.dataCell.y;if(e.behavior.getCellProperty(t.dataCell.x,t.gridCell.y,"cellSelection")&&t.isDataCell&&!t.primitiveEvent.detail.isRightClick){var r=e.newPoint(n,i),o=t.primitiveEvent.detail.keys;this.dragging=!0,this.extendSelection(e,r,o)}else this.next&&this.next.handleMouseDown(e,t)},handleMouseDrag:function(e,t){this.dragging&&e.properties.cellSelection&&!t.primitiveEvent.detail.isRightClick?(this.currentDrag=t.primitiveEvent.detail.mouse,this.lastDragCell=e.newPoint(t.gridCell.x,t.dataCell.y),this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,this.lastDragCell,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var n=t.detail,i=e.getGridCellFromLastSelection(!0),r=this["handle"+(i&&(i.properties.mappedNavKey(n.char,n.ctrl)||i.properties.navKey(n.char,n.ctrl)))];r?(r.call(this,e,n),i.properties.editOnNextCell&&(e.renderer.computeCellsBounds(!0),i=e.getGridCellFromLastSelection(),e.editAt(i)),e.cellEditor||e.takeFocus()):this.next&&this.next.handleKeyDown(e,t)},handleMouseDragCellSelection:function(e,t,n){var i=Math.max(0,t.x),r=Math.max(0,t.y),o=e.getDragExtent(),s=e.getMouseDown(),a=i-s.x,l=r-s.y;o.x===a&&o.y===l||(e.clearMostRecentSelection(),e.select(s.x,s.y,a,l),e.setDragExtent(e.newPoint(a,l)),e.repaint())},checkDragScroll:function(e,t){e.properties.scrollingEnabled&&(e.getDataBounds().contains(t)?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e)))},scrollDrag:function(e){if(e.isScrollingNow()){var t=e.isMouseDownInHeaderArea(),n=this.lastDragCell,i=e.getDataBounds(),r=0,o=0,s=e.getFixedColumnCount(),a=e.getFixedRowCount(),l=n.x<s,u=n.y<a;t||(this.currentDrag.x<i.origin.x&&(r=-1),this.currentDrag.y<i.origin.y&&(o=-1)),this.currentDrag.x>i.origin.x+i.extent.x&&(r=1),this.currentDrag.y>i.origin.y+i.extent.y&&(o=1);var c=r,h=o;l&&(c=0),u&&(h=0),this.lastDragCell=n.plusXY(c,h),e.scrollBy(r,o),this.handleMouseDragCellSelection(e,n,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,n){var i=n.indexOf("CTRL")>=0,r=n.indexOf("SHIFT")>=0,o=e.getMouseDown(),s=t.x,a=t.y;if(!(s<0||a<0)){if(i&&s===o.x&&a===o.y)return e.clearMostRecentSelection(),e.popMouseDown(),void e.repaint();i||r||e.clearSelections(),r?(e.clearMostRecentSelection(),e.select(o.x,o.y,s-o.x,a-o.y),e.setDragExtent(e.newPoint(s-o.x,a-o.y))):(e.select(s,a,0,0),e.setMouseDown(e.newPoint(s,a)),e.setDragExtent(e.newPoint(0,0))),e.repaint()}},handleDOWNSHIFT:function(e){this.moveShiftSelect(e,0,1)},handleUPSHIFT:function(e){this.moveShiftSelect(e,0,-1)},handleLEFTSHIFT:function(e){this.moveShiftSelect(e,-1,0)},handleRIGHTSHIFT:function(e){this.moveShiftSelect(e,1,0)},handleDOWN:function(e,t){t.primitiveEvent.preventDefault();var n=this.getAutoScrollAcceleration();e.moveSingleSelect(0,n)},handleUP:function(e,t){t.primitiveEvent.preventDefault();var n=this.getAutoScrollAcceleration();e.moveSingleSelect(0,-n)},handleLEFT:function(e){e.moveSingleSelect(-1,0)},handleRIGHT:function(e){e.moveSingleSelect(1,0)},getAutoScrollAcceleration:function(){var e=this.getAutoScrollDuration()/2e3;return Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){Date.now()-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t,n){e.extendSelect(t,n)&&this.pingAutoScroll()}});e.exports=i},function(e,t,n){"use strict";var i,r,o,s,a=["grab","-moz-grab","-webkit-grab"],l=["grabbing","-moz-grabbing","-webkit-grabbing"],u=function(e){this.cursor=e},c=n(0).extend("ColumnMoving",{floaterAnimationQueue:[],columnDragAutoScrollingRight:!1,columnDragAutoScrollingLeft:!1,dragArmed:!1,dragging:!1,dragCol:-1,dragOffset:0,initializeOn:function(e){this.isFloatingNow=!1,this.initializeAnimationSupport(e),this.next&&this.next.initializeOn(e)},initializeAnimationSupport:function(e){i||((i=document.createElement("canvas")).setAttribute("width","0px"),i.setAttribute("height","0px"),i.style.position="fixed",document.body.appendChild(i),r=i.getContext("2d",{alpha:!1})),o||((o=document.createElement("canvas")).setAttribute("width","0px"),o.setAttribute("height","0px"),o.style.position="fixed",document.body.appendChild(o),s=o.getContext("2d",{alpha:!1}))},handleMouseDrag:function(e,t){var n,i=t.gridCell;Math.abs(t.primitiveEvent.detail.dragstart.x-t.primitiveEvent.detail.mouse.x)<10||t.isColumnFixed?this.next&&this.next.handleMouseDrag(e,t):(t.isHeaderCell&&this.dragArmed&&!this.dragging?(this.dragging=!0,this.dragCol=i.x,this.dragOffset=t.mousePoint.x,this.detachChain(),n=t.primitiveEvent.detail.mouse.x-this.dragOffset,this.createDragColumn(e,n,this.dragCol)):this.next&&this.next.handleMouseDrag(e,t),this.dragging&&(n=t.primitiveEvent.detail.mouse.x-this.dragOffset,this.dragColumn(e,n)))},handleMouseDown:function(e,t){e.properties.columnsReorderable&&!t.primitiveEvent.detail.isRightClick&&!t.isColumnFixed&&t.isHeaderCell?(this.dragArmed=!0,this.cursor=l,e.clearSelections()):this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){if(this.dragging){this.cursor=null;var n=this;this.endDragColumn(e),setTimeout(function(){n.attachChain()},200)}this.dragCol=-1,this.dragging=!1,this.dragArmed=!1,this.cursor=null,e.repaint(),this.next&&this.next.handleMouseUp(e,t)},handleMouseMove:function(e,t){e.properties.columnsReorderable&&!t.isColumnFixed&&!this.dragging&&t.isHeaderCell&&t.mousePoint.y<e.properties.columnGrabMargin?this.cursor=a:this.cursor=null,this.next&&this.next.handleMouseMove(e,t),t.isHeaderCell&&this.dragging&&(this.cursor=l)},floatColumnTo:function(e,t){this.floatingNow=!0;var n,i,r=e.renderer.visibleColumns,o=e.getHScrollValue(),s=e.renderOverridesCache.floater.columnIndex,a=e.renderOverridesCache.dragger.columnIndex,l=e.renderOverridesCache.dragger.hdpiratio,u=e.getFixedColumnCount(),c=e.getColumnWidth(a),h=e.getColumnWidth(s),d=e.getVisibleColumnsCount(),f=0,p=0;a>=u&&(f=o),s>=u&&(p=o),t?(n=r[Math.min(d,a-f)].left,i=r[Math.min(d,s-p)].left,e.renderOverridesCache.dragger.startX=(n+h)*l,e.renderOverridesCache.floater.startX=n*l):(n=(i=r[Math.min(d,s-p)].left)+c,e.renderOverridesCache.dragger.startX=i*l,e.renderOverridesCache.floater.startX=n*l),e.swapColumns(a,s),e.renderOverridesCache.dragger.columnIndex=s,e.renderOverridesCache.floater.columnIndex=a,this.floaterAnimationQueue.unshift(this.doColumnMoveAnimation(e,i,n)),this.doFloaterAnimation(e)},doColumnMoveAnimation:function(e,t,n){var i=this;return function(){var r=o;r.style.display="inline",i.setCrossBrowserProperty(r,"transform","translate("+t+"px, 0px)"),requestAnimationFrame(function(){i.setCrossBrowserProperty(r,"transition",(i.isWebkit?"-webkit-":"")+"transform 150ms ease"),i.setCrossBrowserProperty(r,"transform","translate("+n+"px, "+-2+"px)")}),e.repaint(),setTimeout(function(){i.setCrossBrowserProperty(r,"transition",""),e.renderOverridesCache.floater=null,e.repaint(),i.doFloaterAnimation(e),requestAnimationFrame(function(){r.style.display="none",i.isFloatingNow=!1})},200)}},doFloaterAnimation:function(e){if(0===this.floaterAnimationQueue.length)return this.floatingNow=!1,void e.repaint();this.floaterAnimationQueue.pop()()},createFloatColumn:function(e,t){var n=e.getFixedColumnCount(),i=e.getHScrollValue();t<n&&(i=0);var r=e.getColumnWidth(t),a=e.div.clientHeight,c=o,h=c.style,d=e.div.getBoundingClientRect();h.top=d.top-2+"px",h.left=d.left+"px";var f=e.getHiDPI(s);c.setAttribute("width",Math.round(r*f)+"px"),c.setAttribute("height",Math.round(a*f)+"px"),h.boxShadow="0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)",h.width=r+"px",h.height=a+"px",h.borderTop="1px solid "+e.properties.lineColor,h.backgroundColor=e.properties.backgroundColor;var p=e.renderer.visibleColumns[t-i].left*f;s.scale(f,f),e.renderOverridesCache.floater={columnIndex:t,ctx:s,startX:p,width:r,height:a,hdpiratio:f},h.zIndex="4",this.setCrossBrowserProperty(c,"transform","translate("+p+"px, "+-2+"px)"),l.forEach(u,h),e.repaint()},setCrossBrowserProperty:function(e,t,n){var i=t[0].toUpperCase()+t.substr(1);this.setProp(e,"webkit"+i,n),this.setProp(e,"Moz"+i,n),this.setProp(e,"ms"+i,n),this.setProp(e,"O"+i,n),this.setProp(e,t,n)},setProp:function(e,t,n){t in e.style&&(e.style[t]=n)},createDragColumn:function(e,t,n){var o=e.getFixedColumnCount(),s=e.getHScrollValue();n<o&&(s=0);var a=e.getHiDPI(r),c=e.getColumnWidth(n),h=e.div.clientHeight,d=i,f=e.div.getBoundingClientRect(),p=d.style;p.top=f.top+"px",p.left=f.left+"px",p.opacity=.85,p.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)",p.borderTop="1px solid "+e.properties.lineColor,p.backgroundColor=e.properties.backgroundColor,d.setAttribute("width",Math.round(c*a)+"px"),d.setAttribute("height",Math.round(h*a)+"px"),p.width=c+"px",p.height=h+"px";var g=e.renderer.visibleColumns[n-s].left*a;r.scale(a,a),e.renderOverridesCache.dragger={columnIndex:n,startIndex:n,ctx:r,startX:g,width:c,height:h,hdpiratio:a},this.setCrossBrowserProperty(d,"transform","translate("+t+"px, -5px)"),p.zIndex="5",l.forEach(u,p),e.repaint()},dragColumn:function(e,t){var n=this.columnDragAutoScrollingRight||this.columnDragAutoScrollingLeft,o=e.getHiDPI(r),s=e.renderOverridesCache.dragger.columnIndex,a=e.renderer.getFinalVisibleColumnBoundary();t=Math.min(t,a+15);var l=(t=Math.max(-15,t))<0&&0!==s,u=t>a,c=i;this.setCrossBrowserProperty(c,"transition",(this.isWebkit?"-webkit-":"")+"transform 0ms ease, box-shadow 150ms ease"),this.setCrossBrowserProperty(c,"transform","translate("+t+"px, "+-10+"px)"),requestAnimationFrame(function(){c.style.display="inline"});var h=e.renderer.getColumnFromPixelX(t+c.width/2/o);l&&(h=0),u&&(h=e.getColumnCount()-1);var d=s>h;if((d=d||h-s>=1)&&!n){var f=s<h;if(this.isFloatingNow)return;this.isFloatingNow=!0,this.createFloatColumn(e,h),this.floatColumnTo(e,f)}else{if(t<-10&&this.checkAutoScrollToLeft(e,t),t>-10&&(this.columnDragAutoScrollingLeft=!1),u||t>a+10)return void this.checkAutoScrollToRight(e,t);t<a+10&&(this.columnDragAutoScrollingRight=!1)}},checkAutoScrollToRight:function(e,t){this.columnDragAutoScrollingRight||(this.columnDragAutoScrollingRight=!0,this._checkAutoScrollToRight(e,t))},_checkAutoScrollToRight:function(e,t){if(this.columnDragAutoScrollingRight){var n=e.getHScrollValue();if(e.dragging&&!(n>e.sbHScroller.range.max-2)){var i=e.renderOverridesCache.dragger.columnIndex;e.scrollBy(1,0);var r=i+1;e.swapColumns(r,i),e.renderOverridesCache.dragger.columnIndex=r,setTimeout(this._checkAutoScrollToRight.bind(this,e,t),250)}}},checkAutoScrollToLeft:function(e,t){this.columnDragAutoScrollingLeft||(this.columnDragAutoScrollingLeft=!0,this._checkAutoScrollToLeft(e,t))},_checkAutoScrollToLeft:function(e,t){if(this.columnDragAutoScrollingLeft){var n=e.getHScrollValue();if(e.dragging&&!(n<1)){var i=e.renderOverridesCache.dragger.columnIndex;e.swapColumns(i+n,i+n-1),e.scrollBy(-1,0),setTimeout(this._checkAutoScrollToLeft.bind(this,e,t),250)}}},endDragColumn:function(e){var t=e.getFixedColumnCount(),n=e.getHScrollValue(),r=e.renderOverridesCache.dragger.columnIndex;r<t&&(n=0);var o=e.renderer.visibleColumns[r-n].left,s=i,a=e.renderOverridesCache.dragger.startIndex!==e.renderOverridesCache.dragger.columnIndex;this.setCrossBrowserProperty(s,"transition",(this.isWebkit?"-webkit-":"")+"transform 150ms ease, box-shadow 150ms ease"),this.setCrossBrowserProperty(s,"transform","translate("+o+"px, "+-1+"px)"),s.style.boxShadow="0px 0px 0px #888888",setTimeout(function(){e.renderOverridesCache.dragger=null,e.repaint(),requestAnimationFrame(function(){s.style.display="none",e.endDragColumnNotification(),a&&e.fireSyntheticOnColumnsChangedEvent()})},200)}});e.exports=c},function(e,t,n){"use strict";var i=n(0).extend("ColumnResizing",{dragStart:-1,dragStartWidth:-1,getMouseValue:function(e){return e.primitiveEvent.detail.mouse.x},overAreaDivider:function(e,t){var n=e.behavior.leftMostColIndex;return t.gridCell.x!==n&&t.mousePoint.x<=3||t.mousePoint.x>=t.bounds.width-3},getCursorName:function(){return"col-resize"},handleMouseDrag:function(e,t){if(this.dragColumn){var n=this.getMouseValue(t)-this.dragStart,i=this.dragStartWidth+n;if(this.nextColumn){if(0<n&&n<=this.nextStartWidth-this.nextColumn.properties.minimumColumnWidth||0>n&&n>=-(this.dragStartWidth-this.dragColumn.properties.minimumColumnWidth)){var r=this.nextStartWidth-n;e.behavior.setColumnWidth(this.dragColumn,i),e.behavior.setColumnWidth(this.nextColumn,r)}}else e.behavior.setColumnWidth(this.dragColumn,i)}else this.next&&this.next.handleMouseDrag(e,t)},handleMouseDown:function(e,t){if(t.isHeaderRow&&this.overAreaDivider(e,t)){var n=t.gridCell.x;if(t.mousePoint.x<=3){n-=1;var i=e.renderer.visibleColumns[n]||e.renderer.visibleColumns[n-1];if(!i)return;this.dragColumn=i.column,this.dragStartWidth=i.width}else this.dragColumn=t.column,this.dragStartWidth=t.bounds.width;this.dragStart=this.getMouseValue(t),this.dragColumn.properties.resizeColumnInPlace?(n+=1,(i=e.renderer.visibleColumns[n]||e.renderer.visibleColumns[n+1])?(this.nextColumn=i.column,this.nextStartWidth=this.nextColumn.getWidth()):this.nextColumn=void 0):this.nextColumn=void 0}else this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){this.dragColumn?(this.cursor=null,this.dragColumn=!1,t.primitiveEvent.stopPropagation(),e.behaviorShapeChanged()):this.next&&this.next.handleMouseUp(e,t)},handleMouseMove:function(e,t){this.dragColumn||(this.cursor=null,this.next&&this.next.handleMouseMove(e,t),this.cursor=t.isHeaderRow&&this.overAreaDivider(e,t)?this.getCursorName():null)},handleDoubleClick:function(e,t){if(t.isHeaderRow&&this.overAreaDivider(e,t)){var n=t.mousePoint.x<=3?e.behavior.getActiveColumn(t.gridCell.x-1):t.column;n.addProperties({columnAutosizing:!0,columnAutosized:!1}),setTimeout(function(){e.autosizeColumn(n)})}else this.next&&this.next.handleDoubleClick(e,t)}});e.exports=i},function(e,t,n){"use strict";var i=n(0).extend("ColumnSelection",{currentDrag:null,lastDragColumn:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(e,t){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(e,t)},handleDoubleClick:function(e,t){this.doubleClickTimer&&(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0),this.next&&this.next.handleDoubleClick(e,t)},handleMouseDown:function(e,t){this.doubleClickTimer||(e.properties.columnSelection&&!t.primitiveEvent.detail.isRightClick&&(e.properties.autoSelectColumns||t.isHeaderCell&&t.mousePoint.y>=5)?this.doubleClickTimer=setTimeout(function(e,t){this.doubleClickTimer=void 0,this.dragging=!0,this.extendSelection(e,t.gridCell.x,t.primitiveEvent.detail.keys)}.bind(this,e,t),function(e,t){var n;return t.isHeaderCell&&!(n=t.columnProperties).unsortable&&n.sortOnDoubleClick&&300}.call(this,e,t)):this.next&&this.next.handleMouseDown(e,t))},handleMouseDrag:function(e,t){e.properties.columnSelection&&!this.isColumnDragging(e)&&!t.primitiveEvent.detail.isRightClick&&this.dragging?(this.lastDragColumn=t.gridCell.x,this.currentDrag=t.primitiveEvent.detail.mouse,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,this.lastDragColumn,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var n=t.detail,i="column"===e.getLastSelectionType()&&this["handle"+n.char];i?i.call(this,e,n):this.next&&this.next.handleKeyDown(e,t)},handleMouseDragCellSelection:function(e,t,n){var i=e.getMouseDown().x;e.clearMostRecentColumnSelection(),e.selectColumn(i,t),e.setDragExtent(e.newPoint(t-i,0)),e.repaint()},checkDragScroll:function(e,t){e.properties.scrollingEnabled&&e.getDataBounds().contains(t)?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))},scrollDrag:function(e){if(e.isScrollingNow()){var t,n=e.getDataBounds();this.currentDrag.x<n.origin.x?t=-1:this.currentDrag.x>n.origin.x+n.extent.x&&(t=1),t&&(this.lastDragColumn>=e.getFixedColumnCount()&&(this.lastDragColumn+=t),e.scrollBy(t,0)),this.handleMouseDragCellSelection(e,this.lastDragColumn,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,n){if(e.abortEditing()){var i=e.getMouseDown().x,r=n.indexOf("SHIFT")>0;t<0||(r?(e.clearMostRecentColumnSelection(),e.selectColumn(t,i),e.setDragExtent(e.newPoint(t-i,0))):(e.toggleSelectColumn(t,n),e.setMouseDown(e.newPoint(t,0)),e.setDragExtent(e.newPoint(0,0))),e.repaint())}},handleDOWNSHIFT:function(e){},handleUPSHIFT:function(e){},handleLEFTSHIFT:function(e){this.moveShiftSelect(e,-1)},handleRIGHTSHIFT:function(e){this.moveShiftSelect(e,1)},handleDOWN:function(e){},handleUP:function(e){},handleLEFT:function(e){this.moveSingleSelect(e,-1)},handleRIGHT:function(e){this.moveSingleSelect(e,1)},getAutoScrollAcceleration:function(){var e=this.getAutoScrollDuration()/2e3;return Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){Date.now()-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t){var n=e.getMouseDown(),i=e.getDragExtent().x+t,r=e.renderer.visibleColumns.length-1,o=e.getColumnCount()-1;e.properties.scrollingEnabled||(o=Math.min(o,r)),i=Math.min(o-n.x,Math.max(-n.x,i)),e.clearMostRecentColumnSelection(),e.selectColumn(n.x,n.x+i),e.setDragExtent(e.newPoint(i,0)),e.insureModelColIsVisible(i+n.x,t)&&this.pingAutoScroll(),e.repaint()},moveSingleSelect:function(e,t){var n=e.getDragExtent(),i=e.getMouseDown().plus(n).x+t,r=e.getColumnCount()-1,o=e.getVisibleColumnsCount()-1;e.properties.scrollingEnabled||(r=Math.min(r,o)),i=Math.min(r,Math.max(0,i)),e.clearSelections(),e.selectColumn(i),e.setMouseDown(e.newPoint(i,0)),e.setDragExtent(e.newPoint(0,0)),e.insureModelColIsVisible(i,t)&&this.pingAutoScroll(),e.repaint()},isColumnDragging:function(e){var t=e.lookupFeature("ColumnMoving");return t&&(t.dragging||t.dragArmed)}});e.exports=i},function(e,t,n){"use strict";var i=n(0).extend("ColumnSorting",{handleClick:function(e,t){r.call(this,e,t)},handleDoubleClick:function(e,t){r.call(this,e,t,!0)},handleMouseMove:function(e,t){var n;t.isRowFixed&&t.isHeaderCell&&(n=e.behavior.getColumnProperties(t.gridCell.x))&&!n.unsortable?this.cursor="pointer":this.cursor=null,this.next&&this.next.handleMouseMove(e,t)}});function r(e,t,n){var i;!t.isHeaderCell||(i=t.columnProperties).unsortable||i.sortOnDoubleClick^n||e.fireSyntheticColumnSortEvent(t.gridCell.x,t.primitiveEvent.detail.keys),this.next&&this.next[n?"handleDoubleClick":"handleClick"](e,t)}e.exports=i},function(e,t,n){"use strict";var i=n(0).extend("Filters",{handleKeyDown:function(e,t){var n,i,r=t.detail;r.editor&&(n=r.editor.event).isFilterCell&&(i=this["handle"+n.properties.mappedNavKey(r.char)]),i?i.call(this,e,r):this.next&&this.next.handleKeyDown(e,t)},handleLEFT:function(e,t){r(e,t,-1)},handleRIGHT:function(e,t){r(e,t,1)},handleUP:o,handleDOWN:o,handleDoubleClick:function(e,t){t.isFilterCell?e.onEditorActivate(t):this.next&&this.next.handleDoubleClick(e,t)},handleClick:function(e,t){t.isFilterCell?e.onEditorActivate(t):this.next&&this.next.handleClick(e,t)}});function r(e,t,n){var i=t.editor.event,r=i.visibleColumn.index,s=i.visibleRow.index,a=r,l=e.renderer.visibleColumns.length;for(i=new e.behavior.CellEvent;(r=(r+n+l)%l)!==a&&i.resetGridXY(r,s);)if(i.properties.filterable)return void e.editAt(i);o(e,i)}function o(e,t){var n=t.editor.event.visibleColumn.index;e.selectViewportCell(n,0),e.takeFocus()}e.exports=i},function(e,t,n){"use strict";var i={PAGEDOWN:function(e){e.pageDown()},PAGEUP:function(e){e.pageUp()},PAGELEFT:function(e){e.pageLeft()},PAGERIGHT:function(e){e.pageRight()}},r=n(0).extend("KeyPaging",{handleKeyDown:function(e,t){var n=i[t.detail.char];n?n(e):this.next&&this.next.handleKeyDown(e,t)}});e.exports=r},function(e,t,n){"use strict";var i=n(0).extend("OnHover",{handleMouseMove:function(e,t){var n=e.hoverCell;t.gridCell.equals(n)?this.next&&this.next.handleMouseMove(e,t):(n&&this.handleMouseExit(e,n),this.handleMouseEnter(e,t),e.setHoverCell(t))}});e.exports=i},function(e,t,n){"use strict";var i=n(0).extend("RowSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,dragArmed:!1,handleMouseUp:function(e,t){this.dragArmed?(this.dragArmed=!1,r(e),e.fireSyntheticRowSelectionChangedEvent()):this.dragging?(this.dragging=!1,r(e),e.fireSyntheticRowSelectionChangedEvent()):this.next&&this.next.handleMouseUp(e,t)},handleMouseDown:function(e,t){var n=!t.primitiveEvent.detail.isRightClick,i=n&&e.properties.showRowNumbers&&t.isHandleColumn&&t.mousePointInClickRect;if(!i||e.fireSyntheticRowHeaderClickedEvent(t)){var r=e.properties.rowSelection&&(n&&e.properties.autoSelectRows||i);r&&t.isHeaderHandle?e.toggleSelectAllRows():r&&t.isDataRow?(this.dragArmed=!0,this.extendSelection(e,t.dataCell.y,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDown(e,t)}},handleMouseDrag:function(e,t){this.dragArmed&&e.properties.rowSelection&&!t.primitiveEvent.detail.isRightClick?(this.lastDragRow=t.dataCell.y,this.dragging=!0,this.currentDrag=t.primitiveEvent.detail.mouse,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,this.lastDragRow,t.primitiveEvent.detail.keys)):this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var n;"row"===e.getLastSelectionType()&&(n=this["handle"+t.detail.char])?n.call(this,e,t.detail):this.next&&this.next.handleKeyDown(e,t)},handleMouseDragCellSelection:function(e,t,n){var i=e.getMouseDown().y;e.clearMostRecentRowSelection(),e.selectRow(i,t),e.setDragExtent(e.newPoint(0,t-i)),e.repaint()},checkDragScroll:function(e,t){e.properties.scrollingEnabled&&e.getDataBounds().contains(t)?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))},scrollDrag:function(e){if(e.isScrollingNow()){var t,n=e.getDataBounds();this.currentDrag.y<n.origin.y?t=-1:this.currentDrag.y>n.origin.y+n.extent.y&&(t=1),t&&(this.lastDragRow>=e.getFixedRowCount()&&(this.lastDragRow+=t),e.scrollBy(0,t)),this.handleMouseDragCellSelection(e,this.lastDragRow,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,n){if(e.abortEditing()){var i=e.getMouseDown().y,r=-1!==n.indexOf("SHIFT");t<0||(r?(e.clearMostRecentRowSelection(),e.selectRow(t,i),e.setDragExtent(e.newPoint(0,t-i))):(e.toggleSelectRow(t,n),e.setMouseDown(e.newPoint(0,t)),e.setDragExtent(e.newPoint(0,0))),e.repaint())}},handleDOWNSHIFT:function(e){this.moveShiftSelect(e,1)},handleUPSHIFT:function(e){this.moveShiftSelect(e,-1)},handleLEFTSHIFT:function(e){},handleRIGHTSHIFT:function(e){},handleDOWN:function(e){this.moveSingleSelect(e,1)},handleUP:function(e){this.moveSingleSelect(e,-1)},handleLEFT:function(e){},handleRIGHT:function(e){var t=e.getMouseDown().plus(e.getDragExtent()),n=e.getColumnCount()-1,i=e.getHScrollValue(),r=t.y;i=Math.min(n,i),e.clearSelections(),e.select(i,r,0,0),e.setMouseDown(e.newPoint(i,r)),e.setDragExtent(e.newPoint(0,0)),e.repaint()},getAutoScrollAcceleration:function(){var e=this.getAutoScrollDuration()/2e3;return Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){Date.now()-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t){this.moveSingleSelect(e,t,!0)},moveSingleSelect:function(e,t,n){var i=e.selectionModel.rowSelectionModel.selection,o=i[i.length-1],s=o[0],a=o[1];if(n){var l=o.offsetY=o.offsetY||t;o.offsetY<0?s+=t:a+=t}else s+=t,a+=t;s<0||a>=e.getRowCount()||(i.length-=1,i.length&&delete(o=i[i.length-1]).offsetY,e.selectRow(s,a),n&&s!==a&&((o=i[i.length-1]).offsetY=l),e.setMouseDown(e.newPoint(0,s)),e.setDragExtent(e.newPoint(0,a-s)),e.scrollToMakeVisible(e.properties.fixedColumnCount,t<0?s:a+1),r(e),e.fireSyntheticRowSelectionChangedEvent(),e.repaint())},isSingleRowSelection:function(){return!0}});function r(e){var t;if(e.properties.collapseCellSelections&&e.properties.singleRowSelectionMode&&!e.properties.multipleSelections&&(t=e.getSelectedRows()).length&&e.selectionModel.getSelections().length){var n=e.selectionModel.getLastSelection(),i=n.left,r=t[0],o=n.right-i;e.selectionModel.select(i,r,o,0,!1),e.repaint()}}e.exports=i},function(e,t,n){"use strict";var i=n(0).extend("ThumbwheelScrolling",{handleWheelMoved:function(e,t){if(e.properties.scrollingEnabled){var n=t.primitiveEvent,i=Math.sign(n.wheelDeltaX||-n.deltaX),r=Math.sign(n.wheelDeltaY||-n.deltaY);(i||r)&&e.scrollBy(-i||0,-r||0)}}});e.exports=i},function(e,t,n){"use strict";t.mixin={getCellOwnProperties:function(e,t,n){return 1===arguments.length?e.column.getCellOwnProperties(e.dataCell.y,e.subgrid):this.getColumn(e).getCellOwnProperties(t,n)},getCellProperties:function(e,t,n){return 1===arguments.length?e.properties:this.getColumn(e).getCellProperties(t,n)},getCellProperty:function(e,t,n,i){return"object"==typeof e?(n=t,e.properties[n]):this.getColumn(e).getCellProperty(t,n,i)},setCellProperties:function(e,t,n,i){return"object"==typeof e?(n=t,e.column.setCellProperties(e.dataCell.y,n,e.subgrid)):this.getColumn(e).setCellProperties(t,n,i)},addCellProperties:function(e,t,n,i){return"object"==typeof e?(n=t,e.column.addCellProperties(e.dataCell.y,n,e.subgrid)):this.getColumn(e).addCellProperties(t,n,i)},setCellProperty:function(e,t,n,i,r){var o;return"object"==typeof e?(i=n,n=t,o=e.setCellProperty(n,i)):(o=this.getColumn(e).setCellProperty(t,n,i,r),this.grid.renderer.resetCellPropertiesCache(e,t,r)),o}}},function(e,t,n){"use strict";t.mixin={getSchema:function(){return this.dataModel.getSchema()},setSchema:function(e){this.dataModel.setSchema(e)},getRowCount:function(){return this.dataModel.getRowCount()},getValue:function(e,t,n){if(n)return n.getValue(e,t);var i=new this.CellEvent;return i.resetDataXY(e,t,n)?i.value:void 0},setValue:function(e,t,n,i){if(i)i.setValue(e,t,n);else{var r=new this.CellEvent;r.resetDataXY(e,t,i)&&(r.value=n)}},reindex:function(){this.dataModel.apply()},getRow:function(e){return this.dataModel.getRow(e)},getData:function(){return this.dataModel.getData()}}},function(e,t,n){"use strict";var i=n(79);function r(e){var t;switch(typeof e){case"string":t=i.get(e);break;case"function":t=e;break;default:throw new this.HypergridError("Expected subgrid ref to be registered name or constructor, but found "+typeof e+".")}return t}t.mixin={set subgrids(e){var t=this._subgrids=[];t.lookup={},e.forEach(function(e){e&&t.push(this.createSubgrid(e))},this),this.shapeChanged()},get subgrids(){return this._subgrids},createSubgrid:function(e,t){var n,i,o;"data"===e?n=this.dataModel:e instanceof Array&&e.length?(i=r.call(this,e[0]),o=e.slice(1),n=this.createApply(i,o,void 0,{grid:this.grid}),n=this.decorateDataModel(n)):"object"==typeof e?n=e:(i=r.call(this,e),o=Array.prototype.slice.call(arguments,1),n=this.createApply(i,o,void 0,{grid:this.grid}),n=this.decorateDataModel(n)),n.type||(n.type="data");var s="data"===n.type&&n.type||n.name||n.type;return this._subgrids.lookup[s]=this._subgrids.lookup[s]||n,n["is"+n.type[0].toUpperCase()+n.type.substr(1)]=!0,n},getHeaderRowCount:function(){var e=0;return this.subgrids.find(function(t){if(t.isData)return!0;e+=t.getRowCount()}),e},getFooterRowCount:function(){var e;return this.subgrids.reduce(function(t,n){return e&&!n.isData?t+=n.getRowCount():e=n.isData,t},0)},getLogicalRowCount:function(){return this.subgrids.reduce(function(e,t){return e+t.getRowCount()},0)}}},function(e,t,n){"use strict";var i=n(11).extend("DataModels",{BaseClass:n(12),initialize:function(){this.add(n(80))}});e.exports=new i},function(e,t,n){"use strict";var i=n(12).extend("HeaderSubgrid",{type:"header",initialize:function(e,t){this.grid=t.grid},getRowCount:function(){return this.grid.properties.showHeaderRow?1:0},getValue:function(e,t){var n=this.grid.behavior.getColumn(e);return n.header||n.name},setValue:function(e,t,n){t<this.getRowCount()&&(this.grid.behavior.getColumn(e).header=n)},getRow:function(e){return this.dataRow}});e.exports=i},function(e,t,n){"use strict";var i=n(29),r=n(31),o=n(82),s=n(86),a=i.extend("Local",{initialize:function(e,t){this.setData(t)},get schema(){return this.dataModel.getSchema()},set schema(e){this.dataModel.setSchema(e)},dataModelEventHandlers:n(32).dataModelEventHandlers,createColumns:function(){this.super.createColumns.call(this,l)},createDataRowProxy:function(){var e=this.dataModel,t={};Object.defineProperty(t,"$y$",{enumerable:!1,writable:!0}),this.schema.forEach(function(n,i){Object.defineProperty(t,n.name,{enumerable:!0,get:function(){return e.getValue(i,this.$y$)},set:function(t){return e.setValue(i,this.$y$,t)}})}),e.$rowProxy$=t},getNewDataModel:function(e){var t;return(e=e||{}).dataModel?t=e.dataModel:[].concat(e.DataModel||r).forEach(function(e){t=new e(t)}),t},resetDataModel:function(e){var t=this.getNewDataModel(e),n=t&&t!==this.dataModel;return n&&(this.dataModel=this.decorateDataModel(t,e),o.addDeprecationWarnings.call(this),o.addFriendlierDrillDownMapKeys.call(this)),n},decorateDataModel:function(e,t){return o.injectPolyfills(e),o.injectCode(e),o.injectDefaulthooks(e),e.setMetadataStore(t&&t.metadata),this.boundDispatchEvent=this.boundDispatchEvent||s.bind(this.grid),e.addListener(this.boundDispatchEvent),e},get charMap(){return this.dataModel.drillDownCharMap},cellClicked:function(e){return this.dataModel.toggleRow(e.dataCell.y,e.dataCell.x)},hasTreeColumn:function(){return this.dataModel.isTree()&&this.grid.properties.showTreeColumn}});function l(){this.schema.forEach(function(e){this.addColumn(e)},this),this.columnEnumSynchronize()}a.prototype.mixIn(n(33).mixin),a.prototype.mixIn.call(a,n(33).mixInShared),e.exports=a},function(e,t,n){"use strict";var i=n(83),r=n(84),o=n(85),s={};var a={true:"OPEN",false:"CLOSE",null:"INDENT"};e.exports={injectPolyfills:function(e){Object.keys(o).forEach(function(t){e[t]||(e[t]=o[t])})},injectCode:function(e){e.install(r,{inject:!0})},addDeprecationWarnings:function(){var e=this.grid;Object.defineProperties(this.dataModel,{grid:{configurable:!0,enumerable:!1,get:function(){return s.grid||(console.warn("dataModel.grid has been deprecated as of v3.0.0. (Will be removed in a future release.) Data models should have no direct knowledge of or access to the grid. (If your data model needs to call grid methods, add a data event to your grid with `grid.addEventListener('fin-hypergrid-data-my-event', myHandler)` and trigger it from your data model with `this.dispatchEvent('fin-hypergrid-data-my-event')` or `this.dispatchEvent({ type: 'fin-hypergrid-data-my-event' })`. If you need access to the grid object from within a `getCell` or `getCellEditAt` override, define `grid` in the same closure as the override.)"),s.grid=!0),e}},dataSource:{configurable:!0,enumerable:!1,get:function(){return s.dataSource||(console.warn("dataModel.dataSource has been deprecated as of 3.0.0 in favor of `dataModel`. (Will be removed in a future release.) The _external_ data model, formerly `grid.behavior.dataModel.dataSource`, is now `grid.behavior.dataModel`."),s.dataSource=!0),this.dataModel}}})},addFriendlierDrillDownMapKeys:function(){var e=this.dataModel.drillDownCharMap;e&&Object.keys(a).forEach(function(t){if(t in e){var n=a[t];n in e||Object.defineProperty(e,n,{get:function(){return this[t]},set:function(e){this[t]=e}})}})},injectDefaulthooks:function(e){e.install(i,{inject:!0})}}},function(e,t,n){"use strict";t.getCell=function(e,t){return e.grid.cellRenderers.get(t)},t.getCellEditorAt=function(e,t,n,i){return i.grid.cellEditors.create(n,i)}},function(e,t,n){"use strict";e.exports={apply:function(){},isTree:function(){return!1},isTreeCol:function(e){return!1},toggleRow:function(e,t,n){},getColumnCount:function(){return this.getSchema().length},getRow:function(e){return this.$rowProxy$.$y$=e,this.$rowProxy$},getData:function(e){var t,n,i,r=this.getRowCount(),o=new Array(r);for(t=0;t<r;t++)(n=this.getRow(t))&&(o[t]=Object.assign({},n),e&&(i=this.getRowMetadata(t))&&(o[t][e]=i));return o},setData:function(e){},setValue:function(e,t,n){console.warn("dataModel.setValue("+e+", "+t+', "'+n+'") called but no implementation. Data not saved.')},setSchema:function(e){console.warn("dataModel.setSchema(schema) called but no implementation. Schema not updated.")},getRowIndex:function(e){return e},getRowMetadata:function(e,t){return this.metadata[e]||void 0!==t&&(this.metadata[e]=Object.create(t))},getMetadataStore:function(){return this.metadata},setRowMetadata:function(e,t){return t?this.metadata[e]=t:delete this.metadata[e],t},setMetadataStore:function(e){this.metadata=e||[]}}},function(e,t,n){"use strict";function i(){}e.exports={install:function(e){if(e){var t=Array.isArray(e);(t?e:Object.keys(e).filter(function(t){return"function"==typeof e[t]&&"constructor"!==t&&"initialize"!==t})).forEach(function(n){this[n]||(this[n]=t?i:e[n])},this)}},dispatchEvent:function(e){this.handlers&&this.handlers.forEach(function(t){t.call(this,e)},this)},addListener:function(e){this.handlers?this.handlers.indexOf(e)<0&&this.handlers.push(e):this.handlers=[e]},removeListener:function(e){if(this.handlers&&this.handlers.length){var t=this.handlers.indexOf(e);t>=0&&delete this.handlers[t]}},removeAllListeners:function(){this.handlers&&(this.handlers.length=0)}}},function(e,t,n){"use strict";var i=n(32),r=n(20),o=/^fin-hypergrid-(data|schema)(-[a-z]+)+$/;e.exports=function(e){var t;switch(typeof e){case"string":e={type:t=e};break;case"object":if("type"in e){t=e.type;break}default:throw new this.HypergridError("Expected data model event to be: (string | {type:string})")}if(!o.test(t))throw new this.HypergridError('Expected data model event type "'+t+'" to match '+o+".");var n=i[e.type];if(n)var s=n.call(this,e);return void 0!==s?s:r.call(this,e.type,e)}},function(e,t,n){"use strict";var i,r=n(11),o=r.extend("CellRenderers",{BaseClass:n(2),initialize:function(){this.add(n(34)),this.add(n(88)),this.add(n(89)),this.add(n(90)),this.add(n(91)),this.add(n(92)),this.add(n(93)),this.add(n(94)),this.add(n(95)),this.add("emptycell",this.BaseClass)},add:function(e,t){return 1===arguments.length?(t=e,r.prototype.add.call(this,new t)):r.prototype.add.call(this,e,new t)},get:function(e){if(e.map)return e.map(function(e){return r.prototype.get.call(this,e)},this);var t=r.prototype.get.call(this,e);return t===this.items.emptycell&&(i||(console.warn('grid.cellRenderers.get("'+e+'").constructor has been deprecated as of v2.1.0 in favor of grid.cellRenderers.BaseClass property. (Will be removed in a future release.)'),i=!0),this.BaseClass.constructor=this.BaseClass),t}});e.exports=new o},function(e,t,n){"use strict";var i=n(2),r=n(3).Rectangle,o=n(9),s=/\s\s+/g,a=i.extend("SimpleCell",{paint:function(e,t){var n,i,a,c,h,d,f,p,g,v,m,y,b,w,C,x,S=t.value,k=t.bounds,_=k.x,D=k.y,E=k.width,A=k.height,M=t.iconPadding,R=void 0===t.prefillColor,P=t.snapshot,O=P&&R,T=0;S&&S.constructor===Array?(h=S[0],d=S[2],(S=t.exec(S[1]))&&void 0!==S.naturalWidth&&(f=S,S=null)):(h=o[t.leftIcon],f=o[t.centerIcon],d=o[t.rightIcon]);var L=S||t.renderFalsy&&0==S;if(L?(S=t.formatValue(S,t),i=t.isSelected?t.foregroundSelectionFont:t.font,n=e.cache.strokeStyle=t.isSelected?t.foregroundSelectionColor:t.color):S="",O=O&&S===P.value&&i===P.textFont&&n===P.textColor,x=[],C=0,t.isCellHovered&&t.hoverCellHighlight.enabled?m=t.hoverCellHighlight.backgroundColor:t.isRowHovered&&(v=t.hoverRowHighlight).enabled?m=t.isDataColumn||!v.header||void 0===v.header.backgroundColor?v.backgroundColor:v.header.backgroundColor:t.isColumnHovered&&(v=t.hoverColumnHighlight).enabled&&(m=t.isDataRow||!v.header||void 0===v.header.backgroundColor?v.backgroundColor:v.header.backgroundColor),e.alpha(m)<1&&(t.isSelected&&(y=t.backgroundSelectionColor),e.alpha(y)<1&&((w=t.backgroundColor===t.prefillColor)||(b=!0,x.push(t.backgroundColor),O=O&&b===P.foundationColor&&t.backgroundColor===P.colors[C++])),void 0!==y&&(x.push(y),O=O&&y===P.colors[C++])),void 0!==m&&(x.push(m),O=O&&m===P.colors[C++]),!O||C!==P.colors.length){if(t.snapshot={value:S,textColor:n,textFont:i,foundationColor:b,colors:x},u(e,x,_,D,E,A,b),p=h?M+h.width+M:t.cellPadding,g=d?M+d.width+M:t.cellPadding,L&&(e.cache.fillStyle=n,e.cache.font=i,T=t.isHeaderRow&&t.headerTextWrapping?function(e,t,n,i,r){var o=t.bounds.x,a=t.bounds.y,u=t.bounds.width,c=t.bounds.height,h=(n+"").trim().replace(s," "),d=function e(t,n,i,r){if(1===i.length)return i;var o,s=[i.shift()];for(;(o=t.getTextWidth(s.join(" "))<r)&&i.length;)s.push(i.shift());!o&&s.length>1&&i.unshift(s.pop());s=[s.join(" ")];i.length&&(s=s.concat(e(t,n,i,r)));return s}(e,t,h.split(" "),u);if(1===d.length)return l(e,t,h,i,r);var f=i,p=t.voffset,g=t.halign,v=e.getTextHeight(t.font).height;switch(g){case"right":f=u-r;break;case"center":f=u/2}var m=Math.ceil(v/2);p+=Math.ceil((c-(d.length-1)*v)/2),f=Math.max(0,f),p=Math.max(m,p),e.cache.save(),e.beginPath(),e.rect(o,a,u,c),e.clip(),e.cache.textAlign=g,e.cache.textBaseline="middle";for(var y=0;y<d.length;y++)e.simpleText(d[y],o+f,a+p+y*v);return e.cache.restore(),u}(e,t,S,p,g):l(e,t,S,p,g)),f&&(c=Math.round((A-f.height)/2),a=E-Math.round((E-f.width)/2)-f.width,e.drawImage(f,_+a,D+c),T=M+f.width+M,"center"===t.hotIcon&&(t.clickRect=new r(a,c,f.width,f.height))),h&&(c=Math.round((A-h.height)/2),e.drawImage(h,_+M,D+c),"left"===t.hotIcon&&(t.clickRect=new r(M,c,h.width,h.height))),d){var I=_+(a=E-(d.width+M));w&&(b=!0,x.unshift(t.backgroundColor)),u(e,x,I,D,g,A,b),c=Math.round((A-d.height)/2),e.drawImage(d,I,D+c),"right"===t.hotIcon&&(t.clickRect=new r(a,c,d.width,d.height))}t.cellBorderThickness&&(e.beginPath(),e.rect(_,D,E,A),e.cache.lineWidth=t.cellBorderThickness,e.cache.strokeStyle=t.cellBorderStyle,e.stroke(),e.closePath()),t.minWidth=p+T+g}}});function l(e,t,n,i,r){var o,s,a=t.bounds.x,l=t.bounds.y,u=t.bounds.width,c=i,h=t.halign;if(t.columnAutosizing)switch(o=(s=e.getTextWidthTruncated(n,u-i,t.truncateTextWithEllipsis)).width,n=s.string||n,h){case"right":c=u-r-s.width;break;case"center":c=(u-s.width)/2}else if(o=0,void 0!==(s=e.getTextWidthTruncated(n,u-i,t.truncateTextWithEllipsis,!0)).string)n=s.string;else switch(h){case"right":c=u-r-s.width;break;case"center":c=(u-s.width)/2}return null!==n&&(a+=Math.max(i,c),l+=Math.floor(t.bounds.height/2),t.isUserDataArea&&(t.link&&(!t.isCellHovered&&t.linkOnHover||(t.linkColor&&(e.cache.strokeStyle=t.linkColor),e.beginPath(),function(e,t,n,i,r,o){var s=t.getTextHeight(e.font).height,a=t.getTextWidth(n);switch(t.cache.textAlign){case"center":i-=a/2;break;case"right":i-=a}r=Math.ceil(r)+Math.round(s/2)-.5,t.cache.lineWidth=o,t.moveTo(i,r),t.lineTo(i+a,r)}(t,e,n,a,l,1),e.stroke(),e.closePath()),!t.linkColor||!t.isCellHovered&&t.linkColorOnHover||(e.cache.fillStyle=t.linkColor)),!0===t.strikeThrough&&(e.beginPath(),function(e,t,n,i,r,o){var s=t.getTextWidth(n);switch(t.cache.textAlign){case"center":i-=s/2;break;case"right":i-=s}r=Math.round(r)+.5,t.cache.lineWidth=o,t.moveTo(i-1,r),t.lineTo(i+s+1,r)}(0,e,n,a,l,1),e.stroke(),e.closePath())),e.cache.textAlign="left",e.cache.textBaseline="middle",e.simpleText(n,a,l)),o}function u(e,t,n,i,r,o,s){for(var a=0;a<t.length;a++)s&&!a?e.clearFill(n,i,r,o,t[a]):(e.cache.fillStyle=t[a],e.fillRect(n,i,r,o))}e.exports=a},function(e,t,n){"use strict";var i=n(2).extend("Slider",{paint:function(e,t){var n=t.bounds.x,i=t.bounds.y,r=t.bounds.width,o=t.bounds.height;e.cache.strokeStyle="white";var s=t.value,a=o/2,l=r*s,u=t.isSelected?t.backgroundColor:"#333333",c=e.createLinearGradient(n,i,n,i+o);c.addColorStop(0,u),c.addColorStop(1,"#666666");var h=e.createLinearGradient(n,i,n,i+o);h.addColorStop(0,"#aaaaaa"),h.addColorStop(1,"#777777"),e.cache.fillStyle=c,this.roundRect(e,n,i,r,o,a,c),e.cache.fillStyle=s<1?h:"#eeeeee",e.beginPath(),e.arc(n+Math.max(l-a,a),i+a,a,0,2*Math.PI),e.fill(),e.closePath(),t.minWidth=100}});e.exports=i},function(e,t,n){"use strict";var i=n(2).extend("SparkBar",{paint:function(e,t){var n=t.bounds.x,i=t.bounds.y,r=t.bounds.width,o=t.bounds.height;e.beginPath();var s=t.value;if(s&&s.length){var a=s.length,l=r/a,u=t.isSelected?t.foregroundSelectionColor:t.color;(t.backgroundColor||t.isSelected)&&(e.cache.fillStyle=t.isSelected?"blue":t.backgroundColor,e.fillRect(n,i,r,o)),e.cache.fillStyle=u;for(var c=0;c<s.length;c++){var h=s[c]/110*o;e.fillRect(n+5,i+o-h,.6666*l,h),n+=l}e.closePath(),t.minWidth=10*a}}});e.exports=i},function(e,t,n){"use strict";var i=n(2).extend("LastSelection",{paint:function(e,t){var n=e.alpha(t.selectionRegionOverlayColor)>0,i=e.alpha(t.selectionRegionOutlineColor)>0;if(n||i){var r=t.bounds.x,o=t.bounds.y,s=t.bounds.width,a=t.bounds.height;e.beginPath(),e.rect(r,o,s,a),n&&(e.cache.fillStyle=t.selectionRegionOverlayColor,e.fill()),i&&(e.cache.lineWidth=1,e.cache.strokeStyle=t.selectionRegionOutlineColor,e.stroke()),e.closePath()}}});e.exports=i},function(e,t,n){"use strict";var i=n(2).extend("SparkLine",{paint:function(e,t){var n=t.bounds.x,i=t.bounds.y,r=t.bounds.width,o=t.bounds.height;e.beginPath();var s=t.value;if(s&&s.length){var a,l=s.length,u=r/l,c=t.isSelected?t.foregroundSelectionColor:t.color;(t.backgroundColor||t.isSelected)&&(e.cache.fillStyle=t.isSelected?t.backgroundSelectionColor:t.backgroundColor,e.fillRect(n,i,r,o)),e.cache.strokeStyle=c,e.cache.fillStyle=c,e.beginPath();for(var h=0;h<s.length;h++){var d=s[h]/110*o;a||(a=d),e.lineTo(n+5,i+o-d),e.arc(n+5,i+o-d,1,0,2*Math.PI,!1),n+=u}t.minWidth=10*l,e.stroke(),e.closePath()}}});e.exports=i},function(e,t,n){"use strict";var i=n(2).extend("ErrorCell",{paint:function(e,t,n){var i=t.bounds.x,r=t.bounds.y,o=t.bounds.height;e.cache.fillStyle="#FFD500",e.fill(),e.cache.fillStyle="#A00",e.cache.textAlign="start",e.cache.textBaseline="middle",e.cache.font='bold 6pt "arial narrow", verdana, geneva',e.fillText(n,i+4,r+o/2+.5)}});e.exports=i},function(e,t,n){"use strict";var i=n(2).extend("Tag",{paint:function(e,t){if(t.tagbands){var n=t.tagbands.find(function(e){return t.value>=e.floor}),i=n&&n.fillStyle;if(i){var r=t.bounds,o=r.x+r.width-1,s=r.y;e.beginPath(),e.moveTo(o,s),e.lineTo(o,s+8),e.lineTo(o-8,s),e.closePath(),e.cache.fillStyle=i,e.fill()}}}});e.exports=i},function(e,t,n){"use strict";var i=n(2).extend("TreeCell",{paint:function(e,t){var n=t.bounds.x,i=t.bounds.y,r=t.value.data,o=t.value.indent,s=t.value.icon;if((t.backgroundColor||t.isSelected)&&(e.cache.fillStyle=(t.isSelected,t.backgroundColor),e.fillRect(n,i,t.bounds.width,t.bounds.height)),r&&r.length){e.cache.fillStyle=(t.isSelected,t.backgroundColor);var a=Math.ceil(t.bounds.height/2);e.fillText(s+r,n+o,i+a),t.minWidth=n+o+e.getTextWidth(s+r)+10}}});e.exports=i},function(e,t,n){"use strict";var i,r=n(11),o=r.extend("CellEditors",{BaseClass:n(5),initialize:function(){this.add(n(97)),this.add(n(98)),this.add(n(99)),this.add(n(100)),this.add(n(101)),this.add(n(1))},get:function(e){if(e&&"celleditor"===e.toLowerCase())return i||(console.warn('grid.cellEditors.get("'+e+'") method call has been deprecated as of v2.1.0 in favor of grid.cellEditors.BaseClass property. (Will be removed in a future release.)'),i=!0),this.BaseClass;try{var t=r.prototype.get.call(this,e)}catch(e){}return t}});e.exports=new o},function(e,t,n){"use strict";var i=n(5).extend("Color",{template:'<input type="color" lang="{{locale}}" style="{{style}}">'});e.exports=i},function(e,t,n){"use strict";var i=n(5),r=window.chrome,o=window.navigator,s=o.vendor,a=o.userAgent.indexOf("OPR")>-1,l=o.userAgent.indexOf("Edge")>-1,u=!o.userAgent.match("CriOS")&&null!==r&&void 0!==r&&"Google Inc."===s&&0==a&&0==l,c=i.extend("Date",{initialize:function(e){var t;u?(t="chromeDate",this.template='<input type="date">'):(t="date",this.template='<input type="text" lang="{{locale}}">',this.selectAll=function(){var e=this.getEditorValue().length;this.input.setSelectionRange(0,e)}),this.localizer=e.localization.get(t)}});e.exports=c},function(e,t,n){"use strict";var i=n(1).extend("Number",{initialize:function(e){this.localizer=e.localization.get("number")}});e.exports=i},function(e,t,n){"use strict";var i=n(5).extend("Slider",{template:'<input type="range" lang="{{locale}}" style="{{style}}">'});e.exports=i},function(e,t,n){"use strict";var i=n(5).extend("Spinner",{template:'<input type="number" lang="{{locale}}" style="{{style}}">'});e.exports=i},function(e,t,n){"use strict";var i=n(103);function r(e){var t=this._bound={};Object.keys(a).forEach(function(e){t[e]=a[e].bind(this)},this);var n=this.thumb=document.createElement("div");n.classList.add("thumb"),n.onclick=t.shortStop,n.onmouseover=t.onmouseover,n.onmouseout=this._bound.onmouseout;var l=this.bar=document.createElement("div");l.classList.add("finbar-vertical"),l.onmousedown=this._bound.onmousedown,this.paging&&(l.onclick=t.onclick),l.appendChild(n),e=e||{},this.orientation="vertical",this._min=this._index=0,this._max=100,Object.keys(e).forEach(function(t){var n=e[t];if(void 0!==n)switch(t){case"index":this._index=n;break;case"range":o(n),this._min=n.min,this._max=n.max,this.contentSize=n.max-n.min+1;break;default:"_"!==t.charAt(0)&&"function"!=typeof r.prototype[t]&&(this[t]=n)}},this),i(s,"finbar-base",e.cssStylesheetReferenceElement)}function o(e){2===Object.keys(e).length&&"number"==typeof e.min&&"number"==typeof e.max&&e.min<=e.max||c("Invalid .range object.")}r.prototype={set orientation(e){e!==this._orientation&&(this._orientation=e,this.oh=l[this._orientation],this.oh||c("Invalid value for `options._orientation."),this.deltaProp=this.oh.delta,this.bar.className=this.bar.className.replace(/(vertical|horizontal)/g,e),(this.bar.style.cssText||this.thumb.style.cssText)&&(this.bar.removeAttribute("style"),this.thumb.removeAttribute("style"),this.resize()))},get orientation(){return this._orientation},onchange:null,set classPrefix(e){this._classPrefix&&this.bar.classList.remove(this._classPrefix+this.orientation),this._classPrefix=e,e&&this.bar.classList.add(e+"-"+this.orientation)},get classPrefix(){return this._classPrefix},increment:1,deltaXFactor:1,deltaYFactor:1,deltaZFactor:1,barStyles:null,set style(e){var t=Object.keys(e=function(e){for(var t=1;t<arguments.length;++t){var n=arguments[t];if(n)for(var i in n)e[i]=n[i]}return e}({},e,this._auxStyles));if(t.length){var n=this.bar,i=n.getBoundingClientRect(),r=(this.container||n.parentElement).getBoundingClientRect(),o=this.oh;n.removeAttribute("style"),t.forEach(function(t){var s=e[t];if(t in o&&(t=o[t]),isNaN(Number(s))){if(/%$/.test(s)){var a=u[t],l=i[a.marginLeading]+i[a.marginTrailing];l&&(s=parseInt(s,10)/100*r[a.size]-l+"px")}}else s=(s||0)+"px";n.style[t]=s})}},paging:!0,set range(e){o(e),this._min=e.min,this._max=e.max,this.contentSize=e.max-e.min+1,this.index=this.index},get range(){return{min:this._min,max:this._max}},set index(e){e=Math.min(this._max,Math.max(this._min,e)),this._setScroll(e)},get index(){return this._index},_setScroll:function(e,t){this._index=e,this.testPanelItem&&this.testPanelItem.index instanceof Element&&(this.testPanelItem.index.innerHTML=Math.round(e)),this.onchange&&this.onchange.call(this,Math.round(e)),void 0===t&&(t=(e-this._min)/(this._max-this._min)*this._thumbMax),this.thumb.style[this.oh.leading]=t+"px"},scrollRealContent:function(e){var t=this.content.parentElement.getBoundingClientRect(),n=this.oh.size,i=Math.max(0,this.content[n]-t[n]),r=(e-this._min)/(this._max-this._min)*i;this.content.style[this.oh.leading]=-r+"px"},resize:function(e,t){var n=this.bar;if(n.parentNode){var i=this.container||n.parentElement,r=i.getBoundingClientRect();"object"==typeof e&&(t=e,e=void 0),this.style=this.barStyles=t||this.barStyles,this.content&&(this.onchange||(this.onchange=this.scrollRealContent,this.contentSize=this.content[this.oh.size],this._min=0,this._max=this.contentSize-1)),this.onchange===this.scrollRealContent?(this.containerSize=r[this.oh.size],this.increment=this.containerSize/(this.contentSize-this.containerSize)*(this._max-this._min)):(this.containerSize=1,this.increment=e||this.increment);var o=this.index;return this.testPanelItem=this.testPanelItem||this._addTestPanelItem(),this._setThumbSize(),this.index=o,null!==this.deltaProp&&i.addEventListener("wheel",this._bound.onwheel),this}},shortenBy:function(e){return this.shortenEndBy("trailing",e)},foreshortenBy:function(e){return this.shortenEndBy("leading",e)},shortenEndBy:function(e,t){if(t){if(t instanceof r&&t.orientation!==this.orientation){var n=window.getComputedStyle(t.bar),i=l[t.orientation];this._auxStyles={},this._auxStyles[e]=n[i.thickness]}}else delete this._auxStyles;return this},_setThumbSize:function(){var e=this.oh,t=window.getComputedStyle(this.thumb),n=parseInt(t[e.marginLeading]),i=n+parseInt(t[e.marginTrailing]),r=this.bar.getBoundingClientRect()[e.size],o=Math.max(20,r*this.containerSize/this.contentSize);this.containerSize<this.contentSize?(this.bar.style.visibility="visible",this.thumb.style[e.size]=o+"px"):this.bar.style.visibility="hidden",this._thumbMax=r-o-i,this._thumbMarginLeading=n},remove:function(){this.bar.onmousedown=null,this._removeEvt("mousemove"),this._removeEvt("mouseup"),(this.container||this.bar.parentElement)._removeEvt("wheel",this._bound.onwheel),this.bar.onclick=this.thumb.onclick=this.thumb.onmouseover=this.thumb.transitionend=this.thumb.onmouseout=null,this.bar.remove()},_addTestPanelItem:function(){var e,t=document.querySelector("."+this._classPrefix+".test-panel")||document.querySelector(".test-panel");if(t){var n=["mousedown","mousemove","mouseup","index"],i=document.createElement("li");n.forEach(function(e){i.innerHTML+='<span class="'+e+'">'+e.replace("mouse","")+"</span>"}),t.appendChild(i),e={},n.forEach(function(t){e[t]=i.getElementsByClassName(t)[0]})}return e},_addEvt:function(e){var t=this.testPanelItem&&this.testPanelItem[e];t&&t.classList.add("listening"),window.addEventListener(e,this._bound["on"+e])},_removeEvt:function(e){var t=this.testPanelItem&&this.testPanelItem[e];t&&t.classList.remove("listening"),window.removeEventListener(e,this._bound["on"+e])}};var s,a={shortStop:function(e){e.stopPropagation()},onwheel:function(e){this.index+=e[this.deltaProp]*this[this.deltaProp+"Factor"],e.stopPropagation(),e.preventDefault()},onclick:function(e){var t=this.thumb.getBoundingClientRect(),n=e[this.oh.coordinate]<t[this.oh.leading];"object"==typeof this.paging?this.index=this.paging[n?"up":"down"](Math.round(this.index)):this.index+=n?-this.increment:this.increment,this.thumb.classList.add("hover");var i=this;this.thumb.addEventListener("transitionend",function t(){this.removeEventListener("transitionend",t),i._bound.onmouseup(e)}),e.stopPropagation()},onmouseover:function(){this.thumb.classList.add("hover")},onmouseout:function(){this.thumb.classList.remove("hover")},onmousedown:function(e){var t=this.thumb.getBoundingClientRect();this.pinOffset=e[this.oh.axis]-t[this.oh.leading]+this.bar.getBoundingClientRect()[this.oh.leading]+this._thumbMarginLeading,document.documentElement.style.cursor="default",this._addEvt("mousemove"),this._addEvt("mouseup"),e.stopPropagation(),e.preventDefault()},onmousemove:function(e){var t=Math.min(this._thumbMax,Math.max(0,e[this.oh.axis]-this.pinOffset)),n=t/this._thumbMax*(this._max-this._min)+this._min;this._setScroll(n,t),e.stopPropagation(),e.preventDefault()},onmouseup:function(e){this._removeEvt("mousemove"),this._removeEvt("mouseup"),document.documentElement.style.cursor="auto";var t=this.thumb.getBoundingClientRect();t.left<=e.clientX&&e.clientX<=t.right&&t.top<=e.clientY&&e.clientY<=t.bottom?this._bound.onmouseover(e):this._bound.onmouseout(e),e.stopPropagation(),e.preventDefault()}},l={vertical:{coordinate:"clientY",axis:"pageY",size:"height",outside:"right",inside:"left",leading:"top",trailing:"bottom",marginLeading:"marginTop",marginTrailing:"marginBottom",thickness:"width",delta:"deltaY"},horizontal:{coordinate:"clientX",axis:"pageX",size:"width",outside:"bottom",inside:"top",leading:"left",trailing:"right",marginLeading:"marginLeft",marginTrailing:"marginRight",thickness:"height",delta:"deltaX"}},u={top:"vertical",bottom:"vertical",height:"vertical",left:"horizontal",right:"horizontal",width:"horizontal"};function c(e){throw"finbars: "+e}s="div.finbar-horizontal,div.finbar-vertical{position:absolute;margin:3px}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{position:absolute;background-color:#d3d3d3;-webkit-box-shadow:0 0 1px #000;-moz-box-shadow:0 0 1px #000;box-shadow:0 0 1px #000;border-radius:4px;margin:2px;opacity:.4;transition:opacity .5s}div.finbar-horizontal>.thumb.hover,div.finbar-vertical>.thumb.hover{opacity:1;transition:opacity .5s}div.finbar-vertical{top:0;bottom:0;right:0;width:11px}div.finbar-vertical>.thumb{top:0;right:0;width:7px}div.finbar-horizontal{left:0;right:0;bottom:0;height:11px}div.finbar-horizontal>.thumb{left:0;bottom:0;height:7px}",e.exports=r},function(e,t,n){"use strict";function i(e,t,n){if("string"==typeof n){if(!(n=document.querySelector(n)))throw"Cannot find reference element for CSS injection."}else if(n&&!(n instanceof Element))throw"Given value not a reference element.";var r=n&&n.parentNode||document.head||document.getElementsByTagName("head")[0];if(!t||(t=i.idPrefix+t,!r.querySelector("#"+t))){var o=document.createElement("style");return o.type="text/css",t&&(o.id=t),e instanceof Array&&(e=e.join("\n")),e="\n"+e+"\n",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),void 0===n&&(n=r.firstChild),r.insertBefore(o,n),o}}i.idPrefix="injected-stylesheet-",e.exports=i},function(e,t,n){var i,r,o;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(n,s){"object"==typeof t&&t&&"string"!=typeof t.nodeName?s(t):(r=[t],void 0===(o="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=o))}(0,function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var s=RegExp.prototype.test;var a=/\S/;function l(e){return!function(e,t){return s.call(e,t)}(a,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,h=/\s+/,d=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function g(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.cache={}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},g.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var r,s,a=this,l=!1;a;){if(e.indexOf(".")>0)for(t=a.view,r=e.split("."),s=0;null!=t&&s<r.length;)s===r.length-1&&(l=o(t,r[s])),t=t[r[s++]];else t=a.view[e],l=o(a.view,e);if(l)break;a=a.parent}n[e]=t}return i(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(t,i){var o=this.cache,s=o[t];return null==s&&(s=o[t]=function(t,i){if(!t)return[];var o,s,a,u=[],v=[],m=[],y=!1,b=!1;function w(){if(y&&!b)for(;m.length;)delete v[m.pop()];else m=[];y=!1,b=!1}function C(e){if("string"==typeof e&&(e=e.split(h,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),s=new RegExp("\\s*"+r(e[1])),a=new RegExp("\\s*"+r("}"+e[1]))}C(i||e.tags);for(var x,S,k,_,D,E,A=new g(t);!A.eos();){if(x=A.pos,k=A.scanUntil(o))for(var M=0,R=k.length;M<R;++M)l(_=k.charAt(M))?m.push(v.length):b=!0,v.push(["text",_,x,x+1]),x+=1,"\n"===_&&w();if(!A.scan(o))break;if(y=!0,S=A.scan(p)||"name",A.scan(c),"="===S?(k=A.scanUntil(d),A.scan(d),A.scanUntil(s)):"{"===S?(k=A.scanUntil(a),A.scan(f),A.scanUntil(s),S="&"):k=A.scanUntil(s),!A.scan(s))throw new Error("Unclosed tag at "+A.pos);if(D=[S,k,x,A.pos],v.push(D),"#"===S||"^"===S)u.push(D);else if("/"===S){if(!(E=u.pop()))throw new Error('Unopened section "'+k+'" at '+x);if(E[1]!==k)throw new Error('Unclosed section "'+E[1]+'" at '+x)}else"name"===S||"{"===S||"&"===S?b=!0:"="===S&&C(k)}if(E=u.pop())throw new Error('Unclosed section "'+E[1]+'" at '+A.pos);return function(e){for(var t,n=[],i=n,r=[],o=0,s=e.length;o<s;++o)switch((t=e[o])[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":r.pop()[5]=t[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],r=0,o=e.length;r<o;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(v))}(t,i)),s},m.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof v?t:new v(t);return this.renderTokens(i,r,n,e)},m.prototype.renderTokens=function(e,t,n,i){for(var r,o,s,a="",l=0,u=e.length;l<u;++l)s=void 0,"#"===(o=(r=e[l])[0])?s=this.renderSection(r,t,n,i):"^"===o?s=this.renderInverted(r,t,n,i):">"===o?s=this.renderPartial(r,t,n,i):"&"===o?s=this.unescapedValue(r,t):"name"===o?s=this.escapedValue(r,t):"text"===o&&(s=this.rawValue(r)),void 0!==s&&(a+=s);return a},m.prototype.renderSection=function(e,t,r,o){var s=this,a="",l=t.lookup(e[1]);if(l){if(n(l))for(var u=0,c=l.length;u<c;++u)a+=this.renderTokens(e[4],t.push(l[u]),r,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(e[4],t.push(l),r,o);else if(i(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,o.slice(e[3],e[5]),function(e){return s.render(e,t,r)}))&&(a+=l)}else a+=this.renderTokens(e[4],t,r,o);return a}},m.prototype.renderInverted=function(e,t,i,r){var o=t.lookup(e[1]);if(!o||n(o)&&0===o.length)return this.renderTokens(e[4],t,i,r)},m.prototype.renderPartial=function(e,t,n){if(n){var r=i(n)?n(e[1]):n[e[1]];return null!=r?this.renderTokens(this.parse(r),t,n,r):void 0}},m.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},m.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},m.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.2",e.tags=["{{","}}"];var y=new m;return e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return n(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(e,t,i)},e.to_html=function(t,n,r,o){var s=e.render(t,n,r);if(!i(o))return s;o(s)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return u[e]})},e.Scanner=g,e.Context=v,e.Writer=m,e})},function(e,t,n){"use strict";var i=n(20),r=n(34);t.mixin={addEventListener:function(e,t,n){var i=this,r=this.listeners[e]=this.listeners[e]||[];if(!r.find(function(e){return e.listener===t})){var o={internal:n,listener:t,decorator:function(e){i.allowEventHandlers&&t(e)}};r.push(o),this.canvas.addEventListener(e,o.decorator)}},addInternalEventListener:function(e,t){this.addEventListener(e,t,!0)},removeEventListener:function(e,t){var n=this.listeners[e];n&&n.find(function(i,r){if(i.listener===t)return 1===n.length?delete this.listeners[e]:n.splice(r,1),this.canvas.removeEventListener(e,i.decorator),!0},this)},removeAllEventListeners:function(e){Object.keys(this.listeners).forEach(function(t){this.listeners[t].slice().forEach(function(n){!e&&n.internal||this.removeEventListener(t,n.listener)},this)},this)},allowEvents:function(e){this.allowEventHandlers=!!e,this.behavior.featureChain&&(e?this.behavior.featureChain.attachChain():this.behavior.featureChain.detachChain()),this.behavior.changed()},fireSyntheticColumnSortEvent:function(e,t){return i.call(this,"fin-column-sort",{column:e,keys:t})},fireSyntheticEditorKeyUpEvent:function(e,t){return i.call(this,"fin-editor-keyup",{input:e,keyEvent:t,char:this.canvas.getKeyChar(t),legacyChar:t.legacyKey})},fireSyntheticEditorKeyDownEvent:function(e,t){return i.call(this,"fin-editor-keydown",{input:e,keyEvent:t,char:this.canvas.getKeyChar(t),legacyChar:t.legacyKey})},fireSyntheticEditorKeyPressEvent:function(e,t){return i.call(this,"fin-editor-keypress",{input:e,keyEvent:t,char:this.canvas.getKeyChar(t),legacyChar:t.legacyKey})},fireSyntheticEditorDataChangeEvent:function(e,t,n){return i.call(this,"fin-editor-data-change",!0,{input:e,oldValue:t,newValue:n})},fireSyntheticRowHeaderClickedEvent:function(e){return i.call(this,"fin-row-header-clicked",!0,{},e)},fireSyntheticRowSelectionChangedEvent:function(){return i.call(this,"fin-row-selection-changed",this.selectionDetailGetters)},fireSyntheticColumnSelectionChangedEvent:function(){return i.call(this,"fin-column-selection-changed",this.selectionDetailGetters)},fireSyntheticContextMenuEvent:function(e){return Object.defineProperties(e,this.selectionDetailGetterDescriptors),i.call(this,"fin-context-menu",{},e)},fireSyntheticMouseUpEvent:function(e){return Object.defineProperties(e,this.selectionDetailGetterDescriptors),i.call(this,"fin-mouseup",{},e)},fireSyntheticMouseDownEvent:function(e){return Object.defineProperties(e,this.selectionDetailGetterDescriptors),i.call(this,"fin-mousedown",{},e)},fireSyntheticMouseMoveEvent:function(e){return i.call(this,"fin-mousemove",{},e)},fireSyntheticButtonPressedEvent:function(e){if(e.cellRenderer instanceof r){if(e.value&&e.value.subrows){var t=e.primitiveEvent.detail.mouse.y-e.bounds.y,n=e.bounds.height/e.value.subrows;e.subrow=Math.floor(t/n)}return i.call(this,"fin-button-pressed",{},e)}},fireSyntheticOnColumnsChangedEvent:function(){return i.call(this,"fin-column-changed-event",{})},fireSyntheticKeydownEvent:function(e){return i.call(this,"fin-keydown",e.detail)},fireSyntheticKeyupEvent:function(e){return i.call(this,"fin-keyup",e.detail)},fireSyntheticFilterAppliedEvent:function(){return i.call(this,"fin-filter-applied",{})},fireSyntheticOnCellEnterEvent:function(e){return i.call(this,"fin-cell-enter",e)},fireSyntheticOnCellExitEvent:function(e){return i.call(this,"fin-cell-exit",e)},fireSyntheticClickEvent:function(e){return i.call(this,"fin-click",{},e)},fireSyntheticDoubleClickEvent:function(e){if(this.abortEditing())return i.call(this,"fin-double-click",{},e)},fireSyntheticGridRenderedEvent:function(){return i.call(this,"fin-grid-rendered",{source:this})},fireSyntheticTickEvent:function(){return i.call(this,"fin-tick",{source:this})},fireSyntheticGridResizedEvent:function(e){return i.call(this,"fin-grid-resized",e)},fireScrollEvent:function(e,t,n){return i.call(this,e,{oldValue:t,value:n})},fireRequestCellEdit:function(e,t){return i.call(this,"fin-request-cell-edit",!0,{value:t},e)},fireBeforeCellEdit:function(e,t,n,r){return i.call(this,"fin-before-cell-edit",!0,{oldValue:t,newValue:n,input:r},e)},fireAfterCellEdit:function(e,t,n,r){return i.call(this,"fin-after-cell-edit",{newValue:n,oldValue:t,input:r},e)},delegateCanvasEvents:function(){var e=this;function t(t,n){if(0!==e.getLogicalRowCount()){var i,r,o=e.getGridCellFromMousePoint(t.detail.mouse);o.fake&&!t.detail.dragstart||(i=o.cellEvent),i&&(r=Object.defineProperty(i,"primitiveEvent",{value:t,enumerable:!1,configurable:!0,writable:!0}),n.call(e,r))}}this.addInternalEventListener("fin-canvas-resized",function(t){e.resized(),e.fireSyntheticGridResizedEvent(t)}),this.addInternalEventListener("fin-canvas-mousemove",function(n){e.properties.readOnly||t(n,function(e){this.delegateMouseMove(e),this.fireSyntheticMouseMoveEvent(e)})}),this.addInternalEventListener("fin-canvas-mousedown",function(n){e.properties.readOnly||(e.abortEditing()?t(n,function(e){e.keys=n.detail.keys,this.mouseDownState=e,this.delegateMouseDown(e),this.fireSyntheticMouseDownEvent(e),this.repaint()}):n.stopPropagation())}),this.addInternalEventListener("fin-canvas-click",function(n){e.properties.readOnly||t(n,function(e){this.mouseDownState&&this.mouseDownState.gridCell.equals(e.gridCell)&&e.mousePointInClickRect&&(e.keys=n.detail.keys,this.mouseDownState&&this.fireSyntheticButtonPressedEvent(this.mouseDownState),this.fireSyntheticClickEvent(e),this.delegateClick(e)),this.mouseDownState=null})}),this.addInternalEventListener("fin-canvas-mouseup",function(n){e.properties.readOnly||(e.dragging=!1,e.isScrollingNow()&&e.setScrollingNow(!1),e.columnDragAutoScrolling&&(e.columnDragAutoScrolling=!1),t(n,function(e){this.delegateMouseUp(e),this.fireSyntheticMouseUpEvent(e)}))}),this.addInternalEventListener("fin-canvas-dblclick",function(n){e.properties.readOnly||t(n,function(e){this.fireSyntheticDoubleClickEvent(e,n),this.delegateDoubleClick(e)})}),this.addInternalEventListener("fin-canvas-drag",function(n){e.properties.readOnly||(e.dragging=!0,t(n,e.delegateMouseDrag))}),this.addInternalEventListener("fin-canvas-keydown",function(t){e.properties.readOnly||(e.fireSyntheticKeydownEvent(t),e.delegateKeyDown(t))}),this.addInternalEventListener("fin-canvas-keyup",function(t){e.properties.readOnly||(e.fireSyntheticKeyupEvent(t),e.delegateKeyUp(t))}),this.addInternalEventListener("fin-canvas-wheelmoved",function(n){t(n,e.delegateWheelMoved)}),this.addInternalEventListener("fin-canvas-mouseout",function(n){e.properties.readOnly||t(n,e.delegateMouseExit)}),this.addInternalEventListener("fin-canvas-context-menu",function(n){t(n,function(t){e.delegateContextMenu(t),e.fireSyntheticContextMenuEvent(t)})}),document.body.addEventListener("copy",function(t){e.checkClipboardCopy(t)})},delegateWheelMoved:function(e){this.behavior.onWheelMoved(this,e)},delegateMouseExit:function(e){this.behavior.handleMouseExit(this,e)},delegateContextMenu:function(e){this.behavior.onContextMenu(this,e)},delegateMouseMove:function(e){this.behavior.onMouseMove(this,e)},delegateMouseDown:function(e){this.behavior.handleMouseDown(this,e)},delegateMouseUp:function(e){this.behavior.onMouseUp(this,e)},delegateClick:function(e){this.behavior.onClick(this,e)},delegateMouseDrag:function(e){this.behavior.onMouseDrag(this,e)},delegateDoubleClick:function(e){this.behavior.onDoubleClick(this,e)},delegateKeyDown:function(e){this.behavior.onKeyDown(this,e)},delegateKeyUp:function(e){this.behavior.onKeyUp(this,e)}}},function(e,t,n){"use strict";var i=n(107);function r(e){var t,n=this.behavior.getColumns(),i=this.behavior.getActiveColumns();return Array.isArray(e)?(t=[],e.forEach(function(e){var r="number"==typeof e?"index":"name",o=n.find(function(t){return t[r]===e});i.indexOf(o)<0&&t.push(o)}),t=t.concat(i)):t=e?n:i,t}function o(e){var t=e.origin,n=e.corner,r=Math.min(t.x,n.x),o=Math.min(t.y,n.y),s=Math.max(t.x,n.x),a=Math.max(t.y,n.y);return new i(r,o,s-r,a-o)}function s(e,t){var n,i;return e&&(i="f"===(typeof(n=e[t.name]))[0]&&n||t.calculator)&&(n=i(e,t.name)),n||0===n||!1===n?n:""}t.mixin={selectionInitialize:function(){var e=this;this.selectionDetailGetters={get rows(){return e.getSelectedRows()},get columns(){return e.getSelectedColumns()},get selections(){return e.selectionModel.getSelections()}},this.selectionDetailGetterDescriptors=Object.getOwnPropertyDescriptors(this.selectionDetailGetters)},hasSelections:function(){if(this.getSelectionModel)return this.selectionModel.hasSelections()},getSelectionAsTSV:function(){switch(this.selectionModel.getLastSelectionType()){case"cell":var e=this.getSelectionMatrix();return e=e[e.length-1],this.getMatrixSelectionAsTSV(e);case"row":return this.getMatrixSelectionAsTSV(this.getRowSelectionMatrix());case"column":return this.getMatrixSelectionAsTSV(this.getColumnSelectionMatrix())}},getMatrixSelectionAsTSV:function(e){var t="";if(e.length){var n=e.length,i=e[0].length,r=n-1,o=i>1?"\n":"";if(n*i>2e4)return alert("selection size is too big to copy to the paste buffer"),"";for(var s=0;s<i;s++)for(var a=0;a<n;a++)t+=e[a][s]+(a<r?"\t":o)}return t},clearSelections:function(){var e=this.properties.checkboxOnlyRowSelections;this.selectionModel.clear(e),this.clearMouseDown()},clearMostRecentSelection:function(){var e=this.properties.checkboxOnlyRowSelections;this.selectionModel.clearMostRecentSelection(e)},clearMostRecentColumnSelection:function(){this.selectionModel.clearMostRecentColumnSelection()},clearMostRecentRowSelection:function(){},clearRowSelection:function(){this.selectionModel.clearRowSelection()},select:function(e,t,n,i){e<0||t<0||this.selectionModel.select(e,t,n,i)},isSelected:function(e,t){return this.selectionModel.isSelected(e,t)},isCellSelectedInRow:function(e){return this.selectionModel.isCellSelectedInRow(e)},isCellSelectedInColumn:function(e){return this.selectionModel.isCellSelectedInColumn(e)},getRowSelection:function(e){for(var t=this.behavior.dataModel,n=this.selectionModel.getSelectedRows(),i=r.call(this,e),o={},a=0,l=i.length;a<l;a++){var u=i[a],c=o[u.name]=new Array(n.length);n.forEach(h)}function h(e,n){var i=t.getRow(e);c[n]=s(i,u)}return o},getRowSelectionMatrix:function(e){for(var t=this.behavior.dataModel,n=this.selectionModel.getSelectedRows(),i=r.call(this,e),o=new Array(i.length),a=0,l=i.length;a<l;a++){var u=i[a];o[a]=new Array(n.length),n.forEach(c)}function c(e,n){var i=t.getRow(e);o[a][n]=s(i,u)}return o},getColumnSelectionMatrix:function(){var e=this.behavior,t=e.dataModel,n=this.getHeaderRowCount(),i=this.getSelectedColumns(),r=this.getRowCount(),o=new Array(i.length);return i.forEach(function(i,a){for(var l=e.getActiveColumn(i),u=o[a]=new Array(r),c=n;c<r;c++){var h=t.getRow(c);u[c]=s(h,l)}}),o},getColumnSelection:function(){var e=this.behavior,t=e.dataModel,n=this.getHeaderRowCount(),i=this.getSelectedColumns(),r={},o=this.getRowCount();return i.forEach(function(i){for(var a=e.getActiveColumn(i),l=r[a.name]=new Array(o),u=n;u<o;u++){var c=t.getRow(u);l[u]=s(c,a)}}),r},getSelection:function(){var e=this.behavior,t=e.dataModel,n=this.getSelections(),i=new Array(n.length);return n.forEach(function(n,r){for(var a=o(n),l=a.width,u=a.height,c={},h=0,d=a.origin.x;h<l;h++,d++)for(var f=e.getActiveColumn(d),p=c[f.name]=new Array(u),g=0,v=a.origin.y;g<u;g++,v++){var m=t.getRow(v);p[g]=s(m,f)}i[r]=c}),i},getSelectionMatrix:function(){var e=this.behavior,t=e.dataModel,n=this.getSelections(),i=new Array(n.length);return n.forEach(function(n,r){for(var a=o(n),l=a.width,u=a.height,c=[],h=0,d=a.origin.x;h<l;h++,d++)for(var f=c[h]=new Array(u),p=e.getActiveColumn(d),g=0,v=a.origin.y;g<u;g++,v++){var m=t.getRow(v);f[g]=s(m,p)}i[r]=c}),i},selectCell:function(e,t,n){var i=this.properties.checkboxOnlyRowSelections;this.selectionModel.clear(i),this.selectionModel.select(e,t,0,0,n)},toggleSelectColumn:function(e,t){t=t||[];var n=this.selectionModel,i=n.isColumnSelected(e),r=t.indexOf("CTRL")>-1,o=t.indexOf("SHIFT")>-1;r||o?(r&&(i?n.deselectColumn(e):n.selectColumn(e)),o&&(n.clear(),n.selectColumn(this.lastEdgeSelection[0],e))):(n.clear(),i||n.selectColumn(e)),i||o||(this.lastEdgeSelection[0]=e),this.repaint(),this.fireSyntheticColumnSelectionChangedEvent()},toggleSelectRow:function(e,t){t=t||[];var n=this.selectionModel,i=n.isRowSelected(e),r=t.indexOf("SHIFT")>=0;i?n.deselectRow(e):(this.singleSelect(),n.selectRow(e)),r&&(n.clear(),n.selectRow(this.lastEdgeSelection[1],e)),i||r||(this.lastEdgeSelection[1]=e),this.repaint()},singleSelect:function(){var e=this.properties.singleRowSelectionMode;return e&&this.selectionModel.clearRowSelection(),e},selectViewportCell:function(e,t){var n,i;this.getRowCount()&&(n=this.renderer.visibleColumns[e])&&(i=this.renderer.visibleRows[t+this.getHeaderRowCount()])&&(e=n.columnIndex,t=i.rowIndex,this.clearSelections(),this.select(e,t,0,0),this.setMouseDown(this.newPoint(e,t)),this.setDragExtent(this.newPoint(0,0)),this.repaint())},selectToViewportCell:function(e,t){var n,i,r;if((n=this.getSelections())&&n.length&&(i=this.renderer.visibleColumns[e])&&(r=this.renderer.visibleRows[t+this.getHeaderRowCount()])){var o=n[0].origin;e=i.columnIndex,t=r.rowIndex,this.setDragExtent(this.newPoint(e-o.x,t-o.y)),this.select(o.x,o.y,e-o.x,t-o.y),this.repaint()}},selectToFinalCellOfCurrentRow:function(){this.selectFinalCellOfCurrentRow(!0)},selectFinalCellOfCurrentRow:function(e){if(this.getRowCount()){var t=this.getSelections();if(t&&t.length){var n=t[0],i=n.origin,r=n.extent,o=this.getColumnCount();this.scrollBy(o,0),this.clearSelections(),e?this.select(i.x,i.y,o-i.x-1,r.y):this.select(o-1,i.y,0,0),this.repaint()}}},selectToFirstCellOfCurrentRow:function(){this.selectFirstCellOfCurrentRow(!0)},selectFirstCellOfCurrentRow:function(e){if(this.getRowCount()){var t=this.getSelections();if(t&&t.length){var n=t[0],i=n.origin,r=n.extent;this.clearSelections(),e?this.select(i.x,i.y,-i.x,r.y):this.select(0,i.y,0,0),this.setHScrollValue(0),this.repaint()}}},selectFinalCell:function(){this.getRowCount()&&(this.selectCellAndScrollToMakeVisible(this.getColumnCount()-1,this.getRowCount()-1),this.repaint())},selectToFinalCell:function(){if(this.getRowCount()){var e=this.getSelections();if(e&&e.length){var t=e[0].origin,n=this.getColumnCount(),i=this.getRowCount();this.clearSelections(),this.select(t.x,t.y,n-t.x-1,i-t.y-1),this.repaint()}}},getSelectedRow:function(){var e=this.selectionModel.getSelections();if(e.length){for(var t=this.behavior,n=this.getColumnCount(),i=e[0].origin.y,r={},o=0;o<n;o++)r[t.getActiveColumn(o).header]=t.getValue(o,i);return r}},selectionChanged:function(e){this.selectRowsFromCells(),this.selectColumnsFromCells(),e||this.canvas.dispatchEvent(new CustomEvent("fin-selection-changed",{detail:this.selectionDetailGetters}))},isColumnOrRowSelected:function(){return this.selectionModel.isColumnOrRowSelected()},selectColumn:function(e,t){this.selectionModel.selectColumn(e,t)},selectRow:function(e,t){var n=this.selectionModel;this.singleSelect()?e=t:void 0===t&&(t=e),n.selectRow(Math.min(e,t),Math.max(e,t))},selectRowsFromCells:function(){var e;!this.properties.checkboxOnlyRowSelections&&this.properties.autoSelectRows&&(this.properties.singleRowSelectionMode?(e=this.selectionModel.getLastSelection())?this.selectRow(null,e.corner.y):this.clearRowSelection():this.selectionModel.selectRowsFromCells(0,!0),this.fireSyntheticRowSelectionChangedEvent())},selectColumnsFromCells:function(){this.properties.autoSelectColumns&&this.selectionModel.selectColumnsFromCells()},getSelectedRows:function(){return this.behavior.getSelectedRows()},getSelectedColumns:function(){return this.behavior.getSelectedColumns()},getSelections:function(){return this.behavior.getSelections()},getLastSelectionType:function(e){return this.selectionModel.getLastSelectionType(e)},isInCurrentSelectionRectangle:function(e,t){return this.selectionModel.isInCurrentSelectionRectangle(e,t)},selectAllRows:function(){this.selectionModel.selectAllRows()},areAllRowsSelected:function(){return this.selectionModel.areAllRowsSelected()},toggleSelectAllRows:function(){this.areAllRowsSelected()?this.selectionModel.clear():this.selectAllRows(),this.repaint()},moveSingleSelect:function(e,t){var n=this.getMouseDown().plus(this.getDragExtent());this.moveToSingleSelect(n.x+e,n.y+t)},moveToSingleSelect:function(e,t){var n=this.getColumnCount()-1,i=this.getRowCount()-1,r=this.getVisibleColumnsCount()-1,o=this.getVisibleRowsCount()-1;this.properties.scrollingEnabled||(n=Math.min(n,r),i=Math.min(i,o)),e=Math.min(n,Math.max(0,e)),t=Math.min(i,Math.max(0,t)),this.clearSelections(),this.select(e,t,0,0),this.setMouseDown(this.newPoint(e,t)),this.setDragExtent(this.newPoint(0,0)),this.selectCellAndScrollToMakeVisible(e,t),this.repaint()},extendSelect:function(e,t){var n=this.getColumnCount()-1,i=this.getRowCount()-1,r=this.renderer.visibleColumns.length-1,o=this.renderer.visibleRows.length-1,s=this.getMouseDown(),a=this.getDragExtent(),l=a.x+e,u=a.y+t;this.properties.scrollingEnabled||(n=Math.min(n,r),i=Math.min(i,o)),l=Math.min(n-s.x,Math.max(-s.x,l)),u=Math.min(i-s.y,Math.max(-s.y,u)),this.clearMostRecentSelection(),this.select(s.x,s.y,l,u),this.setDragExtent(this.newPoint(l,u));var c=this.insureModelColIsVisible(l+s.x,e),h=this.insureModelRowIsVisible(u+s.y,t);return this.repaint(),c||h},getGridCellFromLastSelection:function(e){var t=this.selectionModel.getLastSelection();return t&&(new this.behavior.CellEvent).resetGridXDataY(t.origin.x,t.origin.y,null,e)}}},function(e,t,n){"use strict";var i=n(3).Rectangle;function r(){i.apply(this,arguments)}r.prototype=Object.create(i.prototype,{width:{get:function(){return this.extent.x+1}},height:{get:function(){return this.extent.y+1}}}),e.exports=r},function(e,t,n){"use strict";t.mixin={stashRowSelections:function(){if(this.properties.restoreRowSelections){var e=this.behavior.dataModel;return this.selectedDataRowIndexes=this.getSelectedRows().map(function(t){return e.getRowIndex(t)}),this.selectedDataRowIndexes.length}},unstashRowSelections:function(){var e=this.selectedDataRowIndexes;if(e){delete this.selectedDataRowIndexes;var t,n,i=this.behavior.dataModel,r=this.getRowCount(),o=e.length,s=[],a=this.selectionModel;for(n=0;o&&n<r;++n)(t=e.indexOf(i.getRowIndex(n)))>=0&&(s.push(n),delete e[t],o--);return s.forEach(function(e){a.selectRow(e)}),s.length}},stashColumnSelections:function(){if(this.properties.restoreColumnSelections){var e=this.behavior;return this.selectedColumnNames=this.getSelectedColumns().map(function(t){return e.getActiveColumn(t).name}),this.selectedColumnNames.length}},unstashColumnSelections:function(e){var t=this.selectedColumnNames;if(t){delete this.selectedColumnNames;var n=this.behavior,i=this.selectionModel;return t.reduce(function(e,t){var r=n.getActiveColumnIndex(t);return r&&(i.selectColumn(r),e++),e},0)}}}},function(e,t,n){"use strict";var i=n(35).Scrollbar;t.mixin={vScrollValue:0,hScrollValue:0,sbVScroller:null,sbHScroller:null,sbPrevVScrollValue:null,sbPrevHScrollValue:null,scrollingNow:!1,setScrollingNow:function(e){this.scrollingNow=e},isScrollingNow:function(){return this.scrollingNow},scrollBy:function(e,t){this.scrollHBy(e),this.scrollVBy(t)},scrollVBy:function(e){var t=this.sbVScroller.range.max,n=this.getVScrollValue(),i=Math.min(t,Math.max(0,n+e));i!==n&&this.setVScrollValue(i)},scrollHBy:function(e){var t=this.sbHScroller.range.max,n=this.getHScrollValue(),i=Math.min(t,Math.max(0,n+e));i!==n&&this.setHScrollValue(i)},scrollToMakeVisible:function(e,t){var n,i=this.renderer.dataWindow,r=this.properties.fixedColumnCount,o=this.properties.fixedRowCount;e>=r&&((n=e-i.origin.x)<0?this.sbHScroller.index+=n:e-i.corner.x>0&&(this.sbHScroller.index=this.renderer.getMinimumLeftPositionToShowColumn(e))),t>=o&&((n=t-i.origin.y-1)<0||(n=t-i.corner.y)>0)&&(this.sbVScroller.index+=n)},selectCellAndScrollToMakeVisible:function(e,t){this.scrollToMakeVisible(e,t),this.selectCell(e,t,!0)},setVScrollValue:function(e){var t=this;if((e=Math.min(this.sbVScroller.range.max,Math.max(0,Math.round(e))))!==this.vScrollValue){this.behavior.setScrollPositionY(e),this.behavior.changed();var n=this.vScrollValue;this.vScrollValue=e,this.scrollValueChangedNotification(),setTimeout(function(){t.fireScrollEvent("fin-scroll-y",n,e)})}},getVScrollValue:function(){return this.vScrollValue},setHScrollValue:function(e){var t=this;if((e=Math.min(this.sbHScroller.range.max,Math.max(0,Math.round(e))))!==this.hScrollValue){this.behavior.setScrollPositionX(e),this.behavior.changed();var n=this.hScrollValue;this.hScrollValue=e,this.scrollValueChangedNotification(),setTimeout(function(){t.fireScrollEvent("fin-scroll-x",n,e)})}},getHScrollValue:function(){return this.hScrollValue},initScrollbars:function(){if(!this.sbHScroller||!this.sbVScroller){var e=new i({orientation:"horizontal",deltaXFactor:this.constructor.defaults.wheelHFactor,onchange:this.setHScrollValue.bind(this),cssStylesheetReferenceElement:this.div}),t=new i({orientation:"vertical",deltaYFactor:this.constructor.defaults.wheelVFactor,onchange:this.setVScrollValue.bind(this),cssStylesheetReferenceElement:this.div,paging:{up:this.pageUp.bind(this),down:this.pageDown.bind(this)}});this.sbHScroller=e,this.sbVScroller=t;var n=this.properties.hScrollbarClassPrefix,r=this.properties.vScrollbarClassPrefix;n&&""!==n&&(this.sbHScroller.classPrefix=n),r&&""!==r&&(this.sbVScroller.classPrefix=r),this.div.appendChild(e.bar),this.div.appendChild(t.bar),this.resizeScrollbars()}},resizeScrollbars:function(){this.sbHScroller.shortenBy(this.sbVScroller).resize(),this.sbVScroller.resize()},setVScrollbarValues:function(e){this.sbVScroller.range={min:0,max:e}},setHScrollbarValues:function(e){this.sbHScroller.range={min:0,max:e}},scrollValueChangedNotification:function(){this.hScrollValue===this.sbPrevHScrollValue&&this.vScrollValue===this.sbPrevVScrollValue||(this.sbPrevHScrollValue=this.hScrollValue,this.sbPrevVScrollValue=this.vScrollValue,this.cellEditor&&this.cellEditor.scrollValueChangedNotification(),this.computeCellsBounds())},synchronizeScrollingBoundaries:function(){var e=this.getBounds();if(e){for(var t=this.getFixedColumnCount(),n=this.getColumnCount(),i=this.getRowCount(),r=e.width-this.behavior.getFixedColumnsMaxWidth(),o=this.properties,s="border-box"===o.boxSizing,a=s?0:o.gridLinesVWidth,l=0,u=0;u<n&&l<r;u++)l+=this.getColumnWidth(n-u-1)+a;l>r&&u--;var c=this.renderer.getVisibleScrollHeight();a=s?0:o.gridLinesHWidth;for(var h=0,d=0;d<i&&h<c;d++)h+=this.getRowHeight(i-d-1)+a;if(h>c&&d--,this.sbHScroller){var f=Math.max(0,n-t-u);this.setHScrollbarValues(f),this.setHScrollValue(Math.min(this.getHScrollValue(),f))}if(this.sbVScroller){var p=Math.max(0,i-o.fixedRowCount-d);this.setVScrollbarValues(p),this.setVScrollValue(Math.min(this.getVScrollValue(),p))}this.computeCellsBounds(),setTimeout(this.resizeScrollbars.bind(this))}},pageUp:function(){var e=this.renderer.getPageUpRow();return this.setVScrollValue(e),e},pageDown:function(){var e=this.renderer.getPageDownRow();return this.setVScrollValue(e),e},pageLeft:function(){throw"page left not yet implemented"},pageRight:function(){throw"page right not yet implemented"}}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var i=n(13),r=n.n(i),o=n(1),s=n.n(o);function a(e,t){this.element=e,this.context=t,this.transitioning=!1}a.prototype.begin=function(e){var t=this;this.transitioning=!0,this.element.addEventListener("transitionend",function n(i){t.element.removeEventListener("transitionend",n),e&&e.call(this,i,t),t.transitioning=!1})};var l=a,u=s.a.parent("CellEditor").prototype,c="toggle-mode-",h={hidden:function(){this.selectionStart=this.input.selectionStart,this.selectionEnd=this.input.selectionEnd,this.dropdown.selectedIndex=-1,this.dropdown.style.scrollTop=0,this.options.style.visibility="visible";var e=p(this.dropdown,"marginTop"),t=this.dropdown.size,n=Math.ceil(2*(this.dropdown.length&&p(this.dropdown[0],"height")||13.1875))/2+1;this.options.style.height=e+n*t+5+"px",this.input.addEventListener("mousedown",this.slideUpBound=f.bind(this)),this.optionsTransition.begin()},visible:f};function d(e,t,n){var i,r,o,s,a=this.dropdown,l=this.modes.find(function(e){return e.name===t}),u=l.selector;if(e.classList.toggle("active",!!n),n?((i=this.el.style).cursor="progress",setTimeout(function(){i.cursor=null},333),u?(r=a.querySelector(u),o=l.appendOptions.call(this,r),r.label=r.label.replace(/ \(\d+\)$/,""),r.label+=" ("+o+")"):(o=l.appendOptions.call(this,a),this.controllable||(e.textContent=o+" values")),s=null):s="none",!u){u="option,optgroup:not([class])";var c=!0}Array.prototype.forEach.call(a.querySelectorAll(u),function(e){c&&e.parentElement!==a||(e.style.display=s)})}function f(){this.input.removeEventListener("mousedown",this.slideUpBound),this.options.style.height=0,this.optionsTransition.begin(function(e){this.style.visibility="hidden"})}function p(e,t){return parseFloat(window.getComputedStyle(e)[t])}var g,v=s.a.extend("ComboBox",{initialize:function(){var e=this.el;this.input=e.querySelector("input"),this.dropper=e.querySelector("span"),this.options=e.querySelector("div"),this.dropdown=this.options.querySelector("select"),this.controllable=this.modes.length>1,this.optionsTransition=new l(this.options,this),this.menuModesSource=this.column.menuModes||{schemaOptions:!0},this.dropper.addEventListener("mousedown",this.toggleDropDown.bind(this)),this.dropdown.addEventListener("mousewheel",function(e){e.stopPropagation()}),this.dropdown.addEventListener("change",this.insertText.bind(this))},template:['<div class="hypergrid-combobox" title="">','    <input type="text" lang="{{locale}}" style="{{style}}">','    <span title="Click for options"></span>',"    <div>",'        <select id="dataContainer" size="15" lang="{{locale}}"></select>',"    </div>","</div>"].join("\n"),modes:[{name:"distinctValues",appendOptions:function(e){var t={},n=[],i=this.column.name,r=this.column.getFormatter();for(var o in this.grid.behavior.getData().forEach(function(e){var n=r(e[i]);t[n]=(t[n]||0)+1}),t)n.push(o);for(;e.firstElementChild;)e.firstElementChild.remove();return n.sort().forEach(function(n){var i=new Option(n+" ("+t[n]+")",n);e.appendChild(i)}),n.length}},{name:"schemaOptions",appendOptions:function(e){for(this.column.name,this.column.getFormatter();e.firstElementChild;)e.firstElementChild.remove();return[].length}}],showEditor:function(){if(!this.built){var e=this.menuModesSource,t=this.menuModes={};this.modes.forEach(function(n){var i=n.name;i in e&&(t[i]=e[i])}),this.modes.forEach(function(e){var n=document.createElement("span");if(this.controllable&&(n.className=c+e.name,n.title="Toggle "+(e.label||e.name).toLowerCase(),e.tooltip&&(n.title+="\n"+e.tooltip),n.textContent=e.symbol),e.selector){var i=document.createElement("optgroup");i.label=e.label,i.className="submenu-"+e.name,i.style.backgroundColor=e.backgroundColor,this.dropdown.add(i)}d.call(this,n,e.name,t[e.name])},this),this.built=!0}u.showEditor.call(this)},hideEditor:function(){u.hideEditor.call(this),this.dropdown.value!==this.initialValue&&(this.grid.behavior.dataModel.data[this.event.dataCell.y][this.column.schema.code]=this.dropdown.value)},cancelEditing:function(){return this.dropdown.value=this.initialValue,this.setEditorValue(this.initialValue),this.hideEditor(),this.grid.cellEditor=null,this.el.remove(),this.grid.takeFocus(),!0},toggleDropDown:function(){var e=this,t=this.dropdown;function n(n){if(n.map(function(e){var n=new Option(e.label,e.value);t.appendChild(n)}),!e.optionsTransition.transitioning){var i=window.getComputedStyle(e.dropdown).visibility;h[i].call(e)}}var i=this.column.schema.loaddata;void 0!==i?i(this.column.schema,this.input.value,n):n()},insertText:function(e){this.input.focus(),this.input.value=this.dropdown[this.dropdown.selectedIndex].label,this.input.setSelectionRange(0,this.input.value.length),this.toggleDropDown()}}),m=n(39),y=n.n(m),b=s.a.parent("CellEditor").prototype,w=s.a.extend("Datetime",{template:'<div class="hypergrid-combobox" title="">\n    <input type="text" lang="{{locale}}" style="{{style}}">\n    <span title="Click for datepicker"></span>\n</div>',initialize:function(e){var t=this.el;this.input=t.querySelector("input"),this.selectAll=function(){var e=this.getEditorValue().length;this.input.setSelectionRange(0,e)}},showEditor:function(){b.showEditor.call(this),g=y()(this.el,{})},hideEditor:function(){g.destroy(),b.hideEditor.call(this)}}),C=n(21),x=n.n(C),S=n(40),k=n.n(S),_=s.a.parent("CellEditor").prototype,D={hidden:function(){this.selectionStart=this.input.selectionStart,this.selectionEnd=this.input.selectionEnd,this.dropdown.selectedIndex=-1,this.dropdown.style.scrollTop=0,this.options.style.visibility="visible";var e=A(this.dropdown,"marginTop"),t=Math.ceil(2*(this.dropdown.length&&A(this.dropdown[0],"height")||13.1875))/2+1;this.options.style.height=e+20*t+2+"px",this.dropdown.style.height=e+20*t+"px",this.input.addEventListener("mousedown",this.slideUpBound=E.bind(this)),this.optionsTransition.begin()},visible:E};function E(){this.input.removeEventListener("mousedown",this.slideUpBound),this.options.style.height=0,this.optionsTransition.begin(function(e){this.style.visibility="hidden"})}function A(e,t){return parseFloat(window.getComputedStyle(e)[t])}var M=s.a.extend("Tree",{template:['<div class="hypergrid-combobox" title="">','    <input type="text" lang="{{locale}}" style="{{style}}">','    <span title="Click for options"></span>',"    <div>",'       <div id="dataContainer"></div>',"    </div>","</div>"].join("\n"),initialize:function(e){var t=this.el;this.node=null,this.input=t.querySelector("input"),this.dropper=t.querySelector("span"),this.options=t.querySelector("div"),this.dropdown=this.options.querySelector("#dataContainer"),this.optionsTransition=new l(this.options,this),this.selectAll=function(){var e=this.getEditorValue().length;this.input.setSelectionRange(0,e)},this.dropper.addEventListener("mousedown",this.toggleDropDown.bind(this)),this.dropdown.addEventListener("mousewheel",function(e){e.stopPropagation()})},showEditor:function(){_.showEditor.call(this)},hideEditor:function(){_.hideEditor.call(this),null!==this.node&&void 0!==this.node&&(this.grid.behavior.dataModel.data[this.event.dataCell.y][this.column.schema.code]=this.node.id)},cancelEditing:function(){return this.node=null,this.setEditorValue(this.initialValue),this.hideEditor(),this.grid.cellEditor=null,this.el.remove(),this.grid.takeFocus(),!0},toggleDropDown:function(){var e=this;function t(t){var n=new x.a({data:t});if(new k.a(n,{target:e.dropdown}),n.on("node.selected",e.insertText.bind(e)),!e.optionsTransition.transitioning){var i=window.getComputedStyle(e.dropdown).visibility;D[i].call(e)}}var n=this.column.schema.loaddata;void 0!==n?n(this.column.schema,this.input.value,t):t()},insertText:function(e,t){this.node=e,this.input.focus(),this.input.value=e.text,this.input.setSelectionRange(0,this.input.value.length),this.toggleDropDown()}}),R='14px "Helvetica Neue",Helvetica,"PingFang SC","Microsoft YaHei"',P={themeName:"excel",cellPadding:12,font:R,foregroundSelectionFont:R,columnHeaderForegroundSelectionFont:R,columnHeaderFont:R,rowHeaderFont:R,rowHeaderForegroundSelectionFont:R,defaultRowHeight:24,fixedLinesHWidth:1,fixedLinesVWidth:1,columnHeaderBackgroundColor:"rgb(230,230,230)",rowHeaderBackgroundColor:"rgb(230,230,230)",topLeftBackgroundColor:"rgb(230,230,230)",lineColor:"rgb(210,210,210)",backgroundColor2:"rgb(255, 255, 255)",color:"rgb(25, 25, 25)",fontFamily:'"Helvetica Neue",Helvetica,"PingFang SC","Microsoft YaHei"',backgroundColor:"rgb(255, 255, 255)",columnHeaderColor:"rgb(25, 25, 25)",rowHeaderColor:"rgb(25, 25, 25)",topLeftColor:"rgb(230,230,230)",backgroundSelectionColor:"rgb(210,210,210, 0.8)",foregroundSelectionColor:"rgb(25, 25, 25)",columnHeaderForegroundSelectionColor:"rgb(25, 25, 25)",columnHeaderBackgroundSelectionColor:"rgb(210,210,210)",rowHeaderForegroundSelectionColor:"rgb(25, 25, 25)",fixedColumnBackgroundSelectionColor:"rgb(210,210,210)",selectionRegionOutlineColor:"rgb(33,115,70)"},O={toTreeData:function(e,t,n){for(var i,r=n||{ukey:"id",pkey:"parent_id",toCKey:"children"},o=[],s=0;s<e.length;s++)if(e[s][r.pkey]==t||e[s][r.ukey]===e[s][r.pkey]){var a=e[s];(i=O.toTreeData(e,e[s][r.ukey],r)).length>0&&(a[r.toCKey]=i),o.push(a)}return o}},T=O;function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"default",function(){return I});var I=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayFieldFormat=n.displayFieldFormat,this.utils=T,r.a.registerTheme(P),this.grid=new r.a(t,n),this.grid.properties.hoverCellHighlight={enabled:!0,backgroundColor:"rgba(255,255,255)"},this.grid.properties.hoverRowHighlight={enabled:!1},this.grid.properties.hoverColumnHighlight={enabled:!1},this.grid.properties.editOnDoubleClick=!1,this.grid.localization.date=new Intl.DateTimeFormat("zh-Hans-CN",n),this.grid.cellEditors.add(w),this.grid.cellEditors.add(v),this.grid.cellEditors.add(M),r.a.applyTheme("excel")}return function(e,t,n){t&&L(e.prototype,t),n&&L(e,n)}(e,[{key:"setData",value:function(e,t){var n=this,i=this,r=[];t.map(function(e){var t=e;if(t.header=t.caption,t.editor=t.xtype,delete t.caption,""!==n.displayFieldFormat&&t.name.endsWith(n.displayFieldFormat)>-1){var o=t.name.replace(n.displayFieldFormat,"");e.code=o}switch(t.xtype){case"select":t.editor="comboBox",t.loaddata=i.onEditorLoadData;break;case"tree":t.loaddata=i.onEditorLoadData;break;case"text":t.editor="textfield";break;case"date-local":t.editor="datetime"}r.push(t)}),this.grid.setData({data:e,schema:r}),this.grid.getCellEditorAt=function(e){return this.cellEditors.create(e.column.schema.editor,e)},this.grid.getCell=function(e,t){return grid.cellRenderers.get(t)}}},{key:"onEditorLoadData",value:function(e,t,n){throw"请实现该方法"}},{key:"getData",value:function(){return this.grid.behavior.dataModel.data}}]),e}()}])});
//# sourceMappingURL=tg-editable-grid.min.js.map